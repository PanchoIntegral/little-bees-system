  [1m[35m (8328.5ms)[0m  [1m[35mCREATE DATABASE "little_bees_development" ENCODING = 'unicode'[0m
Started GET "/" for ::1 at 2025-09-15 15:56:29 -0700
  
ActiveRecord::ConnectionNotEstablished (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
):

Causes:
PG::ConnectionBad (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
)
  
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:69:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.new_client'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:982:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#connect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:994:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#reconnect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:662:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:661:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:763:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:754:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:771:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#connect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:977:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:976:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:128:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote_string'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/quoting.rb:76:in 'ActiveRecord::ConnectionAdapters::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:122:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1099:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#quoted_scope'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1076:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#data_source_sql'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/schema_statements.rb:60:in 'ActiveRecord::ConnectionAdapters::SchemaStatements#table_exists?'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:54:in 'block in ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:53:in 'ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/migration.rb:1434:in 'ActiveRecord::Migrator#initialize'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'Class#new'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'ActiveRecord::MigrationContext#open'
activerecord (7.2.2.2) lib/active_record/migration.rb:776:in 'block (2 levels) in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration/pending_migration_connection.rb:8:in 'ActiveRecord::PendingMigrationConnection.with_temporary_pool'
activerecord (7.2.2.2) lib/active_record/migration.rb:775:in 'block in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'Array#each'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:753:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:663:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (7.2.2.2) lib/active_record/migration.rb:668:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'Thread::Mutex#synchronize'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/favicon.ico" for ::1 at 2025-09-15 15:56:50 -0700
  
ActiveRecord::ConnectionNotEstablished (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
):

Causes:
PG::ConnectionBad (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
)
  
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:69:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.new_client'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:982:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#connect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:994:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#reconnect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:662:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:661:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:763:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:754:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:771:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#connect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:977:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:976:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:128:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote_string'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/quoting.rb:76:in 'ActiveRecord::ConnectionAdapters::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:122:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1099:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#quoted_scope'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1076:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#data_source_sql'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/schema_statements.rb:60:in 'ActiveRecord::ConnectionAdapters::SchemaStatements#table_exists?'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:54:in 'block in ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:53:in 'ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/migration.rb:1434:in 'ActiveRecord::Migrator#initialize'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'Class#new'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'ActiveRecord::MigrationContext#open'
activerecord (7.2.2.2) lib/active_record/migration.rb:776:in 'block (2 levels) in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration/pending_migration_connection.rb:8:in 'ActiveRecord::PendingMigrationConnection.with_temporary_pool'
activerecord (7.2.2.2) lib/active_record/migration.rb:775:in 'block in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'Array#each'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:753:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:663:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (7.2.2.2) lib/active_record/migration.rb:668:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'Thread::Mutex#synchronize'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/" for ::1 at 2025-09-15 16:22:24 -0700
  
ActiveRecord::ConnectionNotEstablished (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
):

Causes:
PG::ConnectionBad (connection to server at "::1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
connection to server at "127.0.0.1", port 5432 failed: Connection refused (0x0000274D/10061)
	Is the server running on that host and accepting TCP/IP connections?
)
  
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:69:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.new_client'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:982:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#connect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql_adapter.rb:994:in 'ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#reconnect'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:662:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:661:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#reconnect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:763:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:754:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#verify!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:771:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#connect!'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:977:in 'block in ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activesupport (7.2.2.2) lib/active_support/concurrency/null_lock.rb:9:in 'ActiveSupport::Concurrency::NullLock#synchronize'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract_adapter.rb:976:in 'ActiveRecord::ConnectionAdapters::AbstractAdapter#with_raw_connection'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:128:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote_string'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/quoting.rb:76:in 'ActiveRecord::ConnectionAdapters::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/quoting.rb:122:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting#quote'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1099:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#quoted_scope'
activerecord (7.2.2.2) lib/active_record/connection_adapters/postgresql/schema_statements.rb:1076:in 'ActiveRecord::ConnectionAdapters::PostgreSQL::SchemaStatements#data_source_sql'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/schema_statements.rb:60:in 'ActiveRecord::ConnectionAdapters::SchemaStatements#table_exists?'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:54:in 'block in ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:421:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
activerecord (7.2.2.2) lib/active_record/schema_migration.rb:53:in 'ActiveRecord::SchemaMigration#create_table'
activerecord (7.2.2.2) lib/active_record/migration.rb:1434:in 'ActiveRecord::Migrator#initialize'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'Class#new'
activerecord (7.2.2.2) lib/active_record/migration.rb:1282:in 'ActiveRecord::MigrationContext#open'
activerecord (7.2.2.2) lib/active_record/migration.rb:776:in 'block (2 levels) in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration/pending_migration_connection.rb:8:in 'ActiveRecord::PendingMigrationConnection.with_temporary_pool'
activerecord (7.2.2.2) lib/active_record/migration.rb:775:in 'block in ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'Array#each'
activerecord (7.2.2.2) lib/active_record/migration.rb:774:in 'ActiveRecord::Migration.pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:753:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:663:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (7.2.2.2) lib/active_record/migration.rb:668:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'Thread::Mutex#synchronize'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[35m (8291.7ms)[0m  [1m[35mCREATE DATABASE "little_bees_development" ENCODING = 'unicode'[0m
  [1m[35m (8300.7ms)[0m  [1m[35mCREATE DATABASE "little_bees_development" ENCODING = 'unicode'[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-09-15 23:42:19.655436', '2025-09-15 23:42:19.655440') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20250915212458)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar NOT NULL, "role" varchar DEFAULT 'employee' NOT NULL, "encrypted_password" varchar NOT NULL, "two_factor_secret" varchar, "two_factor_enabled" boolean DEFAULT 0, "phone" varchar, "last_sign_in_at" datetime(6), "current_sign_in_at" datetime(6), "sign_in_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_users_on_role" ON "users" ("role")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915212458') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateProducts (20250915212628)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "description" text, "price" decimal(10,2) NOT NULL, "sku" varchar NOT NULL, "category" varchar NOT NULL, "stock_quantity" integer DEFAULT 0, "low_stock_threshold" integer DEFAULT 5, "image_url" varchar, "active" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_sku" ON "products" ("sku")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_category" ON "products" ("category")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_products_on_active" ON "products" ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915212628') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateCustomers (20250915213011)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "customers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "email" varchar, "phone" varchar, "address" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915213011') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateSales (20250915213039)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "sales" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "total_amount" decimal(10,2) NOT NULL, "tax_amount" decimal(10,2) DEFAULT 0.0, "discount_amount" decimal(10,2) DEFAULT 0.0, "status" varchar DEFAULT 'pending' NOT NULL, "payment_method" varchar NOT NULL, "notes" text, "user_id" integer NOT NULL, "customer_id" integer, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_8e94f16ccc"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_7c1f560977"
FOREIGN KEY ("customer_id")
  REFERENCES "customers" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_sales_on_user_id" ON "sales" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_sales_on_customer_id" ON "sales" ("customer_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_sales_on_status" ON "sales" ("status")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_sales_on_created_at" ON "sales" ("created_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915213039') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateSaleItems (20250915213219)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "sale_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "quantity" integer NOT NULL, "unit_price" decimal(10,2) NOT NULL, "line_total" decimal(10,2) NOT NULL, "sale_id" integer NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_a2563c1567"
FOREIGN KEY ("sale_id")
  REFERENCES "sales" ("id")
, CONSTRAINT "fk_rails_ee606308b2"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_sale_items_on_sale_id" ON "sale_items" ("sale_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_sale_items_on_product_id" ON "sale_items" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_sale_items_on_sale_id_and_product_id" ON "sale_items" ("sale_id", "product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915213219') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateDiscounts (20250915214751)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "description" text, "discount_type" varchar NOT NULL, "discount_value" decimal(10,2) NOT NULL, "minimum_amount" decimal(10,2) DEFAULT 0.0, "active" boolean DEFAULT 1, "starts_at" datetime(6), "ends_at" datetime(6), "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_discounts_on_active" ON "discounts" ("active")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_discounts_on_starts_at_and_ends_at" ON "discounts" ("starts_at", "ends_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915214751') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RenameEncryptedPasswordToPasswordDigest (20250915234310)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ausers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar NOT NULL, "role" varchar DEFAULT 'employee' NOT NULL, "password_digest" varchar NOT NULL, "two_factor_secret" varchar, "two_factor_enabled" boolean DEFAULT 0, "phone" varchar, "last_sign_in_at" datetime(6), "current_sign_in_at" datetime(6), "sign_in_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_ausers_on_role" ON "ausers" ("role")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_ausers_on_email" ON "ausers" ("email")[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "ausers" ("id","email","first_name","last_name","role","password_digest","two_factor_secret","two_factor_enabled","phone","last_sign_in_at","current_sign_in_at","sign_in_count","created_at","updated_at")
                     SELECT "id","email","first_name","last_name","role","encrypted_password","two_factor_secret","two_factor_enabled","phone","last_sign_in_at","current_sign_in_at","sign_in_count","created_at","updated_at" FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar NOT NULL, "role" varchar DEFAULT 'employee' NOT NULL, "password_digest" varchar NOT NULL, "two_factor_secret" varchar, "two_factor_enabled" boolean DEFAULT 0, "phone" varchar, "last_sign_in_at" datetime(6), "current_sign_in_at" datetime(6), "sign_in_count" integer DEFAULT 0, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_users_on_role" ON "users" ("role")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "users" ("id","email","first_name","last_name","role","password_digest","two_factor_secret","two_factor_enabled","phone","last_sign_in_at","current_sign_in_at","sign_in_count","created_at","updated_at")
                     SELECT "id","email","first_name","last_name","role","password_digest","two_factor_secret","two_factor_enabled","phone","last_sign_in_at","current_sign_in_at","sign_in_count","created_at","updated_at" FROM "ausers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "ausers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250915234310') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "role", "password_digest", "two_factor_secret", "two_factor_enabled", "phone", "last_sign_in_at", "current_sign_in_at", "sign_in_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["first_name", "Admin"], ["last_name", "User"], ["role", "admin"], ["password_digest", "[FILTERED]"], ["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["phone", nil], ["last_sign_in_at", nil], ["current_sign_in_at", nil], ["sign_in_count", 0], ["created_at", "2025-09-15 23:43:50.257236"], ["updated_at", "2025-09-15 23:43:50.257236"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "role", "password_digest", "two_factor_secret", "two_factor_enabled", "phone", "last_sign_in_at", "current_sign_in_at", "sign_in_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["first_name", "Manager"], ["last_name", "User"], ["role", "manager"], ["password_digest", "[FILTERED]"], ["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["phone", nil], ["last_sign_in_at", nil], ["current_sign_in_at", nil], ["sign_in_count", 0], ["created_at", "2025-09-15 23:43:50.521330"], ["updated_at", "2025-09-15 23:43:50.521330"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "role", "password_digest", "two_factor_secret", "two_factor_enabled", "phone", "last_sign_in_at", "current_sign_in_at", "sign_in_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["first_name", "Employee"], ["last_name", "User"], ["role", "employee"], ["password_digest", "[FILTERED]"], ["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["phone", nil], ["last_sign_in_at", nil], ["current_sign_in_at", nil], ["sign_in_count", 0], ["created_at", "2025-09-15 23:43:50.787705"], ["updated_at", "2025-09-15 23:43:50.787705"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alice"], ["last_name", "Johnson"], ["email", "[FILTERED]"], ["phone", "5550101"], ["address", nil], ["created_at", "2025-09-15 23:43:50.824683"], ["updated_at", "2025-09-15 23:43:50.824683"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (3.5ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Bob"], ["last_name", "Smith"], ["email", "[FILTERED]"], ["phone", "5550102"], ["address", nil], ["created_at", "2025-09-15 23:43:50.834860"], ["updated_at", "2025-09-15 23:43:50.834860"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (3.3ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Carol"], ["last_name", "Williams"], ["email", "[FILTERED]"], ["phone", "5550103"], ["address", nil], ["created_at", "2025-09-15 23:43:50.846958"], ["updated_at", "2025-09-15 23:43:50.846958"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (4.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (5.3ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "David"], ["last_name", "Brown"], ["email", "[FILTERED]"], ["phone", "5550104"], ["address", nil], ["created_at", "2025-09-15 23:43:50.872707"], ["updated_at", "2025-09-15 23:43:50.872707"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Load (1.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (7.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Eva"], ["last_name", "Davis"], ["email", "[FILTERED]"], ["phone", "5550105"], ["address", nil], ["created_at", "2025-09-15 23:43:50.895766"], ["updated_at", "2025-09-15 23:43:50.895766"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "VSC001"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "VSC001"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "VSC001"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Vanilla Scented Candle"], ["description", "Hand-poured vanilla scented candle with natural soy wax"], ["price", 24.99], ["sku", "VSC001"], ["category", "Scented Candles"], ["stock_quantity", 50], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.674739"], ["updated_at", "2025-09-15 23:44:59.674739"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "LPC002"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "LPC002"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Lavender Pillar Candle"], ["description", "Relaxing lavender pillar candle perfect for meditation"], ["price", 32.99], ["sku", "LPC002"], ["category", "Pillar Candles"], ["stock_quantity", 30], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.690702"], ["updated_at", "2025-09-15 23:44:59.690702"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "CTS003"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "CTS003"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Citrus Tea Light Set"], ["description", "Set of 6 citrus scented tea light candles"], ["price", 18.99], ["sku", "CTS003"], ["category", "Tea Lights"], ["stock_quantity", 75], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.707247"], ["updated_at", "2025-09-15 23:44:59.707247"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "RGJ004"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "RGJ004"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Rose Garden Jar Candle"], ["description", "Elegant rose scented candle in decorative glass jar"], ["price", 39.99], ["sku", "RGJ004"], ["category", "Jar Candles"], ["stock_quantity", 25], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.722772"], ["updated_at", "2025-09-15 23:44:59.722772"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "EVC005"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "EVC005"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Eucalyptus Votive Candles"], ["description", "Set of 4 eucalyptus scented votive candles"], ["price", 22.99], ["sku", "EVC005"], ["category", "Votive Candles"], ["stock_quantity", 40], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.738116"], ["updated_at", "2025-09-15 23:44:59.738116"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."sku" = ? LIMIT ?[0m  [["sku", "SPS006"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "SPS006"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Seasonal Pumpkin Spice"], ["description", "Limited edition pumpkin spice candle for fall season"], ["price", 28.99], ["sku", "SPS006"], ["category", "Seasonal"], ["stock_quantity", 20], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-15 23:44:59.754960"], ["updated_at", "2025-09-15 23:44:59.754960"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Load (0.2ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."name" = ? LIMIT ?[0m  [["name", "New Customer Discount"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.4ms)[0m  [1m[32mINSERT INTO "discounts" ("name", "description", "discount_type", "discount_value", "minimum_amount", "active", "starts_at", "ends_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "New Customer Discount"], ["description", "10% off for new customers"], ["discount_type", "percentage"], ["discount_value", 10.0], ["minimum_amount", 20.0], ["active", 1], ["starts_at", "2025-09-15 23:44:59.761171"], ["ends_at", "2025-12-15 23:44:59.761193"], ["created_at", "2025-09-15 23:44:59.788958"], ["updated_at", "2025-09-15 23:44:59.788958"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."name" = ? LIMIT ?[0m  [["name", "Bulk Purchase Discount"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (3.2ms)[0m  [1m[32mINSERT INTO "discounts" ("name", "description", "discount_type", "discount_value", "minimum_amount", "active", "starts_at", "ends_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Bulk Purchase Discount"], ["description", "$5 off orders over $50"], ["discount_type", "fixed_amount"], ["discount_value", 5.0], ["minimum_amount", 50.0], ["active", 1], ["starts_at", "2025-09-15 23:44:59.762248"], ["ends_at", "2026-03-15 23:44:59.762261"], ["created_at", "2025-09-15 23:44:59.799377"], ["updated_at", "2025-09-15 23:44:59.799377"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."name" = ? LIMIT ?[0m  [["name", "Holiday Special"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (3.2ms)[0m  [1m[32mINSERT INTO "discounts" ("name", "description", "discount_type", "discount_value", "minimum_amount", "active", "starts_at", "ends_at", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Holiday Special"], ["description", "15% off all items during holiday season"], ["discount_type", "percentage"], ["discount_value", 15.0], ["minimum_amount", 0.0], ["active", 0], ["starts_at", "2025-09-15 23:44:59.762302"], ["ends_at", "2025-10-15 23:44:59.762307"], ["created_at", "2025-09-15 23:44:59.811779"], ["updated_at", "2025-09-15 23:44:59.811779"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mCustomer Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mDiscount Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts"[0m
  [1m[35m (11.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  ↳ lib/tasks/clean_data.rake:7:in 'block (2 levels) in <main>'
  [1m[36mSaleItem Delete All (0.4ms)[0m  [1m[31mDELETE FROM "sale_items"[0m
  ↳ lib/tasks/clean_data.rake:11:in 'block (2 levels) in <main>'
  [1m[36mSale Delete All (0.4ms)[0m  [1m[31mDELETE FROM "sales"[0m
  ↳ lib/tasks/clean_data.rake:14:in 'block (2 levels) in <main>'
  [1m[36mCustomer Delete All (0.1ms)[0m  [1m[31mDELETE FROM "customers"[0m
  ↳ lib/tasks/clean_data.rake:17:in 'block (2 levels) in <main>'
  [1m[36mProduct Delete All (0.1ms)[0m  [1m[31mDELETE FROM "products"[0m
  ↳ lib/tasks/clean_data.rake:20:in 'block (2 levels) in <main>'
  [1m[36mDiscount Delete All (0.1ms)[0m  [1m[31mDELETE FROM "discounts"[0m
  ↳ lib/tasks/clean_data.rake:23:in 'block (2 levels) in <main>'
  [1m[36mUser Delete All (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  ↳ lib/tasks/clean_data.rake:26:in 'block (2 levels) in <main>'
  [1m[35m (0.3ms)[0m  [1m[31mDELETE FROM sqlite_sequence[0m
  ↳ lib/tasks/clean_data.rake:31:in 'block (2 levels) in <main>'
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = ON[0m
  ↳ lib/tasks/clean_data.rake:39:in 'block (2 levels) in <main>'
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  ↳ lib/tasks/clean_data.rake:43:in 'block (2 levels) in <main>'
  [1m[36mCustomer Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  ↳ lib/tasks/clean_data.rake:44:in 'block (2 levels) in <main>'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ lib/tasks/clean_data.rake:45:in 'block (2 levels) in <main>'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ lib/tasks/clean_data.rake:46:in 'block (2 levels) in <main>'
  [1m[36mSaleItem Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sale_items"[0m
  ↳ lib/tasks/clean_data.rake:47:in 'block (2 levels) in <main>'
  [1m[36mDiscount Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts"[0m
  ↳ lib/tasks/clean_data.rake:48:in 'block (2 levels) in <main>'
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCustomer Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  [1m[36mDiscount Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts"[0m
  [1m[36mSaleItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sale_items"[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT ?[0m  [["LIMIT", 1]]
  ↳ lib/tasks/create_admin.rake:8:in 'block (2 levels) in <main>'
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" LIMIT ?[0m  [["LIMIT", 1]]
  ↳ lib/tasks/create_simple_admin.rake:8:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ lib/tasks/create_simple_admin.rake:33:in 'block (2 levels) in <main>'
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ lib/tasks/create_simple_admin.rake:33:in 'block (2 levels) in <main>'
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "role", "password_digest", "two_factor_secret", "two_factor_enabled", "phone", "last_sign_in_at", "current_sign_in_at", "sign_in_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["first_name", "Admin"], ["last_name", "User"], ["role", "admin"], ["password_digest", "[FILTERED]"], ["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["phone", nil], ["last_sign_in_at", nil], ["current_sign_in_at", nil], ["sign_in_count", 0], ["created_at", "2025-09-16 01:36:22.119522"], ["updated_at", "2025-09-16 01:36:22.119522"]]
  ↳ lib/tasks/create_simple_admin.rake:33:in 'block (2 levels) in <main>'
  [1m[36mTRANSACTION (79.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ lib/tasks/create_simple_admin.rake:33:in 'block (2 levels) in <main>'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCustomer Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  [1m[36mDiscount Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts"[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (7.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST001"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Candle"], ["description", nil], ["price", 10.99], ["sku", "TEST001"], ["category", "Test"], ["stock_quantity", 10], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 02:12:29.309074"], ["updated_at", "2025-09-16 02:12:29.309074"]]
  [1m[36mTRANSACTION (74.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 19:12:51 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 19:12:51 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/sales_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 19:12:55 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 19:12:59 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 19:13:01 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 19:13:01 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/sales_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 19:13:24 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 19:13:27 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSaleItem Sum (1.0ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 1]]
  ↳ app/models/product.rb:95:in 'Product#total_sold'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 1]]
  ↳ app/models/product.rb:99:in 'Product#revenue_generated'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 19:14:45 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
  [1m[36mProduct Load (24.1ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSaleItem Load (1.0ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 19:16:00 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 19:16:00 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/sales_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateActiveStorageTables (20250916021603)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "key" varchar NOT NULL, "filename" varchar NOT NULL, "content_type" varchar, "metadata" text, "service_name" varchar NOT NULL, "byte_size" bigint NOT NULL, "checksum" varchar, "created_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "record_type" varchar NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "blob_id" bigint NOT NULL, "variation_digest" varchar NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250916021603') RETURNING "version"[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mProduct Delete All (4.0ms)[0m  [1m[31mDELETE FROM "products"[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:09:56 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:09:56 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/sales_controller.rb:1:in '<main>'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:10:03 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:10:03 -0700
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/sales_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :verify_authenticity_token has not been defined):
  
app/controllers/api/base_controller.rb:3:in '<class:BaseController>'
app/controllers/api/base_controller.rb:1:in '<main>'
app/controllers/api/v1/products_controller.rb:1:in '<main>'
  [1m[36mUser Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:19:03 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:19:03 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Completed 404 Not Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request!
callback on Api::V1::ProductsController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Processing by Api::V1::SalesController#show as HTML
  Parameters: {"id" => "stats"}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request!
callback on Api::V1::SalesController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:19:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request!
callback on Api::V1::ProductsController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:20:28 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:20:28 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 640ms (Views: 27.2ms | ActiveRecord: 5.4ms (1 query, 0 cached) | GC: 0.9ms)


  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TESTAPI001"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Candle API"], ["description", nil], ["price", 15.99], ["sku", "TESTAPI001"], ["category", "Test Category"], ["stock_quantity", 25], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 03:20:45.111997"], ["updated_at", "2025-09-16 03:20:45.111997"]]
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:23:16 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:23:16 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 72ms (Views: 2.1ms | ActiveRecord: 4.8ms (1 query, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mProduct Delete All (4.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "FINAL001"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Final Test Candle"], ["description", nil], ["price", 19.99], ["sku", "FINAL001"], ["category", "Test"], ["stock_quantity", 5], ["low_stock_threshold", 10], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 03:25:03.784023"], ["updated_at", "2025-09-16 03:25:03.784023"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mProduct Delete All (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:25:31 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:25:31 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 40ms (Views: 1.1ms | ActiveRecord: 3.2ms (1 query, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:26:04 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:26:04 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:26:25 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:26:25 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 373ms (Views: 18.6ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:26:41 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:26:41 -0700
  
AbstractController::ActionNotFound (The action 'show' could not be found for Api::V1::SalesController):
  
actionpack (7.2.2.2) lib/abstract_controller/base.rb:158:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC[0m
  ↳ app/controllers/api/v1/products_controller.rb:36:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:34:16 -0700
Processing by Api::V1::SalesController#stats as */*
  Parameters: {"sale" => {}}
Completed 404 Not Found in 0ms (ActiveRecord: 3.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request_optional
callback on Api::V1::SalesController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:34:20 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:34:20 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request_optional
callback on Api::V1::SalesController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 76ms (Views: 1.4ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-15 20:34:40 -0700
Processing by Api::V1::ProductsController#index as */*
  Parameters: {"product" => {}}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 9ms (Views: 1.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/customers" for 127.0.0.1 at 2025-09-15 20:35:14 -0700
Processing by Api::V1::CustomersController#index as */*
  Parameters: {"customer" => {}}
Completed 404 Not Found in 0ms (ActiveRecord: 0.3ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request_optional
callback on Api::V1::CustomersController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/sales" for 127.0.0.1 at 2025-09-15 20:35:41 -0700
Processing by Api::V1::SalesController#index as */*
  Parameters: {"sale" => {}}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The login action could not be found for the :authenticate_request_optional
callback on Api::V1::SalesController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:31:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:36:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 55ms (Views: 1.6ms | ActiveRecord: 3.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:36:26 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:36:26 -0700
Processing by Api::V1::SalesController#stats as HTML
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authenticate_request_optional rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:36:46 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:36:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authenticate_request_optional rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:36:51 -0700
Processing by Api::V1::SalesController#stats as */*
  Parameters: {"sale" => {}}
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.9ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 119ms (Views: 1.1ms | ActiveRecord: 2.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:37:04 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:37:04 -0700
Processing by Api::V1::SalesController#stats as HTML
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authenticate_request_optional rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 8ms (Views: 1.0ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-15 20:37:16 -0700
Processing by Api::V1::ProductsController#index as */*
  Parameters: {"product" => {}}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/customers" for 127.0.0.1 at 2025-09-15 20:37:49 -0700
Processing by Api::V1::CustomersController#index as */*
  Parameters: {"customer" => {}}
  [1m[36mCustomer Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  ↳ app/controllers/api/v1/customers_controller.rb:34:in 'Api::V1::CustomersController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" ORDER BY "customers"."first_name" ASC, "customers"."last_name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/customers_controller.rb:37:in 'Api::V1::CustomersController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 6ms (Views: 1.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales" for 127.0.0.1 at 2025-09-15 20:37:52 -0700
Processing by Api::V1::SalesController#index as */*
  Parameters: {"sale" => {}}
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 20:38:23 -0700
  
ActionController::RoutingError (uninitialized constant Api::Auth):

Causes:
ActionDispatch::MissingController (uninitialized constant Api::Auth)
NameError (uninitialized constant Api::Auth)
  
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 20:39:46 -0700
  
ActionController::RoutingError (uninitialized constant Api::Auth):

Causes:
ActionDispatch::MissingController (uninitialized constant Api::Auth)
NameError (uninitialized constant Api::Auth)
  
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 20:40:14 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 390ms (Views: 1.2ms | ActiveRecord: 4.4ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:40:36 -0700
Processing by Api::V1::SalesController#stats as */*
  Parameters: {"sale" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 25ms (Views: 1.0ms | ActiveRecord: 1.5ms (7 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 20:40:47 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Test Product", "description" => "Test Description", "price" => 10.99, "sku" => "TEST001", "category" => "test", "stock_quantity" => 100, "low_stock_threshold" => 10}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST001"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Product"], ["description", "Test Description"], ["price", 10.99], ["sku", "TEST001"], ["category", "test"], ["stock_quantity", 100], ["low_stock_threshold", 10], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 03:40:47.788913"], ["updated_at", "2025-09-16 03:40:47.788913"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (5.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 41ms (Views: 0.9ms | ActiveRecord: 9.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-15 20:40:58 -0700
Processing by Api::V1::CustomersController#create as */*
  Parameters: {"customer" => {"first_name" => "John", "last_name" => "Doe", "email" => "[FILTERED]", "phone" => "+1234567890", "address" => "123 Main St"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.0ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "John"], ["last_name", "Doe"], ["email", "[FILTERED]"], ["phone", "+1234567890"], ["address", "123 Main St"], ["created_at", "2025-09-16 03:40:59.194614"], ["updated_at", "2025-09-16 03:40:59.194614"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 26ms (Views: 1.0ms | ActiveRecord: 5.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-15 20:41:20 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"customer_id" => 1, "status" => "pending"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.25ms)
Completed 422 Unprocessable Content in 306ms (Views: 3.4ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-15 20:41:41 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"customer_id" => 1, "total_amount" => 0, "payment_method" => "cash", "status" => "pending"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 422 Unprocessable Content in 5ms (Views: 1.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-15 20:41:59 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"customer_id" => 1, "total_amount" => 10.99, "payment_method" => "cash", "status" => "pending"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSale Create (0.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 0.0], ["tax_amount", 0.0], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 1], ["created_at", "2025-09-16 03:42:00.369703"], ["updated_at", "2025-09-16 03:42:00.369703"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/sale.rb:155:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 272ms (Views: 1.1ms | ActiveRecord: 5.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/sales/1/complete" for 127.0.0.1 at 2025-09-15 20:42:11 -0700
Processing by Api::V1::SalesController#complete as */*
  Parameters: {"id" => "1", "sale" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:204:in 'Api::V1::SalesController#set_sale'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'pending?' for an instance of Sale):
  
app/models/sale.rb:83:in 'Sale#can_be_completed?'
app/models/sale.rb:91:in 'Sale#complete!'
app/controllers/api/v1/sales_controller.rb:127:in 'Api::V1::SalesController#complete'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:43:14 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:43:14 -0700
Processing by Api::V1::SalesController#stats as HTML
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authenticate_request_optional rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 20:49:35 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 257ms (Views: 1.0ms | ActiveRecord: 2.6ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 20:50:48 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 455ms (Views: 4.9ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:50:50 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:50:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 167ms (Views: 2.1ms | ActiveRecord: 1.1ms (2 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 197ms (Views: 1.0ms | ActiveRecord: 3.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:50:57 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 7ms (Views: 0.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/4" for 127.0.0.1 at 2025-09-15 20:51:01 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "4"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (2.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 4]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 260ms (Views: 0.9ms | ActiveRecord: 11.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:51:01 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:51:10 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:51:10 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 32ms (Views: 0.8ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:51:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 8ms (Views: 2.3ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 20:52:18 -0700
Processing by Api::V1::ProductsController#create as HTML
  Parameters: {"product" => {"name" => "Vela de olor lavanda", "description" => "vela prueba", "price" => 50.9, "sku" => "THF10", "category" => "Hogar", "stock_quantity" => 2, "low_stock_threshold" => 5, "image_url" => "", "active" => true}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "THF10"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Vela de olor lavanda"], ["description", "vela prueba"], ["price", 50.9], ["sku", "THF10"], ["category", "Hogar"], ["stock_quantity", 2], ["low_stock_threshold", 5], ["image_url", ""], ["active", 1], ["created_at", "2025-09-16 03:52:18.660350"], ["updated_at", "2025-09-16 03:52:18.660350"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 20ms (Views: 0.9ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:52:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:52:28 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:52:28 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 10ms (Views: 0.7ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:52:33 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:52:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:52:36 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 9ms (Views: 1.4ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:52:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&category=Hogar" for 127.0.0.1 at 2025-09-15 20:52:44 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "category" => "Hogar"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."category" = ? ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["category", "Hogar"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&category=Hogar&stock_status=low_stock" for 127.0.0.1 at 2025-09-15 20:52:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "category" => "Hogar", "stock_status" => "low_stock"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."category" = ? AND (stock_quantity <= low_stock_threshold AND stock_quantity > 0) ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["category", "Hogar"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&category=Hogar&stock_status=out_of_stock" for 127.0.0.1 at 2025-09-15 20:52:53 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "category" => "Hogar", "stock_status" => "out_of_stock"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."category" = ? AND "products"."stock_quantity" = ? ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["category", "Hogar"], ["stock_quantity", 0], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 6ms (Views: 1.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&stock_status=out_of_stock" for 127.0.0.1 at 2025-09-15 20:52:57 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "stock_status" => "out_of_stock"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."stock_quantity" = ? ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["stock_quantity", 0], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 6ms (Views: 1.1ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&stock_status=in_stock" for 127.0.0.1 at 2025-09-15 20:53:00 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "stock_status" => "in_stock"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (stock_quantity > 0) ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 9ms (Views: 0.8ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:54:42 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:54:42 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 7ms (Views: 0.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 39ms (Views: 0.8ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:54:47 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:55:26 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:55:26 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 30ms (Views: 0.9ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:55:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 20:55:32 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 20:55:32 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 35ms (Views: 2.2ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 11ms (Views: 1.2ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 20:55:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:02:06 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 60ms (Views: 1.2ms | ActiveRecord: 3.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:02:24 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Test Product File", "description" => "Test with file", "price" => "15.99", "sku" => "TEST002", "category" => "test", "stock_quantity" => "50", "low_stock_threshold" => "5"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST002"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Product File"], ["description", "Test with file"], ["price", 15.99], ["sku", "TEST002"], ["category", "test"], ["stock_quantity", 50], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 04:02:25.256196"], ["updated_at", "2025-09-16 04:02:25.256196"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 19ms (Views: 0.6ms | ActiveRecord: 6.8ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:05:37 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Test Product With Image", "description" => "Test with actual image file", "price" => "25.99", "sku" => "TEST003", "category" => "test", "stock_quantity" => "30", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x000001c0834dfb58 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-37624-5cgoy.png>, @content_type="image/png", @original_filename="test.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"test.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST003"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Test Product With Image"], ["description", "Test with actual image file"], ["price", 25.99], ["sku", "TEST003"], ["category", "test"], ["stock_quantity", 30], ["low_stock_threshold", 5], ["image_url", nil], ["active", 1], ["created_at", "2025-09-16 04:05:37.787672"], ["updated_at", "2025-09-16 04:05:37.787672"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "7xf76oqx7ccyo9z6ee0bf7obadrk"], ["filename", "test.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 70], ["checksum", "+cojW16If9K7mdKqqv6A9A=="], ["created_at", "2025-09-16 04:05:37.978331"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 7], ["blob_id", 1], ["created_at", "2025-09-16 04:05:37.984251"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:05:37.990716"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (3.1ms) [0m[32mUploaded file to key: 7xf76oqx7ccyo9z6ee0bf7obadrk (checksum: +cojW16If9K7mdKqqv6A9A==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7c73efc6-6e5e-4e0b-a251-f30b3d161aa6) to Async(default) with arguments: #<GlobalID:0x000001c084372be8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 814ms (Views: 0.9ms | ActiveRecord: 7.0ms (7 queries, 0 cached) | GC: 0.2ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6] Performing ActiveStorage::AnalyzeJob (Job ID: 7c73efc6-6e5e-4e0b-a251-f30b3d161aa6) from Async(default) enqueued at 2025-09-16T04:05:38.386237200Z with arguments: #<GlobalID:0x000001c08568e420 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mActiveStorage::Blob Update (3.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:05:40.257349"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7c73efc6-6e5e-4e0b-a251-f30b3d161aa6] Performed ActiveStorage::AnalyzeJob (Job ID: 7c73efc6-6e5e-4e0b-a251-f30b3d161aa6) from Async(default) in 1646.88ms
Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:06:31 -0700
Processing by Api::V1::ProductsController#index as */*
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:07:47 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:07:47 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 189ms (Views: 7.1ms | ActiveRecord: 8.5ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 225ms (Views: 0.8ms | ActiveRecord: 2.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 21:08:00 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 347ms (Views: 1.2ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:08:01 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:08:01 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 37ms (Views: 1.2ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 28ms (Views: 1.1ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:08:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 28ms (Views: 1.2ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/5" for 127.0.0.1 at 2025-09-15 21:08:14 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "5"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 5]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 35ms (Views: 0.9ms | ActiveRecord: 9.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:08:14 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 0.9ms (5 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/6" for 127.0.0.1 at 2025-09-15 21:08:17 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "6"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (4.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 6]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 6]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 24ms (Views: 0.9ms | ActiveRecord: 5.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:08:17 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/7" for 127.0.0.1 at 2025-09-15 21:08:30 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Test Product With Image", "description" => "Test with actual image file", "price" => "25.99", "sku" => "TEST003", "category" => "test", "stock_quantity" => "30", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x000001b9f7e25e20 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-992-stnfel.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "7"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST003"], ["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "image_url" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["image_url", ""], ["updated_at", "2025-09-16 04:08:31.028085"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "bv7e6rbird5sbswirxjux73z3rqh"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:08:31.063252"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 7], ["blob_id", 2], ["created_at", "2025-09-16 04:08:31.071223"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:08:31.077762"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (24.5ms) [0m[32mUploaded file to key: bv7e6rbird5sbswirxjux73z3rqh (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: fcfcf86c-7f1e-4b94-8c45-3bfb302129cb) to Async(default) with arguments: #<GlobalID:0x000001b9fbb85428 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2034cdc3-7ae9-4f81-bece-ec53932c762a) to Async(default) with arguments: #<GlobalID:0x000001b9fbafb7a0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 212ms (Views: 1.2ms | ActiveRecord: 7.4ms (10 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:08:31 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb] Performing ActiveStorage::PurgeJob (Job ID: fcfcf86c-7f1e-4b94-8c45-3bfb302129cb) from Async(default) enqueued at 2025-09-16T04:08:31.187442100Z with arguments: #<GlobalID:0x000001b9fc01b488 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a] Performing ActiveStorage::AnalyzeJob (Job ID: 2034cdc3-7ae9-4f81-bece-ec53932c762a) from Async(default) enqueued at 2025-09-16T04:08:31.193015600Z with arguments: #<GlobalID:0x000001b9fd14bc58 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 28ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mActiveStorage::Attachment Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb] [36m  Disk Storage (0.8ms) [0m[31mDeleted file from key: 7xf76oqx7ccyo9z6ee0bf7obadrk[0m
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb] [36m  Disk Storage (1.2ms) [0m[31mDeleted files by key prefix: variants/7xf76oqx7ccyo9z6ee0bf7obadrk/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [fcfcf86c-7f1e-4b94-8c45-3bfb302129cb] Performed ActiveStorage::PurgeJob (Job ID: fcfcf86c-7f1e-4b94-8c45-3bfb302129cb) from Async(default) in 1449.17ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mActiveStorage::Blob Update (4.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:08:33.225081"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2034cdc3-7ae9-4f81-bece-ec53932c762a] Performed ActiveStorage::AnalyzeJob (Job ID: 2034cdc3-7ae9-4f81-bece-ec53932c762a) from Async(default) in 1518.73ms
Started PUT "/api/v1/products/7" for 127.0.0.1 at 2025-09-15 21:08:57 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Test Product With Image", "description" => "Test with actual image file", "price" => "25.99", "sku" => "TEST003", "category" => "test", "stock_quantity" => "30", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x000001b981ea9200 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-992-qiwkwm.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "7"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST003"], ["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "hjkaht8oqooxyop4d5nog9buhmge"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:08:58.024523"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 7], ["blob_id", 3], ["created_at", "2025-09-16 04:08:58.030171"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:08:58.038773"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (28.4ms) [0m[32mUploaded file to key: hjkaht8oqooxyop4d5nog9buhmge (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 65e5f9fd-aafb-400b-9222-445447845029) to Async(default) with arguments: #<GlobalID:0x000001b982021a10 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1a1b5c9d-e4ff-497e-9815-02c7561123b5) to Async(default) with arguments: #<GlobalID:0x000001b98207d720 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 112ms (Views: 1.1ms | ActiveRecord: 6.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:08:58 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029] Performing ActiveStorage::PurgeJob (Job ID: 65e5f9fd-aafb-400b-9222-445447845029) from Async(default) enqueued at 2025-09-16T04:08:58.080058000Z with arguments: #<GlobalID:0x000001b982070430 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mActiveStorage::Attachment Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 2], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 2]]
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mActiveStorage::Blob Load (17.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5] Performing ActiveStorage::AnalyzeJob (Job ID: 1a1b5c9d-e4ff-497e-9815-02c7561123b5) from Async(default) enqueued at 2025-09-16T04:08:58.082910100Z with arguments: #<GlobalID:0x000001b9822053e0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mActiveStorage::Blob Update (6.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:08:58.697933"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1a1b5c9d-e4ff-497e-9815-02c7561123b5] Performed ActiveStorage::AnalyzeJob (Job ID: 1a1b5c9d-e4ff-497e-9815-02c7561123b5) from Async(default) in 108.66ms
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029] [36m  Disk Storage (5.8ms) [0m[31mDeleted file from key: bv7e6rbird5sbswirxjux73z3rqh[0m
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029] [36m  Disk Storage (1.9ms) [0m[31mDeleted files by key prefix: variants/bv7e6rbird5sbswirxjux73z3rqh/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [65e5f9fd-aafb-400b-9222-445447845029] Performed ActiveStorage::PurgeJob (Job ID: 65e5f9fd-aafb-400b-9222-445447845029) from Async(default) in 121.71ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 22ms (Views: 1.3ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:09:21 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:09:21 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 37ms (Views: 0.9ms | ActiveRecord: 2.1ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 1.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:09:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:09:28 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:09:28 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 37ms (Views: 0.7ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 22ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:09:30 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:14:17 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:14:17 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 14ms (Views: 1.2ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:18:49 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:18:49 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 76ms (Views: 1.4ms | ActiveRecord: 5.0ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 80ms (Views: 0.9ms | ActiveRecord: 3.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:19:15 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:19:15 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.4ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 175ms (Views: 12.3ms | ActiveRecord: 9.2ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 198ms (Views: 1.1ms | ActiveRecord: 2.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:19:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 16ms (Views: 1.2ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/7" for 127.0.0.1 at 2025-09-15 21:19:34 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Test Product With Image", "description" => "Test with actual image file", "price" => "25.99", "sku" => "TEST003", "category" => "test", "stock_quantity" => "30", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000029f0cf36878 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-40540-vzw5no.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "7"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST003"], ["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 3]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "11kzfo9xvvg8gy2twuvttjwjxcha"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:19:34.769699"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 7], ["blob_id", 4], ["created_at", "2025-09-16 04:19:34.777318"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:19:34.784425"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (29.3ms) [0m[32mUploaded file to key: 11kzfo9xvvg8gy2twuvttjwjxcha (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 2b2abfe9-f687-4c36-b2d0-4c5fa0734f18) to Async(default) with arguments: #<GlobalID:0x0000029f08ad4540 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41) to Async(default) with arguments: #<GlobalID:0x0000029f09e09368 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 234ms (Views: 1.6ms | ActiveRecord: 11.5ms (9 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:19:34 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18] Performing ActiveStorage::PurgeJob (Job ID: 2b2abfe9-f687-4c36-b2d0-4c5fa0734f18) from Async(default) enqueued at 2025-09-16T04:19:34.920638100Z with arguments: #<GlobalID:0x0000029f0a54bf18 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41] Performing ActiveStorage::AnalyzeJob (Job ID: cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41) from Async(default) enqueued at 2025-09-16T04:19:34.928463800Z with arguments: #<GlobalID:0x0000029f0a4cdac8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 22ms (Views: 3.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mActiveStorage::Attachment Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 3]]
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 3], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 3]]
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18] [36m  Disk Storage (1.9ms) [0m[31mDeleted file from key: hjkaht8oqooxyop4d5nog9buhmge[0m
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18] [36m  Disk Storage (1.3ms) [0m[31mDeleted files by key prefix: variants/hjkaht8oqooxyop4d5nog9buhmge/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [2b2abfe9-f687-4c36-b2d0-4c5fa0734f18] Performed ActiveStorage::PurgeJob (Job ID: 2b2abfe9-f687-4c36-b2d0-4c5fa0734f18) from Async(default) in 1312.38ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mActiveStorage::Blob Update (4.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 4]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:19:36.834180"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41] Performed ActiveStorage::AnalyzeJob (Job ID: cf5c9c99-b6e7-4d8c-b935-abd1eac4cf41) from Async(default) in 1382.75ms
Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:20:51 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST003", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000029f0b190738 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-40540-4w46iu.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST003"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 422 Unprocessable Content in 36ms (Views: 1.6ms | ActiveRecord: 5.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:20:53 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST003", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000029f0b19c998 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-40540-ryk3tg.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST003"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.6ms)
Completed 422 Unprocessable Content in 37ms (Views: 1.7ms | ActiveRecord: 4.0ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (5.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:24:13 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "image_url" => "", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000029f0d7bad78 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-40540-s6ufak.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST004"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "image_url", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", "prueba "], ["price", 106.53], ["sku", "TEST004"], ["category", "test"], ["stock_quantity", 10], ["low_stock_threshold", 5], ["image_url", ""], ["active", 1], ["created_at", "2025-09-16 04:24:14.183438"], ["updated_at", "2025-09-16 04:24:14.183438"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "6jjfl6xgu14fr3iq2ma3ouy4n1w6"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:24:14.203769"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 5], ["created_at", "2025-09-16 04:24:14.211143"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:24:14.220492"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (26.9ms) [0m[32mUploaded file to key: 6jjfl6xgu14fr3iq2ma3ouy4n1w6 (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 99339ebe-f814-4d80-97ee-50935d1f53fa) to Async(default) with arguments: #<GlobalID:0x0000029f0f56cfb0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 116ms (Views: 0.9ms | ActiveRecord: 7.7ms (7 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa] Performing ActiveStorage::AnalyzeJob (Job ID: 99339ebe-f814-4d80-97ee-50935d1f53fa) from Async(default) enqueued at 2025-09-16T04:24:14.258305000Z with arguments: #<GlobalID:0x0000029f10e0e078 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:24:14 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mActiveStorage::Blob Update (44.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:24:15.061621"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [99339ebe-f814-4d80-97ee-50935d1f53fa] Performed ActiveStorage::AnalyzeJob (Job ID: 99339ebe-f814-4d80-97ee-50935d1f53fa) from Async(default) in 531.01ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 33ms (Views: 1.2ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (5.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:26:13 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:26:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (1.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 27ms (Views: 0.9ms | ActiveRecord: 2.4ms (6 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 33ms (Views: 0.8ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:26:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:27:17 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:27:17 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 36ms (Views: 1.0ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 29ms (Views: 1.0ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:27:34 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 21:37:21 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 475ms (Views: 5.1ms | ActiveRecord: 7.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:37:22 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:37:22 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 140ms (Views: 1.7ms | ActiveRecord: 4.9ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 229ms (Views: 1.1ms | ActiveRecord: 3.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:37:25 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 26ms (Views: 1.0ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&category=test" for 127.0.0.1 at 2025-09-15 21:39:16 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "category" => "test"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."category" = ? ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["category", "test"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:96:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 30ms (Views: 1.3ms | ActiveRecord: 1.2ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RemoveImageUrlFromProducts (20250916043932)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aproducts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "description" text, "price" decimal(10,2) NOT NULL, "sku" varchar NOT NULL, "category" varchar NOT NULL, "stock_quantity" integer DEFAULT 0, "low_stock_threshold" integer DEFAULT 5, "image_url" varchar, "active" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "tindex_aproducts_on_active" ON "aproducts" ("active")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aproducts_on_category" ON "aproducts" ("category")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "tindex_aproducts_on_sku" ON "aproducts" ("sku")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "aproducts" ("id","name","description","price","sku","category","stock_quantity","low_stock_threshold","image_url","active","created_at","updated_at")
                     SELECT "id","name","description","price","sku","category","stock_quantity","low_stock_threshold","image_url","active","created_at","updated_at" FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "products"[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "description" text, "price" decimal(10,2) NOT NULL, "sku" varchar NOT NULL, "category" varchar NOT NULL, "stock_quantity" integer DEFAULT 0, "low_stock_threshold" integer DEFAULT 5, "active" boolean DEFAULT 1, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_sku" ON "products" ("sku")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_products_on_category" ON "products" ("category")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_products_on_active" ON "products" ("active")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "products" ("id","name","description","price","sku","category","stock_quantity","low_stock_threshold","active","created_at","updated_at")
                     SELECT "id","name","description","price","sku","category","stock_quantity","low_stock_threshold","active","created_at","updated_at" FROM "aproducts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "aproducts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250916043932') RETURNING "version"[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:39:54 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:39:54 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 159ms (Views: 1.7ms | ActiveRecord: 7.6ms (6 queries, 0 cached) | GC: 0.2ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 100ms (Views: 1.5ms | ActiveRecord: 5.1ms (9 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:44:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 105ms (Views: 1.4ms | ActiveRecord: 6.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-15 21:44:28 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true"}, "id" => "8"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (5.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 30ms (Views: 1.1ms | ActiveRecord: 5.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:44:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 27ms (Views: 1.0ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-15 21:44:42 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028004c74260 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-cyq9fn.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "8"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 5]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "78folk3jtc65cl90k8uja4dbom8g"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:44:42.504121"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 6], ["created_at", "2025-09-16 04:44:42.510882"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:44:42.518706"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (28.5ms) [0m[32mUploaded file to key: 78folk3jtc65cl90k8uja4dbom8g (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 58e04d4c-7a8d-476c-8f41-3eed3440ff0f) to Async(default) with arguments: #<GlobalID:0x000002800391c410 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 31680575-2f61-4ea1-8eb0-022f922a446c) to Async(default) with arguments: #<GlobalID:0x000002800381e1d0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 187ms (Views: 1.2ms | ActiveRecord: 10.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:44:42 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f] Performing ActiveStorage::PurgeJob (Job ID: 58e04d4c-7a8d-476c-8f41-3eed3440ff0f) from Async(default) enqueued at 2025-09-16T04:44:42.608136500Z with arguments: #<GlobalID:0x0000028001a4b590 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mActiveStorage::Blob Load (15.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c] Performing ActiveStorage::AnalyzeJob (Job ID: 31680575-2f61-4ea1-8eb0-022f922a446c) from Async(default) enqueued at 2025-09-16T04:44:42.614548200Z with arguments: #<GlobalID:0x000002800109f3c0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 30ms (Views: 1.0ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mActiveStorage::Attachment Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 5]]
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 5], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 5]]
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f] [36m  Disk Storage (1.6ms) [0m[31mDeleted file from key: 6jjfl6xgu14fr3iq2ma3ouy4n1w6[0m
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f] [36m  Disk Storage (1.4ms) [0m[31mDeleted files by key prefix: variants/6jjfl6xgu14fr3iq2ma3ouy4n1w6/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [58e04d4c-7a8d-476c-8f41-3eed3440ff0f] Performed ActiveStorage::PurgeJob (Job ID: 58e04d4c-7a8d-476c-8f41-3eed3440ff0f) from Async(default) in 1554.99ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mActiveStorage::Blob Update (5.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:44:44.696840"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c]   [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [31680575-2f61-4ea1-8eb0-022f922a446c] Performed ActiveStorage::AnalyzeJob (Job ID: 31680575-2f61-4ea1-8eb0-022f922a446c) from Async(default) in 1644.4ms
Started PUT "/api/v1/products/7" for 127.0.0.1 at 2025-09-15 21:44:56 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Test Product With Image", "description" => "Test with actual image file", "price" => "25.99", "sku" => "TEST003", "category" => "test", "stock_quantity" => "30", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028004dfded8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-abug88.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "7"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST003"], ["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 4]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "ohohhvszijs3mp4wb2wdkypaw8l7"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:44:57.089614"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 7], ["blob_id", 7], ["created_at", "2025-09-16 04:44:57.100247"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:44:57.108823"], ["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (26.5ms) [0m[32mUploaded file to key: ohohhvszijs3mp4wb2wdkypaw8l7 (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 47a77ec9-9e74-4a9b-980b-566d417ad29e) to Async(default) with arguments: #<GlobalID:0x0000028009082128 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b8c42e97-86c6-46da-99bc-402d6c6925a8) to Async(default) with arguments: #<GlobalID:0x00000280090670d0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 127ms (Views: 1.0ms | ActiveRecord: 6.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:44:57 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8] Performing ActiveStorage::AnalyzeJob (Job ID: b8c42e97-86c6-46da-99bc-402d6c6925a8) from Async(default) enqueued at 2025-09-16T04:44:57.152030300Z with arguments: #<GlobalID:0x0000028009145a88 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e] Performing ActiveStorage::PurgeJob (Job ID: 47a77ec9-9e74-4a9b-980b-566d417ad29e) from Async(default) enqueued at 2025-09-16T04:44:57.149936300Z with arguments: #<GlobalID:0x000002800910d7c8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mActiveStorage::Attachment Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 4]]
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 4], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 4]]
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e] [36m  Disk Storage (0.7ms) [0m[31mDeleted file from key: 11kzfo9xvvg8gy2twuvttjwjxcha[0m
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e] [36m  Disk Storage (1.8ms) [0m[31mDeleted files by key prefix: variants/11kzfo9xvvg8gy2twuvttjwjxcha/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [47a77ec9-9e74-4a9b-980b-566d417ad29e] Performed ActiveStorage::PurgeJob (Job ID: 47a77ec9-9e74-4a9b-980b-566d417ad29e) from Async(default) in 44.98ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 25ms (Views: 1.0ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mActiveStorage::Blob Update (5.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:44:58.072454"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b8c42e97-86c6-46da-99bc-402d6c6925a8] Performed ActiveStorage::AnalyzeJob (Job ID: b8c42e97-86c6-46da-99bc-402d6c6925a8) from Async(default) in 496.55ms
Started DELETE "/api/v1/products/7" for 127.0.0.1 at 2025-09-15 21:45:02 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "7"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 7]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d) to Async(default) with arguments: #<GlobalID:0x000002800964d490 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 42ms (Views: 1.3ms | ActiveRecord: 5.1ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:45:03 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d] Performing ActiveStorage::PurgeJob (Job ID: 6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d) from Async(default) enqueued at 2025-09-16T04:45:02.997417600Z with arguments: #<GlobalID:0x0000028009641a78 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mActiveStorage::Attachment Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 7]]
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 7], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 7]]
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d] [36m  Disk Storage (3.0ms) [0m[31mDeleted file from key: ohohhvszijs3mp4wb2wdkypaw8l7[0m
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d] [36m  Disk Storage (1.5ms) [0m[31mDeleted files by key prefix: variants/ohohhvszijs3mp4wb2wdkypaw8l7/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d] Performed ActiveStorage::PurgeJob (Job ID: 6c4c5ea2-7d8d-49d5-9cf9-456c93870e2d) from Async(default) in 49.07ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-15 21:45:22 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028009970a50 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-5yryyb.jpg>, @content_type="image/jpeg", @original_filename="20240117_170814.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240117_170814.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "id" => "8"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 6]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "92923r8a5kn4sj0i7b0fybej7ish"], ["filename", "20240117_170814.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 2797034], ["checksum", "FsefH3JCpQlgQiBRpxPQEQ=="], ["created_at", "2025-09-16 04:45:22.994182"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.6ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 8], ["created_at", "2025-09-16 04:45:23.005698"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:45:23.012831"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (34.4ms) [0m[32mUploaded file to key: 92923r8a5kn4sj0i7b0fybej7ish (checksum: FsefH3JCpQlgQiBRpxPQEQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 1fe700c3-4c78-4513-af2a-9321fc899899) to Async(default) with arguments: #<GlobalID:0x000002800b037400 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 12be85da-8e04-4d73-bce5-8a95637813c9) to Async(default) with arguments: #<GlobalID:0x000002800b033148 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 138ms (Views: 1.0ms | ActiveRecord: 6.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:45:23 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9] Performing ActiveStorage::AnalyzeJob (Job ID: 12be85da-8e04-4d73-bce5-8a95637813c9) from Async(default) enqueued at 2025-09-16T04:45:23.063124900Z with arguments: #<GlobalID:0x000002800b1965f8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mActiveStorage::Blob Update (5.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:45:23.501346"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [12be85da-8e04-4d73-bce5-8a95637813c9] Performed ActiveStorage::AnalyzeJob (Job ID: 12be85da-8e04-4d73-bce5-8a95637813c9) from Async(default) in 41.64ms
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899] Performing ActiveStorage::PurgeJob (Job ID: 1fe700c3-4c78-4513-af2a-9321fc899899) from Async(default) enqueued at 2025-09-16T04:45:23.060430300Z with arguments: #<GlobalID:0x000002800b4967f8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mActiveStorage::Attachment Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 6]]
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 6], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 6]]
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899] [36m  Disk Storage (1.0ms) [0m[31mDeleted file from key: 78folk3jtc65cl90k8uja4dbom8g[0m
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899] [36m  Disk Storage (1.4ms) [0m[31mDeleted files by key prefix: variants/78folk3jtc65cl90k8uja4dbom8g/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [1fe700c3-4c78-4513-af2a-9321fc899899] Performed ActiveStorage::PurgeJob (Job ID: 1fe700c3-4c78-4513-af2a-9321fc899899) from Async(default) in 37.32ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:45:27 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:45:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 82ms (Views: 1.3ms | ActiveRecord: 4.6ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:45:31 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 15ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-15 21:45:51 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "false", "image" => #<ActionDispatch::Http::UploadedFile:0x00000280038a7e58 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-f1nmpy.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "8"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "active" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["active", 0], ["updated_at", "2025-09-16 04:45:51.870466"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "stw1q2soomhws2bhdasxgwswczjf"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:45:51.894848"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 9], ["created_at", "2025-09-16 04:45:51.901545"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:45:51.910354"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (27.3ms) [0m[32mUploaded file to key: stw1q2soomhws2bhdasxgwswczjf (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 140550d7-46b5-4fdf-8216-d6561b7e6d45) to Async(default) with arguments: #<GlobalID:0x0000028009062328 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c488a1fc-111b-4519-864a-ab64253f41c6) to Async(default) with arguments: #<GlobalID:0x000002800914c5e0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 125ms (Views: 0.9ms | ActiveRecord: 6.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:45:52 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6] Performing ActiveStorage::AnalyzeJob (Job ID: c488a1fc-111b-4519-864a-ab64253f41c6) from Async(default) enqueued at 2025-09-16T04:45:51.954295900Z with arguments: #<GlobalID:0x00000280094af228 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mActiveStorage::Blob Update (5.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:45:52.390737"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c488a1fc-111b-4519-864a-ab64253f41c6] Performed ActiveStorage::AnalyzeJob (Job ID: c488a1fc-111b-4519-864a-ab64253f41c6) from Async(default) in 43.67ms
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45] Performing ActiveStorage::PurgeJob (Job ID: 140550d7-46b5-4fdf-8216-d6561b7e6d45) from Async(default) enqueued at 2025-09-16T04:45:51.951629600Z with arguments: #<GlobalID:0x000002800958eef0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mActiveStorage::Attachment Exists? (7.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 8]]
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45] [36m  Disk Storage (1.2ms) [0m[31mDeleted file from key: 92923r8a5kn4sj0i7b0fybej7ish[0m
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45] [36m  Disk Storage (1.3ms) [0m[31mDeleted files by key prefix: variants/92923r8a5kn4sj0i7b0fybej7ish/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [140550d7-46b5-4fdf-8216-d6561b7e6d45] Performed ActiveStorage::PurgeJob (Job ID: 140550d7-46b5-4fdf-8216-d6561b7e6d45) from Async(default) in 58.39ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:46:51 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:46:51 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 19ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 1.8ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:48:58 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:48:58 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 1.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:49:02 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:49:02 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 32ms (Views: 1.0ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:49:04 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:49:38 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto", "description" => "Producto", "price" => "100", "sku" => "THF10", "category" => "Hogar", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028009460dd0 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-aa80gz.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "THF10"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto"], ["description", "Producto"], ["price", 100.0], ["sku", "THF10"], ["category", "Hogar"], ["stock_quantity", 10], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 04:49:38.527626"], ["updated_at", "2025-09-16 04:49:38.527626"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "a3ox31ekmux5deboenk40ppym2e6"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:49:38.546233"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 9], ["blob_id", 10], ["created_at", "2025-09-16 04:49:38.554560"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:49:38.564517"], ["id", 9]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (29.3ms) [0m[32mUploaded file to key: a3ox31ekmux5deboenk40ppym2e6 (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 87bddac4-513d-4962-a0cc-2e50ff219913) to Async(default) with arguments: #<GlobalID:0x0000028009209910 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 116ms (Views: 1.2ms | ActiveRecord: 6.4ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:49:38 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913] Performing ActiveStorage::AnalyzeJob (Job ID: 87bddac4-513d-4962-a0cc-2e50ff219913) from Async(default) enqueued at 2025-09-16T04:49:38.605657600Z with arguments: #<GlobalID:0x000002800910b388 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 30ms (Views: 1.5ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mActiveStorage::Blob Update (6.6ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:49:39.391704"], ["id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [87bddac4-513d-4962-a0cc-2e50ff219913] Performed ActiveStorage::AnalyzeJob (Job ID: 87bddac4-513d-4962-a0cc-2e50ff219913) from Async(default) in 366.89ms
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:52:01 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 17ms (Views: 0.7ms | ActiveRecord: 0.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:52:14 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-15 21:52:43 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto", "description" => "prueba 11", "price" => "20", "sku" => "THF11", "category" => "Hogar", "stock_quantity" => "1000", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x000002800cb7f000 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250915-32536-j2q1ir.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "THF11"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto"], ["description", "prueba 11"], ["price", 20.0], ["sku", "THF11"], ["category", "Hogar"], ["stock_quantity", 1000], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 04:52:43.829180"], ["updated_at", "2025-09-16 04:52:43.829180"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "otya80lloravb984vqgtk7ks9nn3"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 04:52:43.844151"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 10], ["blob_id", 11], ["created_at", "2025-09-16 04:52:43.851837"]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:52:43.859407"], ["id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (25.3ms) [0m[32mUploaded file to key: otya80lloravb984vqgtk7ks9nn3 (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6a37b433-67aa-49b5-80b6-bdb1971b5885) to Async(default) with arguments: #<GlobalID:0x000002800cde4548 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:65:in 'Api::V1::ProductsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 100ms (Views: 1.1ms | ActiveRecord: 7.0ms (7 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885] Performing ActiveStorage::AnalyzeJob (Job ID: 6a37b433-67aa-49b5-80b6-bdb1971b5885) from Async(default) enqueued at 2025-09-16T04:52:43.894918600Z with arguments: #<GlobalID:0x000002800d959b30 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:52:44 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mActiveStorage::Blob Update (7.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 04:52:44.518853"], ["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6a37b433-67aa-49b5-80b6-bdb1971b5885] Performed ActiveStorage::AnalyzeJob (Job ID: 6a37b433-67aa-49b5-80b6-bdb1971b5885) from Async(default) in 374.63ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 34ms (Views: 1.4ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 21:58:49 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 21:58:50 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 39ms (Views: 1.2ms | ActiveRecord: 5.2ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 41ms (Views: 1.5ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 21:59:02 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 37ms (Views: 1.1ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-15 22:03:51 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 358ms (Views: 1.5ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 22:03:51 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 22:03:52 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 38ms (Views: 1.1ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 40ms (Views: 1.2ms | ActiveRecord: 1.3ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 22:03:55 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 38ms (Views: 1.0ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-15 22:05:52 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-15 22:05:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 23ms (Views: 0.6ms | ActiveRecord: 1.0ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 22:08:04 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 31ms (Views: 0.8ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/9" for 127.0.0.1 at 2025-09-15 22:08:14 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "9"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (3.8ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 9]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 9]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 4787f9d4-9687-4f6f-bd6b-f191a4a2ed92) to Async(default) with arguments: #<GlobalID:0x000002800f7b7730 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:85:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 31ms (Views: 0.7ms | ActiveRecord: 8.1ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92] Performing ActiveStorage::PurgeJob (Job ID: 4787f9d4-9687-4f6f-bd6b-f191a4a2ed92) from Async(default) enqueued at 2025-09-16T05:08:14.535931400Z with arguments: #<GlobalID:0x000002800f93de60 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mActiveStorage::Attachment Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 10]]
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 10]]
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92] [36m  Disk Storage (0.7ms) [0m[31mDeleted file from key: a3ox31ekmux5deboenk40ppym2e6[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92] [36m  Disk Storage (0.9ms) [0m[31mDeleted files by key prefix: variants/a3ox31ekmux5deboenk40ppym2e6/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4787f9d4-9687-4f6f-bd6b-f191a4a2ed92] Performed ActiveStorage::PurgeJob (Job ID: 4787f9d4-9687-4f6f-bd6b-f191a4a2ed92) from Async(default) in 34.56ms
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-15 22:08:14 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 0.6ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:29:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (3.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Completed 500 Internal Server Error in 69ms (ActiveRecord: 3.6ms (3 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'default_url_options' for an instance of Rails::Application::Configuration):
  
app/models/product.rb:95:in 'Product#image_url'
app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:29:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'default_url_options' for an instance of Rails::Application::Configuration):
  
app/models/product.rb:95:in 'Product#image_url'
app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 01:29:43 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 01:29:43 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'default_url_options' for an instance of Rails::Application::Configuration):
  
app/models/product.rb:95:in 'Product#image_url'
app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 87ms (Views: 1.5ms | ActiveRecord: 2.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:30:09 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 10: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 86ms (Views: 1.2ms | ActiveRecord: 3.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-16 01:30:36 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "false", "image" => #<ActionDispatch::Http::UploadedFile:0x000002800ed489e8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-32536-dyrqv5.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "8"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (1.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 9]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "rs9g6f6llvng5nfh870aw3dpr0us"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 08:30:37.226379"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 12], ["created_at", "2025-09-16 08:30:37.232460"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 08:30:37.237590"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (23.7ms) [0m[32mUploaded file to key: rs9g6f6llvng5nfh870aw3dpr0us (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e) to Async(default) with arguments: #<GlobalID:0x000002800ee01f10 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d753efe6-7d31-40d2-b0c7-6f733cb0c114) to Async(default) with arguments: #<GlobalID:0x000002800eae8658 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 119ms (Views: 0.8ms | ActiveRecord: 10.6ms (9 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e] Performing ActiveStorage::PurgeJob (Job ID: 4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e) from Async(default) enqueued at 2025-09-16T08:30:37.280347900Z with arguments: #<GlobalID:0x000002800e82b9d8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mActiveStorage::Attachment Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mActiveStorage::Blob Load (38.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114] Performing ActiveStorage::AnalyzeJob (Job ID: d753efe6-7d31-40d2-b0c7-6f733cb0c114) from Async(default) enqueued at 2025-09-16T08:30:37.283996300Z with arguments: #<GlobalID:0x000002800e464228 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 9]]
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 9], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 9]]
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e] [36m  Disk Storage (0.6ms) [0m[31mDeleted file from key: stw1q2soomhws2bhdasxgwswczjf[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e] [36m  Disk Storage (1.0ms) [0m[31mDeleted files by key prefix: variants/stw1q2soomhws2bhdasxgwswczjf/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e] Performed ActiveStorage::PurgeJob (Job ID: 4427dc74-ce3d-419c-9d4a-7bbfb8e7ba3e) from Async(default) in 81.89ms
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mActiveStorage::Blob Update (3.3ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 08:30:37.634690"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d753efe6-7d31-40d2-b0c7-6f733cb0c114] Performed ActiveStorage::AnalyzeJob (Job ID: d753efe6-7d31-40d2-b0c7-6f733cb0c114) from Async(default) in 107.08ms
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:30:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 10: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started PUT "/api/v1/products/8" for 127.0.0.1 at 2025-09-16 01:30:59 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "prueba ", "price" => "106.53", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x000002800c02e1b0 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-32536-730jq0.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}, "id" => "8"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST004"], ["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "active" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["active", 1], ["updated_at", "2025-09-16 08:30:59.387200"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 12]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "7z451hp8e3v1xptxf6ll3cqmunwj"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 08:30:59.403539"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 8], ["blob_id", 13], ["created_at", "2025-09-16 08:30:59.408869"]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 08:30:59.414198"], ["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[36m  Disk Storage (21.7ms) [0m[32mUploaded file to key: 7z451hp8e3v1xptxf6ll3cqmunwj (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 9098929d-95cf-4ee5-a668-c4628ee6e509) to Async(default) with arguments: #<GlobalID:0x000002800bc64598 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 424ce551-76d6-411c-b72c-7aef6f7a6e4d) to Async(default) with arguments: #<GlobalID:0x000002800bc602b8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:75:in 'Api::V1::ProductsController#update'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 96ms (Views: 0.6ms | ActiveRecord: 4.6ms (10 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d] Performing ActiveStorage::AnalyzeJob (Job ID: 424ce551-76d6-411c-b72c-7aef6f7a6e4d) from Async(default) enqueued at 2025-09-16T08:30:59.449653000Z with arguments: #<GlobalID:0x000002800bb65c28 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509] Performing ActiveStorage::PurgeJob (Job ID: 9098929d-95cf-4ee5-a668-c4628ee6e509) from Async(default) enqueued at 2025-09-16T08:30:59.447706100Z with arguments: #<GlobalID:0x000002800b8beec0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mActiveStorage::Attachment Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 12]]
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 12]]
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509] [36m  Disk Storage (0.6ms) [0m[31mDeleted file from key: rs9g6f6llvng5nfh870aw3dpr0us[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509] [36m  Disk Storage (0.9ms) [0m[31mDeleted files by key prefix: variants/rs9g6f6llvng5nfh870aw3dpr0us/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9098929d-95cf-4ee5-a668-c4628ee6e509] Performed ActiveStorage::PurgeJob (Job ID: 9098929d-95cf-4ee5-a668-c4628ee6e509) from Async(default) in 30.66ms
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:30:59 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mActiveStorage::Blob Update (3.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 13]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 13]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 08:31:00.021585"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [424ce551-76d6-411c-b72c-7aef6f7a6e4d] Performed ActiveStorage::AnalyzeJob (Job ID: 424ce551-76d6-411c-b72c-7aef6f7a6e4d) from Async(default) in 313.13ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 10: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:31:42 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 10: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
Error generating image URL for product 8: undefined method 'default_url_options' for an instance of Rails::Application::Configuration
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:35:06 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 148ms (Views: 3.8ms | ActiveRecord: 6.6ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:35:09 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.28ms)
Completed 200 OK in 33ms (Views: 1.4ms | ActiveRecord: 1.2ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (19.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 01:43:37 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 172ms (Views: 3.2ms | ActiveRecord: 7.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 01:43:44 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 01:43:44 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 40ms (Views: 1.3ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 134ms (Views: 0.9ms | ActiveRecord: 5.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:15:02 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:15:02 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:15:02 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.5ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.43ms)
Completed 200 OK in 1692ms (Views: 71.1ms | ActiveRecord: 9.7ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 1834ms (Views: 1.0ms | ActiveRecord: 3.2ms (6 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 1828ms (Views: 1.1ms | ActiveRecord: 2.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:16:43 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:16:43 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 29ms (Views: 1.1ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:16:44 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 200 OK in 25ms (Views: 1.4ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:21:09 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:21:09 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 34ms (Views: 1.3ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:21:11 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 28ms (Views: 1.5ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:21:20 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 33ms (Views: 1.0ms | ActiveRecord: 1.2ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:21:23 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:21:23 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 35ms (Views: 0.7ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 26ms (Views: 1.1ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:22:04 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:97:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 26ms (Views: 0.9ms | ActiveRecord: 1.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:24:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 354ms (Views: 1.7ms | ActiveRecord: 7.0ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:24:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 29ms (Views: 1.5ms | ActiveRecord: 1.1ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:25:51 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 26ms (Views: 2.1ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/8" for 127.0.0.1 at 2025-09-16 07:25:54 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "8"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 8], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (1.8ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 13]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 8]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 45e8b737-feed-4ca9-a187-c4195837fd8d) to Async(default) with arguments: #<GlobalID:0x0000027d5b4e9370 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 808ms (Views: 0.7ms | ActiveRecord: 11.9ms (6 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:25:56 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d] Performing ActiveStorage::PurgeJob (Job ID: 45e8b737-feed-4ca9-a187-c4195837fd8d) from Async(default) enqueued at 2025-09-16T14:25:56.050523100Z with arguments: #<GlobalID:0x0000027d5b234b98 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/13>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 38ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/10" for 127.0.0.1 at 2025-09-16 07:25:58 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "10"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (3.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 10], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 11]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 10]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 78a7ef93-2351-4dde-8128-c544e2eb28d7) to Async(default) with arguments: #<GlobalID:0x0000027d5f2b4100 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:100:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 129ms (Views: 1.0ms | ActiveRecord: 4.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:26:01 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7] Performing ActiveStorage::PurgeJob (Job ID: 78a7ef93-2351-4dde-8128-c544e2eb28d7) from Async(default) enqueued at 2025-09-16T14:26:01.667521300Z with arguments: #<GlobalID:0x0000027d608ad998 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/11>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 7ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mActiveStorage::Attachment Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 13], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 13]]
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mActiveStorage::Blob Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 13]]
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d] [36m  Disk Storage (1.1ms) [0m[31mDeleted file from key: 7z451hp8e3v1xptxf6ll3cqmunwj[0m
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d] [36m  Disk Storage (1.6ms) [0m[31mDeleted files by key prefix: variants/7z451hp8e3v1xptxf6ll3cqmunwj/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [45e8b737-feed-4ca9-a187-c4195837fd8d] Performed ActiveStorage::PurgeJob (Job ID: 45e8b737-feed-4ca9-a187-c4195837fd8d) from Async(default) in 8436.8ms
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mActiveStorage::Attachment Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 11]]
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 11]]
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7] [36m  Disk Storage (67.4ms) [0m[31mDeleted file from key: otya80lloravb984vqgtk7ks9nn3[0m
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7] [36m  Disk Storage (1.5ms) [0m[31mDeleted files by key prefix: variants/otya80lloravb984vqgtk7ks9nn3/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [78a7ef93-2351-4dde-8128-c544e2eb28d7] Performed ActiveStorage::PurgeJob (Job ID: 78a7ef93-2351-4dde-8128-c544e2eb28d7) from Async(default) in 1287.42ms
Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:26:29 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "54.7", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000027d5feb0738 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-2368-njvis2.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "54.7", "sku" => "TEST004", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000027d5feb0738 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-2368-njvis2.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST004"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", "vela prueba"], ["price", 54.7], ["sku", "TEST004"], ["category", "test"], ["stock_quantity", 10], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 14:26:29.742932"], ["updated_at", "2025-09-16 14:26:29.742932"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "lkwhzpnj1s9yrp6qfe8jfji7h9wh"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 14:26:29.907470"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 11], ["blob_id", 14], ["created_at", "2025-09-16 14:26:29.913670"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.6ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:26:29.921543"], ["id", 11]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (23.1ms) [0m[32mUploaded file to key: lkwhzpnj1s9yrp6qfe8jfji7h9wh (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: cca84357-7013-401d-a521-9c7d1053dc85) to Async(default) with arguments: #<GlobalID:0x0000027d61e59ee0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/14>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 11
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 306ms (Views: 0.8ms | ActiveRecord: 6.1ms (7 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85] Performing ActiveStorage::AnalyzeJob (Job ID: cca84357-7013-401d-a521-9c7d1053dc85) from Async(default) enqueued at 2025-09-16T14:26:29.980312200Z with arguments: #<GlobalID:0x0000027d621fc7c8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/14>>
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:26:30 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mActiveStorage::Blob Update (5.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 14]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 14]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:26:31.151314"], ["id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cca84357-7013-401d-a521-9c7d1053dc85] Performed ActiveStorage::AnalyzeJob (Job ID: cca84357-7013-401d-a521-9c7d1053dc85) from Async(default) in 871.04ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:29:01 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:29:01 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:98:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 101ms (Views: 0.7ms | ActiveRecord: 3.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:30:16 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:30:16 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:30:16 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 11: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTQsInB1ciI6ImJsb2JfaWQifX0=--06be0a90251930b5d861510254a5bc8b7a0e75d5/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 101ms (Views: 2.6ms | ActiveRecord: 6.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:30:18 -0700
Processing by Api::V1::SalesController#stats as HTML
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 119ms (Views: 1.5ms | ActiveRecord: 3.8ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 128ms (Views: 1.4ms | ActiveRecord: 4.6ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 11: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTQsInB1ciI6ImJsb2JfaWQifX0=--06be0a90251930b5d861510254a5bc8b7a0e75d5/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 25ms (Views: 5.0ms | ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:34:35 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:34:35 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 1016ms (Views: 16.3ms | ActiveRecord: 8.2ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 11: http://localhost:3000/images/eyJfcmFpbHMiOnsiZGF0YSI6MTQsInB1ciI6ImJsb2JfaWQifX0=--06be0a90251930b5d861510254a5bc8b7a0e75d5
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 1134ms (Views: 0.9ms | ActiveRecord: 3.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:34:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 11: http://localhost:3000/images/eyJfcmFpbHMiOnsiZGF0YSI6MTQsInB1ciI6ImJsb2JfaWQifX0=--06be0a90251930b5d861510254a5bc8b7a0e75d5
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 15ms (Views: 0.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/11" for 127.0.0.1 at 2025-09-16 07:34:44 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "11"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:120:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 11]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 11], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 14]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 11]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 4cf394b5-fd46-41fb-b26a-ef1e19790ac5) to Async(default) with arguments: #<GlobalID:0x0000020696323f90 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/14>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:110:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 90ms (Views: 0.8ms | ActiveRecord: 10.7ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5] Performing ActiveStorage::PurgeJob (Job ID: 4cf394b5-fd46-41fb-b26a-ef1e19790ac5) from Async(default) enqueued at 2025-09-16T14:34:44.885233800Z with arguments: #<GlobalID:0x00000206963c5c28 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/14>>
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:34:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mActiveStorage::Attachment Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 14], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 14]]
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mActiveStorage::Blob Destroy (2.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 14]]
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5] [36m  Disk Storage (1.1ms) [0m[31mDeleted file from key: lkwhzpnj1s9yrp6qfe8jfji7h9wh[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5] [36m  Disk Storage (1.3ms) [0m[31mDeleted files by key prefix: variants/lkwhzpnj1s9yrp6qfe8jfji7h9wh/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [4cf394b5-fd46-41fb-b26a-ef1e19790ac5] Performed ActiveStorage::PurgeJob (Job ID: 4cf394b5-fd46-41fb-b26a-ef1e19790ac5) from Async(default) in 1048.98ms
Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:35:06 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "110", "sku" => "TEST004", "category" => "test", "stock_quantity" => "40", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x000002069851f6f8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-31592-6a8z5m.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "110", "sku" => "TEST004", "category" => "test", "stock_quantity" => "40", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x000002069851f6f8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-31592-6a8z5m.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST004"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", "vela prueba"], ["price", 110.0], ["sku", "TEST004"], ["category", "test"], ["stock_quantity", 40], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 14:35:06.751730"], ["updated_at", "2025-09-16 14:35:06.751730"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "btvy1z79xs049mp06100qiigwhxb"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 14:35:06.784215"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 12], ["blob_id", 15], ["created_at", "2025-09-16 14:35:06.791194"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:35:06.800830"], ["id", 12]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (25.6ms) [0m[32mUploaded file to key: btvy1z79xs049mp06100qiigwhxb (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 985be8ed-4c23-4a3c-ac4d-622f9d01b6c1) to Async(default) with arguments: #<GlobalID:0x00000206987ae018 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/15>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 12
Image attached: true
Image filename: Gemini_Generated_Image_7p0o787p0o787p0o.png
Image content type: image/png
Image byte size: 1277955
Generated image URL for product 12: http://localhost:3000/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
Response image_url: http://localhost:3000/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 129ms (Views: 0.8ms | ActiveRecord: 6.3ms (7 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1] Performing ActiveStorage::AnalyzeJob (Job ID: 985be8ed-4c23-4a3c-ac4d-622f9d01b6c1) from Async(default) enqueued at 2025-09-16T14:35:06.838731600Z with arguments: #<GlobalID:0x00000206987a1ca0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/15>>
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:35:07 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1] [36m  Disk Storage (4.8ms) [0m[34mDownloaded file from key: btvy1z79xs049mp06100qiigwhxb[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1] Skipping image analysis because ImageMagick doesn't support the file
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mActiveStorage::Blob Update (4.0ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 15]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 15]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:35:07.621575"], ["id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [985be8ed-4c23-4a3c-ac4d-622f9d01b6c1] Performed ActiveStorage::AnalyzeJob (Job ID: 985be8ed-4c23-4a3c-ac4d-622f9d01b6c1) from Async(default) in 463.13ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:42:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (2.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 79ms (Views: 1.4ms | ActiveRecord: 3.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:42:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 13ms (Views: 0.6ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:43:21 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 110ms (Views: 1.8ms | ActiveRecord: 6.3ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for ::1 at 2025-09-16 07:44:43 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 898ms (Views: 59.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 990.6ms)


Started GET "/icon.png" for ::1 at 2025-09-16 07:44:44 -0700
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started GET "/" for ::1 at 2025-09-16 07:44:54 -0700
Processing by Rails::WelcomeController#index as HTML
  Rendering C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/icon.png" for ::1 at 2025-09-16 07:44:54 -0700
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started GET "/" for ::1 at 2025-09-16 07:44:56 -0700
Processing by Rails::WelcomeController#index as HTML
  Rendering C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered C:/Ruby34-x64/lib/ruby/gems/3.4.0/gems/railties-7.2.2.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/icon.png" for ::1 at 2025-09-16 07:44:56 -0700
  
ActionController::RoutingError (No route matches [GET] "/icon.png"):
  
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:47:06 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:47:06 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 181ms (Views: 13.0ms | ActiveRecord: 6.5ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 209ms (Views: 0.9ms | ActiveRecord: 2.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:47:10 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 15ms (Views: 0.6ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:47:38 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST006", "category" => "test", "stock_quantity" => "80", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff4889f30 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-iuwa7v.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST006", "category" => "test", "stock_quantity" => "80", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff4889f30 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-iuwa7v.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST006"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product creation failed: ["Price must be greater than 0"]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 422 Unprocessable Content in 866ms (Views: 1.8ms | ActiveRecord: 4.2ms (1 query, 0 cached) | GC: 0.3ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:48:17 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST006", "category" => "test", "stock_quantity" => "80", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff7a59d30 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-uwkcq1.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST006", "category" => "test", "stock_quantity" => "80", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff7a59d30 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-uwkcq1.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST006"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product creation failed: ["Price must be greater than 0"]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 422 Unprocessable Content in 40ms (Views: 1.7ms | ActiveRecord: 4.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:48:20 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:49:13 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "120", "sku" => "TEST006", "category" => "test", "stock_quantity" => "40", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff7d36d78 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-vk0w59.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "120", "sku" => "TEST006", "category" => "test", "stock_quantity" => "40", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff7d36d78 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-vk0w59.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST006"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", ""], ["price", 120.0], ["sku", "TEST006"], ["category", "test"], ["stock_quantity", 40], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 14:49:13.625988"], ["updated_at", "2025-09-16 14:49:13.625988"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "hnqgxb3uhjsxve1af8gpyhn0sog7"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 14:49:13.843871"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 13], ["blob_id", 16], ["created_at", "2025-09-16 14:49:13.852509"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:49:13.861068"], ["id", 13]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (5.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (26.4ms) [0m[32mUploaded file to key: hnqgxb3uhjsxve1af8gpyhn0sog7 (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9f92d678-9fe4-4b60-a1c7-2604f0c4a842) to Async(default) with arguments: #<GlobalID:0x0000026ff80a07e8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/16>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 13
Image attached: true
Image filename: Gemini_Generated_Image_7p0o787p0o787p0o.png
Image content type: image/png
Image byte size: 1277955
Generated image URL: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
Response image_url: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 365ms (Views: 0.8ms | ActiveRecord: 11.7ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:49:13 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842] Performing ActiveStorage::AnalyzeJob (Job ID: 9f92d678-9fe4-4b60-a1c7-2604f0c4a842) from Async(default) enqueued at 2025-09-16T14:49:13.954383500Z with arguments: #<GlobalID:0x0000026ff813d980 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/16>>
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 0.9ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mActiveStorage::Blob Update (6.4ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 16]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 16]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 13]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:49:14.607019"], ["id", 13]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9f92d678-9fe4-4b60-a1c7-2604f0c4a842] Performed ActiveStorage::AnalyzeJob (Job ID: 9f92d678-9fe4-4b60-a1c7-2604f0c4a842) from Async(default) in 178.07ms
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:50:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:50:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 22ms (Views: 1.0ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:54:17 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 225ms (Views: 2.2ms | ActiveRecord: 17.1ms (6 queries, 0 cached) | GC: 0.6ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:54:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 0.8ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:56:11 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 78ms (Views: 1.1ms | ActiveRecord: 3.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 07:56:39 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "30", "sku" => "TEST009", "category" => "test", "stock_quantity" => "9", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff27673c0 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-o0b4es.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "30", "sku" => "TEST009", "category" => "test", "stock_quantity" => "9", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000026ff27673c0 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-1824-o0b4es.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST009"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", ""], ["price", 30.0], ["sku", "TEST009"], ["category", "test"], ["stock_quantity", 9], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 14:56:39.570818"], ["updated_at", "2025-09-16 14:56:39.570818"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "5zno05uya64rhczw1qj7qhygppdt"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 14:56:39.583153"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 14], ["blob_id", 17], ["created_at", "2025-09-16 14:56:39.588297"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:56:39.594124"], ["id", 14]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (22.1ms) [0m[32mUploaded file to key: 5zno05uya64rhczw1qj7qhygppdt (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a1a6b839-19c5-4479-901c-fedc9db90392) to Async(default) with arguments: #<GlobalID:0x0000026ff927b468 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/17>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 14
Image attached: true
Image filename: Gemini_Generated_Image_7p0o787p0o787p0o.png
Image content type: image/png
Image byte size: 1277955
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
Generated image URL: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
Response image_url: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 97ms (Views: 0.8ms | ActiveRecord: 10.1ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:56:39 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392] Performing ActiveStorage::AnalyzeJob (Job ID: a1a6b839-19c5-4479-901c-fedc9db90392) from Async(default) enqueued at 2025-09-16T14:56:39.632513300Z with arguments: #<GlobalID:0x0000026ff92fc608 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/17>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mActiveStorage::Blob Update (4.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 17]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 17]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 14]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 14:56:40.018178"], ["id", 14]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1a6b839-19c5-4479-901c-fedc9db90392] Performed ActiveStorage::AnalyzeJob (Job ID: a1a6b839-19c5-4479-901c-fedc9db90392) from Async(default) in 44.14ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:102:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 35ms (Views: 0.9ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:58:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 110ms (Views: 1.7ms | ActiveRecord: 6.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 07:59:10 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 07:59:10 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 199ms (Views: 11.6ms | ActiveRecord: 7.3ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 239ms (Views: 0.8ms | ActiveRecord: 2.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 07:59:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2/Gemini_Generated_Image_7p0o787p0o787p0o.png
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:100:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f/Gemini_Generated_Image_7p0o787p0o787p0o.png
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 34ms (Views: 1.0ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:03:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 113ms (Views: 1.7ms | ActiveRecord: 5.9ms (8 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9" for 127.0.0.1 at 2025-09-16 08:03:42 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f" for 127.0.0.1 at 2025-09-16 08:03:42 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2" for 127.0.0.1 at 2025-09-16 08:03:42 -0700
  
ArgumentError (Before process_action callback :authenticate_request has not been defined):
  
app/controllers/api/v1/images_controller.rb:3:in '<class:ImagesController>'
app/controllers/api/v1/images_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :authenticate_request has not been defined):
  
app/controllers/api/v1/images_controller.rb:3:in '<class:ImagesController>'
app/controllers/api/v1/images_controller.rb:1:in '<main>'
  
ArgumentError (Before process_action callback :authenticate_request has not been defined):
  
app/controllers/api/v1/images_controller.rb:3:in '<class:ImagesController>'
app/controllers/api/v1/images_controller.rb:1:in '<main>'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:06:55 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:06:55 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 180ms (Views: 3.8ms | ActiveRecord: 7.7ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 220ms (Views: 0.7ms | ActiveRecord: 3.6ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9" for 127.0.0.1 at 2025-09-16 08:06:58 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2" for 127.0.0.1 at 2025-09-16 08:06:58 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f" for 127.0.0.1 at 2025-09-16 08:06:58 -0700
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
  [1m[36mActiveStorage::Blob Load (2.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (2.1ms) [0m[34mDownloaded file from key: 5zno05uya64rhczw1qj7qhygppdt[0m
[36m  Disk Storage (2.6ms) [0m[34mDownloaded file from key: btvy1z79xs049mp06100qiigwhxb[0m
[36m  Disk Storage (2.2ms) [0m[34mDownloaded file from key: hnqgxb3uhjsxve1af8gpyhn0sog7[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (1586.3ms)
Completed 200 OK in 1718ms (Views: 0.2ms | ActiveRecord: 2.2ms (1 query, 0 cached) | GC: 0.3ms)


Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (1601.4ms)
Completed 200 OK in 1754ms (Views: 0.4ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:07:00 -0700
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (1618.7ms)
Completed 200 OK in 1752ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 35ms (Views: 1.0ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:07:32 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce0acfc00 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-f9b1ny.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "0", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce0acfc00 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-f9b1ny.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (6.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST0010"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product creation failed: ["Price must be greater than 0"]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 422 Unprocessable Content in 45ms (Views: 1.1ms | ActiveRecord: 6.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:07:44 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "", "price" => "10", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce4ed3668 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-fq4x58.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "", "price" => "10", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce4ed3668 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-fq4x58.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (5.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST0010"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", ""], ["price", 10.0], ["sku", "TEST0010"], ["category", "test"], ["stock_quantity", 20], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 15:07:45.088318"], ["updated_at", "2025-09-16 15:07:45.088318"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "o56b1rob9789t2eyuyap28nhki2p"], ["filename", "20240303_145808.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 2157252], ["checksum", "PTFD3Amft7h5H4v5i7pbgA=="], ["created_at", "2025-09-16 15:07:45.121932"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 15], ["blob_id", 18], ["created_at", "2025-09-16 15:07:45.128876"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:07:45.160872"], ["id", 15]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (32.3ms) [0m[32mUploaded file to key: o56b1rob9789t2eyuyap28nhki2p (checksum: PTFD3Amft7h5H4v5i7pbgA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8e557607-2158-4080-844b-a2aed9cae0f0) to Async(default) with arguments: #<GlobalID:0x0000028ce3c4f4b0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/18>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 15
Image attached: true
Image filename: 20240303_145808.jpg
Image content type: image/jpeg
Image byte size: 2157252
Generated image URL for product 15: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
Generated image URL: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
Generated image URL for product 15: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
Response image_url: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 271ms (Views: 1.0ms | ActiveRecord: 13.6ms (7 queries, 0 cached) | GC: 0.6ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:07:45 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a" for 127.0.0.1 at 2025-09-16 08:07:45 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0] Performing ActiveStorage::AnalyzeJob (Job ID: 8e557607-2158-4080-844b-a2aed9cae0f0) from Async(default) enqueued at 2025-09-16T15:07:45.317767200Z with arguments: #<GlobalID:0x0000028ce3cc4a80 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/18>>
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: 20240303_145808.jpg, content_type: image/jpeg
[36m  Disk Storage (4.7ms) [0m[34mDownloaded file from key: o56b1rob9789t2eyuyap28nhki2p[0m
Sent data 20240303_145808.jpg (0.3ms)
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 15: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTgsInB1ciI6ImJsb2JfaWQifX0=--16f0742ad469a0d1a0ad3d1c4f36bedc8400085a
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 81ms (Views: 6.3ms | ActiveRecord: 3.4ms (10 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mActiveStorage::Blob Update (9.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 18]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 18]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 15]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mProduct Update (0.3ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:07:46.286897"], ["id", 15]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0]   [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8e557607-2158-4080-844b-a2aed9cae0f0] Performed ActiveStorage::AnalyzeJob (Job ID: 8e557607-2158-4080-844b-a2aed9cae0f0) from Async(default) in 356.1ms
Started DELETE "/api/v1/products/15" for 127.0.0.1 at 2025-09-16 08:07:52 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "15"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 15]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 18]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 15]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: eae2ff9f-4659-44ed-97a7-6eee44a7ba05) to Async(default) with arguments: #<GlobalID:0x0000028ce4f70e40 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/18>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 71ms (Views: 1.0ms | ActiveRecord: 7.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:07:53 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05] Performing ActiveStorage::PurgeJob (Job ID: eae2ff9f-4659-44ed-97a7-6eee44a7ba05) from Async(default) enqueued at 2025-09-16T15:07:52.727986500Z with arguments: #<GlobalID:0x0000028ce3d253d0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/18>>
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mActiveStorage::Attachment Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 18], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 18]]
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 18], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 18]]
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05] [36m  Disk Storage (1.3ms) [0m[31mDeleted file from key: o56b1rob9789t2eyuyap28nhki2p[0m
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05] [36m  Disk Storage (1.2ms) [0m[31mDeleted files by key prefix: variants/o56b1rob9789t2eyuyap28nhki2p/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [eae2ff9f-4659-44ed-97a7-6eee44a7ba05] Performed ActiveStorage::PurgeJob (Job ID: eae2ff9f-4659-44ed-97a7-6eee44a7ba05) from Async(default) in 47.82ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 13: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTYsInB1ciI6ImJsb2JfaWQifX0=--896a9edf32bf61e7e92ab443111bea4a1f0d0eb2
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 35ms (Views: 0.9ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/13" for 127.0.0.1 at 2025-09-16 08:07:54 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "13"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (2.7ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 13]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 13], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.5ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 16]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 13]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d) to Async(default) with arguments: #<GlobalID:0x0000028ce54ecab8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/16>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 29ms (Views: 0.8ms | ActiveRecord: 4.0ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d] Performing ActiveStorage::PurgeJob (Job ID: 8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d) from Async(default) enqueued at 2025-09-16T15:07:55.083916800Z with arguments: #<GlobalID:0x0000028ce54e32d8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/16>>
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mActiveStorage::Attachment Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 16], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 16]]
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 16]]
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d] [36m  Disk Storage (1.0ms) [0m[31mDeleted file from key: hnqgxb3uhjsxve1af8gpyhn0sog7[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d] [36m  Disk Storage (1.8ms) [0m[31mDeleted files by key prefix: variants/hnqgxb3uhjsxve1af8gpyhn0sog7/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d] Performed ActiveStorage::PurgeJob (Job ID: 8a6e64d5-e4aa-4a97-908a-ed3d2a3a0a4d) from Async(default) in 37.51ms
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:07:55 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 12: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTUsInB1ciI6ImJsb2JfaWQifX0=--42ac573110c2142b1799fabd9d7e534fe467e3e9
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 28ms (Views: 0.9ms | ActiveRecord: 1.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/12" for 127.0.0.1 at 2025-09-16 08:07:57 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "12"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (4.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 12]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 12], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 15]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 12]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 9e0b163e-5974-4630-a954-a075e3d40f1b) to Async(default) with arguments: #<GlobalID:0x0000028ce5c2dfe8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/15>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.03ms)
Completed 200 OK in 30ms (Views: 0.6ms | ActiveRecord: 5.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:07:57 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b] Performing ActiveStorage::PurgeJob (Job ID: 9e0b163e-5974-4630-a954-a075e3d40f1b) from Async(default) enqueued at 2025-09-16T15:07:57.478832200Z with arguments: #<GlobalID:0x0000028ce5c229e0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/15>>
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mActiveStorage::Attachment Exists? (6.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 15], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 15]]
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 15], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 15]]
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b] [36m  Disk Storage (1.2ms) [0m[31mDeleted file from key: btvy1z79xs049mp06100qiigwhxb[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b] [36m  Disk Storage (1.1ms) [0m[31mDeleted files by key prefix: variants/btvy1z79xs049mp06100qiigwhxb/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [9e0b163e-5974-4630-a954-a075e3d40f1b] Performed ActiveStorage::PurgeJob (Job ID: 9e0b163e-5974-4630-a954-a075e3d40f1b) from Async(default) in 48.66ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 14: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTcsInB1ciI6ImJsb2JfaWQifX0=--91e4216d9d25cfccee5a991165dfe52b71b26e8f
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/api/v1/products/14" for 127.0.0.1 at 2025-09-16 08:08:01 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "14"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (3.8ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 14]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 14], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 14]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 48d1c4c2-f560-4ab2-a925-bfa432c44d8f) to Async(default) with arguments: #<GlobalID:0x0000028ce6265870 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/17>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.03ms)
Completed 200 OK in 32ms (Views: 0.6ms | ActiveRecord: 4.6ms (6 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f] Performing ActiveStorage::PurgeJob (Job ID: 48d1c4c2-f560-4ab2-a925-bfa432c44d8f) from Async(default) enqueued at 2025-09-16T15:08:01.738995800Z with arguments: #<GlobalID:0x0000028ce63cc470 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/17>>
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mActiveStorage::Attachment Exists? (5.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 17], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 17]]
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 17]]
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:08:02 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f] [36m  Disk Storage (1.1ms) [0m[31mDeleted file from key: 5zno05uya64rhczw1qj7qhygppdt[0m
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f] [36m  Disk Storage (1.4ms) [0m[31mDeleted files by key prefix: variants/5zno05uya64rhczw1qj7qhygppdt/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [48d1c4c2-f560-4ab2-a925-bfa432c44d8f] Performed ActiveStorage::PurgeJob (Job ID: 48d1c4c2-f560-4ab2-a925-bfa432c44d8f) from Async(default) in 38.66ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:08:15 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:08:16 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 31ms (Views: 1.0ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:12:33 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:12:33 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:12:33 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 40ms (Views: 1.1ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 8ms (Views: 0.8ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:12:33 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 47ms (Views: 1.1ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:15:02 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:15:02 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 36ms (Views: 1.0ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:15:13 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:15:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 8ms (Views: 2.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 37ms (Views: 1.0ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:15:27 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:15:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 35ms (Views: 1.0ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:16:05 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:16:05 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 36ms (Views: 1.3ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:16:07 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:16:27 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "10", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce7c215e8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-mbcx0j.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "10", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "10", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce7c215e8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-mbcx0j.jpg>, @content_type="image/jpeg", @original_filename="20240303_145808.jpg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"20240303_145808.jpg\"\r\nContent-Type: image/jpeg\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST0010"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", "vela prueba"], ["price", 10.0], ["sku", "TEST0010"], ["category", "test"], ["stock_quantity", 10], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 15:16:28.258565"], ["updated_at", "2025-09-16 15:16:28.258565"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "y9ebschh37s6tfaup4rk7grd24qu"], ["filename", "20240303_145808.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 2157252], ["checksum", "PTFD3Amft7h5H4v5i7pbgA=="], ["created_at", "2025-09-16 15:16:28.278379"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 16], ["blob_id", 19], ["created_at", "2025-09-16 15:16:28.288317"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:16:28.297242"], ["id", 16]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (30.2ms) [0m[32mUploaded file to key: y9ebschh37s6tfaup4rk7grd24qu (checksum: PTFD3Amft7h5H4v5i7pbgA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0dec9ec7-1205-4686-b3ec-71795afdeb4c) to Async(default) with arguments: #<GlobalID:0x0000028ce80c8880 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/19>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 16
Image attached: true
Image filename: 20240303_145808.jpg
Image content type: image/jpeg
Image byte size: 2157252
Generated image URL for product 16: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
Generated image URL: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
Generated image URL for product 16: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
Response image_url: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 123ms (Views: 1.0ms | ActiveRecord: 7.8ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262" for 127.0.0.1 at 2025-09-16 08:16:28 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:16:28 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c] Performing ActiveStorage::AnalyzeJob (Job ID: 0dec9ec7-1205-4686-b3ec-71795afdeb4c) from Async(default) enqueued at 2025-09-16T15:16:28.340905100Z with arguments: #<GlobalID:0x0000028ce821a0f8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/19>>
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: 20240303_145808.jpg, content_type: image/jpeg
[36m  Disk Storage (2.6ms) [0m[34mDownloaded file from key: y9ebschh37s6tfaup4rk7grd24qu[0m
Sent data 20240303_145808.jpg (0.3ms)
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 16: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MTksInB1ciI6ImJsb2JfaWQifX0=--a63c6135f4a8e94b8f0c9080436d118c4df66262
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mActiveStorage::Blob Update (5.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 19]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 19]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 16]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:16:29.434723"], ["id", 16]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0dec9ec7-1205-4686-b3ec-71795afdeb4c] Performed ActiveStorage::AnalyzeJob (Job ID: 0dec9ec7-1205-4686-b3ec-71795afdeb4c) from Async(default) in 596.45ms
Started DELETE "/api/v1/products/16" for 127.0.0.1 at 2025-09-16 08:16:40 -0700
Processing by Api::V1::ProductsController#destroy as HTML
  Parameters: {"id" => "16"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mSaleItem Load (4.8ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."product_id" = ?[0m  [["product_id", 16]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 16], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = ?[0m  [["id", 19]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mProduct Destroy (0.3ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 16]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[ActiveJob] Enqueued ActiveStorage::PurgeJob (Job ID: 0a095ebb-5493-418c-a506-39407c2ed717) to Async(default) with arguments: #<GlobalID:0x0000028ce89ebca0 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/19>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:111:in 'Api::V1::ProductsController#destroy'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 73ms (Views: 2.9ms | ActiveRecord: 6.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:16:41 -0700
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717] Performing ActiveStorage::PurgeJob (Job ID: 0a095ebb-5493-418c-a506-39407c2ed717) from Async(default) enqueued at 2025-09-16T15:16:41.008827000Z with arguments: #<GlobalID:0x0000028ce3c87388 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/19>>
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mActiveStorage::Attachment Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ? LIMIT ?[0m  [["blob_id", 19], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = ?[0m  [["blob_id", 19]]
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 19], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mActiveStorage::Blob Destroy (1.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ?[0m  [["id", 19]]
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717] [36m  Disk Storage (2.2ms) [0m[31mDeleted file from key: y9ebschh37s6tfaup4rk7grd24qu[0m
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717] [36m  Disk Storage (1.3ms) [0m[31mDeleted files by key prefix: variants/y9ebschh37s6tfaup4rk7grd24qu/[0m
[ActiveJob] [ActiveStorage::PurgeJob] [0a095ebb-5493-418c-a506-39407c2ed717] Performed ActiveStorage::PurgeJob (Job ID: 0a095ebb-5493-418c-a506-39407c2ed717) from Async(default) in 53.04ms
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 8ms (Views: 0.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:22:50 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 312ms (Views: 0.7ms | ActiveRecord: 5.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:23:11 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 44ms (Views: 1.3ms | ActiveRecord: 1.5ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:24:37 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 27ms (Views: 1.1ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:24:45 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 26ms (Views: 0.7ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:24:53 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 0.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:25:21 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.2ms)
Completed 200 OK in 35ms (Views: 2.3ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:25:25 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:25:25 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.4ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 48ms (Views: 1.0ms | ActiveRecord: 2.3ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:25:25 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 7ms (Views: 1.2ms | ActiveRecord: 0.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:26:37 -0700
Processing by Api::V1::ProductsController#create as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "active" => "true", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce786a0f8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-xsveg8.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">}}
Creating product with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "image" => #<ActionDispatch::Http::UploadedFile:0x0000028ce786a0f8 @tempfile=#<Tempfile:C:/Users/yacck/AppData/Local/Temp/RackMultipart20250916-16356-xsveg8.png>, @content_type="image/png", @original_filename="Gemini_Generated_Image_7p0o787p0o787p0o.png", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Gemini_Generated_Image_7p0o787p0o787p0o.png\"\r\nContent-Type: image/png\r\n">, "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) LIMIT ?[0m  [["sku", "TEST0010"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "price", "sku", "category", "stock_quantity", "low_stock_threshold", "active", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "Prueba producto vela "], ["description", "vela prueba"], ["price", 40.53], ["sku", "TEST0010"], ["category", "test"], ["stock_quantity", 20], ["low_stock_threshold", 5], ["active", 1], ["created_at", "2025-09-16 15:26:37.681566"], ["updated_at", "2025-09-16 15:26:37.681566"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["key", "cmfhlr266zt4wlmo3ais7ar21kmz"], ["filename", "Gemini_Generated_Image_7p0o787p0o787p0o.png"], ["content_type", "image/png"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 1277955], ["checksum", "eIs6V/psWwAQJHh+Do0VVQ=="], ["created_at", "2025-09-16 15:26:37.705213"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES (?, ?, ?, ?, ?) RETURNING "id"[0m  [["name", "image"], ["record_type", "Product"], ["record_id", 17], ["blob_id", 20], ["created_at", "2025-09-16 15:26:37.711956"]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:26:37.721208"], ["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
[36m  Disk Storage (32.0ms) [0m[32mUploaded file to key: cmfhlr266zt4wlmo3ais7ar21kmz (checksum: eIs6V/psWwAQJHh+Do0VVQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 862d13b1-067b-48f1-a1c5-fcc3d02a64dd) to Async(default) with arguments: #<GlobalID:0x0000028ce705f2c8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/20>>
[ActiveJob] ↳ app/controllers/api/v1/products_controller.rb:66:in 'Api::V1::ProductsController#create'
Product created successfully: 17
Image attached: true
Image filename: Gemini_Generated_Image_7p0o787p0o787p0o.png
Image content type: image/png
Image byte size: 1277955
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
Generated image URL: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
Response image_url: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 123ms (Views: 1.1ms | ActiveRecord: 10.2ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 08:26:37 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:26:38 -0700
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd] Performing ActiveStorage::AnalyzeJob (Job ID: 862d13b1-067b-48f1-a1c5-fcc3d02a64dd) from Async(default) enqueued at 2025-09-16T15:26:37.766175500Z with arguments: #<GlobalID:0x0000028ce70504a8 @uri=#<URI::GID gid://backend/ActiveStorage::Blob/20>>
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (1.4ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (0.3ms)
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 22ms (Views: 1.3ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mActiveStorage::Blob Update (6.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = ? WHERE "active_storage_blobs"."id" = ?[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 20]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = ?[0m  [["blob_id", 20]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "updated_at" = ? WHERE "products"."id" = ?[0m  [["updated_at", "2025-09-16 15:26:38.677277"], ["id", 17]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [862d13b1-067b-48f1-a1c5-fcc3d02a64dd] Performed ActiveStorage::AnalyzeJob (Job ID: 862d13b1-067b-48f1-a1c5-fcc3d02a64dd) from Async(default) in 459.05ms
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:26:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 34ms (Views: 1.2ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:27:15 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 19ms (Views: 1.3ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:27:22 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 30ms (Views: 1.9ms | ActiveRecord: 1.1ms (8 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 08:27:49 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "jorge", "last_name" => "", "email" => "[FILTERED]", "phone" => "", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 422 Unprocessable Content in 6ms (Views: 1.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 08:27:50 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta "}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (5.6ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", "Prueba de venta "], ["user_id", 1], ["customer_id", nil], ["created_at", "2025-09-16 15:27:50.616210"], ["updated_at", "2025-09-16 15:27:50.616210"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 69ms (Views: 3.7ms | ActiveRecord: 6.5ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/2/sale_items" for 127.0.0.1 at 2025-09-16 08:27:50 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "2"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 2], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/api/v1/sale_items_controller.rb:48:in 'Integer#*'
app/controllers/api/v1/sale_items_controller.rb:48:in 'Api::V1::SaleItemsController#create'
Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 08:28:13 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "jorge", "last_name" => "", "email" => "[FILTERED]", "phone" => "", "address" => ""}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.99ms)
Completed 422 Unprocessable Content in 6ms (Views: 1.9ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 08:28:14 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta "}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (4.2ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", "Prueba de venta "], ["user_id", 1], ["customer_id", nil], ["created_at", "2025-09-16 15:28:14.482725"], ["updated_at", "2025-09-16 15:28:14.482725"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:67:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (2.0ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:71:in 'Sale#items_count'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 33ms (Views: 1.1ms | ActiveRecord: 7.2ms (5 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/3/sale_items" for 127.0.0.1 at 2025-09-16 08:28:14 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "3"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 3], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/api/v1/sale_items_controller.rb:48:in 'Integer#*'
app/controllers/api/v1/sale_items_controller.rb:48:in 'Api::V1::SaleItemsController#create'
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:36:37 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.37ms)
Completed 200 OK in 160ms (Views: 2.0ms | ActiveRecord: 5.9ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:36:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 55ms (Views: 1.3ms | ActiveRecord: 2.0ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:36:41 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 53ms (Views: 1.4ms | ActiveRecord: 1.7ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:36:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 46ms (Views: 1.5ms | ActiveRecord: 1.9ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:36:46 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.8ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 85ms (Views: 1.4ms | ActiveRecord: 2.8ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:38:24 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:38:24 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 89ms (Views: 1.9ms | ActiveRecord: 6.7ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 78ms (Views: 1.1ms | ActiveRecord: 3.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:38:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 14ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:38:35 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 53ms (Views: 1.1ms | ActiveRecord: 2.7ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:38:39 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 64ms (Views: 1.0ms | ActiveRecord: 2.0ms (12 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:41:21 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:41:21 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 31ms (Views: 0.9ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:41:23 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 42ms (Views: 0.9ms | ActiveRecord: 2.0ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&status=pending" for 127.0.0.1 at 2025-09-16 08:41:34 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "status" => "pending"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."status" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["status", "pending"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 41ms (Views: 0.9ms | ActiveRecord: 1.6ms (12 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mCustomer Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:42:01 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:42:02 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 34ms (Views: 1.1ms | ActiveRecord: 1.3ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 08:42:17 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 309ms (Views: 1.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:42:18 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:42:18 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 32ms (Views: 0.9ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 15ms (Views: 0.7ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:42:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:43:23 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:43:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 0.4ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 31ms (Views: 1.1ms | ActiveRecord: 1.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:43:32 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 16ms (Views: 1.4ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:43:37 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 45ms (Views: 0.7ms | ActiveRecord: 2.1ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:43:48 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 39ms (Views: 0.8ms | ActiveRecord: 1.7ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:43:53 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 37ms (Views: 0.7ms | ActiveRecord: 1.7ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 08:44:07 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 08:44:33 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "jorge", "last_name" => "Alejandro", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "jorge"], ["last_name", "Alejandro"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 15:44:33.698517"], ["updated_at", "2025-09-16 15:44:33.698517"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 26ms (Views: 1.7ms | ActiveRecord: 9.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 08:44:33 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "notes" => "venta de prueba ", "customer_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (3.4ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", "venta de prueba "], ["user_id", 1], ["customer_id", 2], ["created_at", "2025-09-16 15:44:34.027845"], ["updated_at", "2025-09-16 15:44:34.027845"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/sale.rb:157:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 31ms (Views: 1.1ms | ActiveRecord: 4.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/4/sale_items" for 127.0.0.1 at 2025-09-16 08:44:34 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 4], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


  
TypeError (String can't be coerced into Integer):
  
app/controllers/api/v1/sale_items_controller.rb:48:in 'Integer#*'
app/controllers/api/v1/sale_items_controller.rb:48:in 'Api::V1::SaleItemsController#create'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:45:11 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:45:11 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.87ms)
Completed 200 OK in 37ms (Views: 1.9ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:47:18 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:47:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 102ms (Views: 1.6ms | ActiveRecord: 6.2ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 136ms (Views: 1.2ms | ActiveRecord: 6.9ms (9 queries, 0 cached) | GC: 0.5ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:47:22 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 16ms (Views: 1.4ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:47:24 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?)[0m  [["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.28ms)
Completed 200 OK in 81ms (Views: 1.1ms | ActiveRecord: 5.1ms (14 queries, 0 cached) | GC: 0.2ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 08:48:08 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jouse", "last_name" => "pañuelos", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (6.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jouse"], ["last_name", "pañuelos"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 15:48:09.499143"], ["updated_at", "2025-09-16 15:48:09.499143"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 32ms (Views: 1.3ms | ActiveRecord: 9.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 08:48:09 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "customer_id" => 3}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (8.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 3], ["created_at", "2025-09-16 15:48:09.992392"], ["updated_at", "2025-09-16 15:48:09.992392"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/sale.rb:157:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 201 Created in 63ms (Views: 2.7ms | ActiveRecord: 9.9ms (6 queries, 0 cached) | GC: 0.2ms)


Started POST "/api/v1/sales/5/sale_items" for 127.0.0.1 at 2025-09-16 08:48:10 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "5"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 5], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Create (7.6ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 2], ["unit_price", 40.53], ["line_total", 81.06], ["sale_id", 5], ["product_id", 17], ["created_at", "2025-09-16 15:48:10.857861"], ["updated_at", "2025-09-16 15:48:10.857861"]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:52:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/sale.rb:157:in 'Sale#customer_name'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 201 Created in 110ms (Views: 1.3ms | ActiveRecord: 9.9ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:48:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (1.0ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?)[0m  [["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.73ms)
Completed 200 OK in 117ms (Views: 2.3ms | ActiveRecord: 4.5ms (17 queries, 0 cached) | GC: 0.2ms)


Started PATCH "/api/v1/sales/5/complete" for 127.0.0.1 at 2025-09-16 08:48:21 -0700
Processing by Api::V1::SalesController#complete as HTML
  Parameters: {"id" => "5"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:204:in 'Api::V1::SalesController#set_sale'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.3ms (2 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'pending?' for an instance of Sale):
  
app/models/sale.rb:85:in 'Sale#can_be_completed?'
app/models/sale.rb:93:in 'Sale#complete!'
app/controllers/api/v1/sales_controller.rb:127:in 'Api::V1::SalesController#complete'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:50:45 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:50:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.82ms)
Completed 200 OK in 49ms (Views: 1.7ms | ActiveRecord: 2.2ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:57:28 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (2.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 88ms (Views: 1.9ms | ActiveRecord: 3.6ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (19.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."id" DESC LIMIT ?[0m  [["LIMIT", 3]]
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 5], ["sale_id", 4], ["sale_id", 3]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:58:43 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 71ms (Views: 1.3ms | ActiveRecord: 5.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:58:45 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:58:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 73ms (Views: 1.0ms | ActiveRecord: 4.0ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 08:58:49 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 08:58:49 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.46ms)
Completed 200 OK in 48ms (Views: 2.1ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 08:58:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:58:52 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?)[0m  [["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 81ms (Views: 0.8ms | ActiveRecord: 3.8ms (17 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 08:59:12 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "General", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.5ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "General"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 15:59:12.909138"], ["updated_at", "2025-09-16 15:59:12.909138"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 24ms (Views: 1.2ms | ActiveRecord: 9.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 08:59:12 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 4}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (4.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", "Prueba de venta "], ["user_id", 1], ["customer_id", 4], ["created_at", "2025-09-16 15:59:13.256603"], ["updated_at", "2025-09-16 15:59:13.256603"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 201 Created in 31ms (Views: 1.1ms | ActiveRecord: 5.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/6/sale_items" for 127.0.0.1 at 2025-09-16 08:59:13 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "6"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 6], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Create (3.8ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 2], ["unit_price", 40.53], ["line_total", 81.06], ["sale_id", 6], ["product_id", 17], ["created_at", "2025-09-16 15:59:13.902443"], ["updated_at", "2025-09-16 15:59:13.902443"]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:52:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 47ms (Views: 0.7ms | ActiveRecord: 5.4ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 08:59:13 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?)[0m  [["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 62ms (Views: 0.9ms | ActiveRecord: 2.2ms (19 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/sales/6/complete" for 127.0.0.1 at 2025-09-16 08:59:39 -0700
Processing by Api::V1::SalesController#complete as HTML
  Parameters: {"id" => "6"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:204:in 'Api::V1::SalesController#set_sale'
  [1m[36mSaleItem Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sale_items" WHERE "sale_items"."sale_id" = ? LIMIT ?[0m  [["sale_id", 6], ["LIMIT", 1]]
  ↳ app/models/sale.rb:102:in 'Sale#can_be_completed?'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:114:in 'block in Sale#complete!'
  [1m[36mSaleItem Load (2.9ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:114:in 'block in Sale#complete!'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/sale.rb:115:in 'block (2 levels) in Sale#complete!'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 18], ["updated_at", "2025-09-16 15:59:39.954654"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update (0.2ms)[0m  [1m[33mUPDATE "sales" SET "total_amount" = ?, "status" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["total_amount", 87.54], ["status", "completed"], ["updated_at", "2025-09-16 15:59:39.962663"], ["id", 6]]
  ↳ app/models/sale.rb:118:in 'block in Sale#complete!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/models/sale.rb:112:in 'Sale#complete!'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 4.2ms (9 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method '[]' for true):
  
app/models/sale.rb:201:in 'Sale#update_product_stock'
app/models/sale.rb:118:in 'block in Sale#complete!'
app/models/sale.rb:112:in 'Sale#complete!'
app/controllers/api/v1/sales_controller.rb:127:in 'Api::V1::SalesController#complete'
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:00:03 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 19ms (Views: 1.5ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:00:04 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?)[0m  [["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 75ms (Views: 1.2ms | ActiveRecord: 3.1ms (19 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:01:27 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:01:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 2.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 35ms (Views: 1.1ms | ActiveRecord: 1.8ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:02:31 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?)[0m  [["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.8ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.6ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 212ms (Views: 1.3ms | ActiveRecord: 14.1ms (19 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:02:34 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 34ms (Views: 1.1ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.0ms)


  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."id" ASC LIMIT ?[0m  [["LIMIT", 1000]]
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 09:05:21 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 362ms (Views: 1.3ms | ActiveRecord: 5.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:05:23 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:05:23 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 125ms (Views: 1.9ms | ActiveRecord: 3.2ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 352ms (Views: 1.1ms | ActiveRecord: 3.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:05:25 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 17ms (Views: 1.2ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:05:40 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:05:40 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 40ms (Views: 1.4ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 31ms (Views: 1.3ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:08:24 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:08:24 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 107ms (Views: 1.2ms | ActiveRecord: 6.5ms (9 queries, 0 cached) | GC: 0.2ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 76ms (Views: 1.0ms | ActiveRecord: 2.9ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:08:27 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.9ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?)[0m  [["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.52ms)
Completed 200 OK in 133ms (Views: 1.5ms | ActiveRecord: 4.9ms (19 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 09:08:45 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "Araujo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.0ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "Araujo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 16:08:45.486360"], ["updated_at", "2025-09-16 16:08:45.486360"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 19ms (Views: 1.2ms | ActiveRecord: 8.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 09:08:45 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 43.772400000000005, "tax_amount" => 3.2424, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "customer_id" => 5}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (3.4ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 3.24], ["tax_amount", 3.24], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 5], ["created_at", "2025-09-16 16:08:46.191802"], ["updated_at", "2025-09-16 16:08:46.191802"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 34ms (Views: 0.9ms | ActiveRecord: 4.7ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/7/sale_items" for 127.0.0.1 at 2025-09-16 09:08:46 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}, "sale_id" => "7"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 7], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Create (3.7ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 1], ["unit_price", 40.53], ["line_total", 40.53], ["sale_id", 7], ["product_id", 17], ["created_at", "2025-09-16 16:08:46.645710"], ["updated_at", "2025-09-16 16:08:46.645710"]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:52:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 201 Created in 56ms (Views: 1.1ms | ActiveRecord: 5.6ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:08:47 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 82ms (Views: 1.4ms | ActiveRecord: 3.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=credit_card" for 127.0.0.1 at 2025-09-16 09:10:03 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "credit_card"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "credit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 14ms (Views: 1.1ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=cash" for 127.0.0.1 at 2025-09-16 09:10:07 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "cash"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "cash"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.66ms)
Completed 200 OK in 90ms (Views: 1.8ms | ActiveRecord: 3.2ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:12:35 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (1.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.28ms)
Completed 200 OK in 244ms (Views: 1.8ms | ActiveRecord: 13.2ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:13:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (11.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (11.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (5.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (5.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.99ms)
Completed 200 OK in 1213ms (Views: 66.1ms | ActiveRecord: 46.1ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:13:46 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:13:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:203:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (1.0ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:204:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:207:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:208:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:210:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:211:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:211:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (1.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:211:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.5ms)
Completed 200 OK in 254ms (Views: 5.5ms | ActiveRecord: 20.9ms (9 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (1.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 417ms (Views: 1.8ms | ActiveRecord: 11.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:13:49 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (1.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (9.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.53ms)
Completed 200 OK in 357ms (Views: 6.6ms | ActiveRecord: 16.0ms (21 queries, 0 cached) | GC: 0.5ms)


Started PATCH "/api/v1/sales/7/recalculate" for 127.0.0.1 at 2025-09-16 09:15:06 -0700
Processing by Api::V1::SalesController#recalculate as HTML
  Parameters: {"id" => "7", "sale" => {}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 3.9ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method 'tax_amount=' for nil):
  
app/controllers/api/v1/sales_controller.rb:146:in 'Api::V1::SalesController#recalculate'
Started PATCH "/api/v1/sales/7/recalculate" for 127.0.0.1 at 2025-09-16 09:15:47 -0700
Processing by Api::V1::SalesController#recalculate as HTML
  Parameters: {"id" => "7", "sale" => {}}
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:226:in 'Api::V1::SalesController#set_sale'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
=== CALCULATE TOTALS ===
Subtotal: 40.53
Discount: 0.0
Tax: 3.2424
Total: 43.77
  [1m[36mSale Update (0.5ms)[0m  [1m[33mUPDATE "sales" SET "total_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["total_amount", 43.77], ["updated_at", "2025-09-16 16:15:48.643868"], ["id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:148:in 'Api::V1::SalesController#recalculate'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:148:in 'Api::V1::SalesController#recalculate'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:152:in 'Api::V1::SalesController#recalculate'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:152:in 'Api::V1::SalesController#recalculate'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:152:in 'Api::V1::SalesController#recalculate'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 133ms (Views: 1.6ms | ActiveRecord: 15.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:16:35 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (2.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.65ms)
Completed 200 OK in 373ms (Views: 1.8ms | ActiveRecord: 18.1ms (21 queries, 0 cached) | GC: 0.9ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:16:39 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 83ms (Views: 2.2ms | ActiveRecord: 6.5ms (4 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:17:27 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 70ms (Views: 1.2ms | ActiveRecord: 4.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:17:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:17:36 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 156ms (Views: 1.0ms | ActiveRecord: 9.3ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:22:21 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 200 OK in 126ms (Views: 1.6ms | ActiveRecord: 5.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/sales/7/complete" for 127.0.0.1 at 2025-09-16 09:22:31 -0700
Processing by Api::V1::SalesController#complete as HTML
  Parameters: {"id" => "7"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:205:in 'Api::V1::SalesController#set_sale'
  [1m[36mSaleItem Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sale_items" WHERE "sale_items"."sale_id" = ? LIMIT ?[0m  [["sale_id", 7], ["LIMIT", 1]]
  ↳ app/models/sale.rb:102:in 'Sale#can_be_completed?'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:114:in 'block in Sale#complete!'
  [1m[36mSaleItem Load (7.7ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:114:in 'block in Sale#complete!'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/sale.rb:115:in 'block (2 levels) in Sale#complete!'
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 19], ["updated_at", "2025-09-16 16:22:31.593345"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update (0.8ms)[0m  [1m[33mUPDATE "sales" SET "status" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["status", "completed"], ["updated_at", "2025-09-16 16:22:31.606689"], ["id", 7]]
  ↳ app/models/sale.rb:118:in 'block in Sale#complete!'
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 18], ["updated_at", "2025-09-16 16:22:31.619316"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/sale.rb:112:in 'Sale#complete!'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:128:in 'Api::V1::SalesController#complete'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 93ms (Views: 1.0ms | ActiveRecord: 16.1ms (15 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:22:31 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 99ms (Views: 1.4ms | ActiveRecord: 3.7ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 09:22:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 09:22:57 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "Prueba", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.6ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "Prueba"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 16:22:58.000016"], ["updated_at", "2025-09-16 16:22:58.000016"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 201 Created in 20ms (Views: 1.4ms | ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 09:22:58 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 87.54480000000001, "tax_amount" => 6.4848, "discount_amount" => 0, "status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 6}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (5.5ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 6.48], ["tax_amount", 6.48], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", "Prueba de venta "], ["user_id", 1], ["customer_id", 6], ["created_at", "2025-09-16 16:22:58.448488"], ["updated_at", "2025-09-16 16:22:58.448488"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 40ms (Views: 1.0ms | ActiveRecord: 6.9ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/8/sale_items" for 127.0.0.1 at 2025-09-16 09:22:58 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}, "sale_id" => "8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 8], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Create (4.2ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 2], ["unit_price", 40.53], ["line_total", 81.06], ["sale_id", 8], ["product_id", 17], ["created_at", "2025-09-16 16:22:59.201883"], ["updated_at", "2025-09-16 16:22:59.201883"]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:52:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/sale.rb:174:in 'Sale#customer_name'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 201 Created in 72ms (Views: 1.3ms | ActiveRecord: 7.3ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:22:59 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:73:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.82ms)
Completed 200 OK in 119ms (Views: 1.9ms | ActiveRecord: 3.7ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:25:23 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:25:23 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20250916170000_recalculate_sale_totals.rb


):
  
activerecord (7.2.2.2) lib/active_record/migration.rb:756:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:663:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:95:in 'ActiveSupport::FileUpdateChecker#execute_if_updated'
activerecord (7.2.2.2) lib/active_record/migration.rb:670:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'Thread::Mutex#synchronize'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20250916170000_recalculate_sale_totals.rb


):
  
activerecord (7.2.2.2) lib/active_record/migration.rb:756:in 'ActiveRecord::Migration.check_pending_migrations'
activerecord (7.2.2.2) lib/active_record/migration.rb:663:in 'block (2 levels) in ActiveRecord::Migration::CheckPending#call'
activesupport (7.2.2.2) lib/active_support/file_update_checker.rb:85:in 'ActiveSupport::FileUpdateChecker#execute'
activerecord (7.2.2.2) lib/active_record/migration.rb:668:in 'block in ActiveRecord::Migration::CheckPending#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'Thread::Mutex#synchronize'
activerecord (7.2.2.2) lib/active_record/migration.rb:660:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to RecalculateSaleTotals (20250916170000)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT DISTINCT "sales".* FROM "sales" INNER JOIN "sale_items" ON "sale_items"."sale_id" = "sales"."id" ORDER BY "sales"."id" ASC LIMIT ?[0m  [["LIMIT", 1000]]
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update All (0.3ms)[0m  [1m[33mUPDATE "sales" SET "discount_amount" = ?, "tax_amount" = ?, "total_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["discount_amount", 4.05], ["tax_amount", 6.16], ["total_amount", 83.17], ["updated_at", "2025-09-16 16:25:24.515480"], ["id", 5]]
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update All (0.2ms)[0m  [1m[33mUPDATE "sales" SET "discount_amount" = ?, "tax_amount" = ?, "total_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["discount_amount", 4.05], ["tax_amount", 6.16], ["total_amount", 83.17], ["updated_at", "2025-09-16 16:25:24.522927"], ["id", 6]]
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update All (0.1ms)[0m  [1m[33mUPDATE "sales" SET "discount_amount" = ?, "tax_amount" = ?, "total_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["discount_amount", 0.0], ["tax_amount", 3.24], ["total_amount", 43.77], ["updated_at", "2025-09-16 16:25:24.530096"], ["id", 7]]
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:69:in 'Sale#subtotal'
  [1m[36mSale Update All (0.2ms)[0m  [1m[33mUPDATE "sales" SET "discount_amount" = ?, "tax_amount" = ?, "total_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["discount_amount", 4.05], ["tax_amount", 6.16], ["total_amount", 83.17], ["updated_at", "2025-09-16 16:25:24.538056"], ["id", 8]]
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250916170000') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:25:26 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:25:27 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 114ms (Views: 2.0ms | ActiveRecord: 8.0ms (10 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 190ms (Views: 1.8ms | ActiveRecord: 4.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:25:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 94ms (Views: 2.1ms | ActiveRecord: 5.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:25:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.93ms)
Completed 200 OK in 216ms (Views: 2.0ms | ActiveRecord: 8.4ms (23 queries, 0 cached) | GC: 0.2ms)


  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT DISTINCT "sales".* FROM "sales" INNER JOIN "sale_items" ON "sale_items"."sale_id" = "sales"."id"[0m
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mCACHE SaleItem Sum (0.0ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:27:00 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:27:00 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 100ms (Views: 2.8ms | ActiveRecord: 6.8ms (4 queries, 0 cached) | GC: 0.2ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.4ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (1.4ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.48ms)
Completed 200 OK in 110ms (Views: 2.4ms | ActiveRecord: 8.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:27:02 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:27:04 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 200 OK in 138ms (Views: 1.7ms | ActiveRecord: 6.3ms (23 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSale Create (0.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 0.0], ["tax_amount", 0.0], ["discount_amount", 0.0], ["status", "pending"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 1], ["created_at", "2025-09-16 16:27:51.287815"], ["updated_at", "2025-09-16 16:27:51.287815"]]
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSaleItem Create (2.6ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 1], ["unit_price", 40.53], ["line_total", 40.53], ["sale_id", 9], ["product_id", 17], ["created_at", "2025-09-16 16:27:51.300767"], ["updated_at", "2025-09-16 16:27:51.300767"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (1.5ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 9]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSale Update (0.1ms)[0m  [1m[33mUPDATE "sales" SET "total_amount" = ?, "tax_amount" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["total_amount", 43.77], ["tax_amount", 3.24], ["updated_at", "2025-09-16 16:27:51.311447"], ["id", 9]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 9]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSaleItem Load (3.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 9]]
  [1m[36mSaleItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 5]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 9]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:28:41 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.74ms)
Completed 200 OK in 273ms (Views: 2.2ms | ActiveRecord: 16.8ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:28:57 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:28:57 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.43ms)
Completed 200 OK in 65ms (Views: 1.9ms | ActiveRecord: 3.1ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 35ms (Views: 2.2ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 09:30:11 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:30:11 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 21ms (Views: 1.1ms | ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (4.0ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (1.7ms)
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:30:13 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.4ms)
Completed 200 OK in 106ms (Views: 2.6ms | ActiveRecord: 4.4ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:31:29 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:31:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 49ms (Views: 1.2ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:31:32 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 20ms (Views: 1.2ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:31:34 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.7ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 200 OK in 113ms (Views: 1.7ms | ActiveRecord: 5.4ms (23 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/sales/8/complete" for 127.0.0.1 at 2025-09-16 09:31:37 -0700
Processing by Api::V1::SalesController#complete as HTML
  Parameters: {"id" => "8"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:205:in 'Api::V1::SalesController#set_sale'
  [1m[36mSaleItem Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sale_items" WHERE "sale_items"."sale_id" = ? LIMIT ?[0m  [["sale_id", 8], ["LIMIT", 1]]
  ↳ app/models/sale.rb:103:in 'Sale#can_be_completed?'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:115:in 'block in Sale#complete!'
  [1m[36mSaleItem Load (3.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:115:in 'block in Sale#complete!'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/sale.rb:116:in 'block (2 levels) in Sale#complete!'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 16], ["updated_at", "2025-09-16 16:31:38.062785"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSale Update (0.2ms)[0m  [1m[33mUPDATE "sales" SET "status" = ?, "updated_at" = ? WHERE "sales"."id" = ?[0m  [["status", "completed"], ["updated_at", "2025-09-16 16:31:38.072974"], ["id", 8]]
  ↳ app/models/sale.rb:119:in 'block in Sale#complete!'
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 14], ["updated_at", "2025-09-16 16:31:38.082972"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/sale.rb:113:in 'Sale#complete!'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/sale.rb:175:in 'Sale#customer_name'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:128:in 'Api::V1::SalesController#complete'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 81ms (Views: 1.2ms | ActiveRecord: 9.7ms (15 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:31:38 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 100ms (Views: 1.6ms | ActiveRecord: 4.0ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:31:40 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:31:40 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 42ms (Views: 1.4ms | ActiveRecord: 2.1ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:31:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 20ms (Views: 1.6ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:31:52 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.55ms)
Completed 200 OK in 109ms (Views: 1.5ms | ActiveRecord: 3.8ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:35:08 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:35:08 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 39ms (Views: 1.1ms | ActiveRecord: 1.7ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:35:22 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:35:28 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 95ms (Views: 1.2ms | ActiveRecord: 3.8ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:36:18 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:36:18 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 57ms (Views: 1.3ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 27ms (Views: 1.6ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:36:35 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.12ms)
Completed 200 OK in 20ms (Views: 2.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&stock_status=low_stock" for 127.0.0.1 at 2025-09-16 09:36:43 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "stock_status" => "low_stock"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (stock_quantity <= low_stock_threshold AND stock_quantity > 0) ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 0.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:36:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 20ms (Views: 1.4ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&stock_status=in_stock" for 127.0.0.1 at 2025-09-16 09:36:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "stock_status" => "in_stock"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (stock_quantity > 0) ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.36ms)
Completed 200 OK in 17ms (Views: 1.7ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 09:37:03 -0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/products/17"):
  
Started GET "/api/v1/products?page=1&stock_status=in_stock" for 127.0.0.1 at 2025-09-16 09:37:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1", "stock_status" => "in_stock"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (stock_quantity > 0) ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 18ms (Views: 1.3ms | ActiveRecord: 1.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:37:14 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.74ms)
Completed 200 OK in 115ms (Views: 2.0ms | ActiveRecord: 4.0ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:37:17 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:37:18 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.28ms)
Completed 200 OK in 43ms (Views: 1.3ms | ActiveRecord: 1.9ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 19ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:39:17 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 21ms (Views: 1.4ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:39:20 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.8ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.39ms)
Completed 200 OK in 105ms (Views: 1.1ms | ActiveRecord: 4.5ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:39:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 114ms (Views: 1.8ms | ActiveRecord: 4.0ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:41:17 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:41:49 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 29ms (Views: 0.8ms | ActiveRecord: 1.0ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:41:49 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 0.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:44:43 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:44:46 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 84ms (Views: 1.2ms | ActiveRecord: 3.4ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:44:48 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 112ms (Views: 1.3ms | ActiveRecord: 3.5ms (23 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:45:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 09:46:01 -0700
  
ActionController::RoutingError (No route matches [POST] "/api/v1/products/17"):
  
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:47:47 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.56ms)
Completed 200 OK in 106ms (Views: 1.4ms | ActiveRecord: 3.5ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&status=completed" for 127.0.0.1 at 2025-09-16 09:48:12 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "status" => "completed"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."status" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["status", "completed"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 6], ["id", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 8], ["sale_id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.8ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 45ms (Views: 1.2ms | ActiveRecord: 2.7ms (11 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&status=pending" for 127.0.0.1 at 2025-09-16 09:48:16 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "status" => "pending"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."status" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["status", "pending"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?)[0m  [["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (1.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 75ms (Views: 0.9ms | ActiveRecord: 2.9ms (19 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:48:22 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:48:23 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 46ms (Views: 1.3ms | ActiveRecord: 2.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 16ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:48:31 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:48:32 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.45ms)
Completed 200 OK in 92ms (Views: 1.1ms | ActiveRecord: 3.4ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:49:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 200 OK in 96ms (Views: 1.3ms | ActiveRecord: 3.3ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:49:43 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 09:49:51 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "25", "low_stock_threshold" => "5", "active" => "true"}, "id" => "17"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
Updating product 17 with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "25", "low_stock_threshold" => "5", "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 25], ["updated_at", "2025-09-16 16:49:52.286902"], ["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
Product updated successfully: 17
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 36ms (Views: 0.7ms | ActiveRecord: 7.0ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:49:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:49:58 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:49:58 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 40ms (Views: 2.1ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 18ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:50:03 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.69ms)
Completed 200 OK in 99ms (Views: 1.8ms | ActiveRecord: 3.6ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:50:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:50:30 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:50:30 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 51ms (Views: 1.5ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:51:32 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 1.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:51:33 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.59ms)
Completed 200 OK in 99ms (Views: 1.5ms | ActiveRecord: 3.7ms (23 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:52:32 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:52:32 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 1.7ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 46ms (Views: 1.2ms | ActiveRecord: 2.3ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 09:52:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 17ms (Views: 1.4ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:52:46 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:52:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 38ms (Views: 1.1ms | ActiveRecord: 1.3ms (10 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 09:54:22 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 280ms (Views: 1.7ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 09:54:23 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 41ms (Views: 1.2ms | ActiveRecord: 1.7ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 09:54:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 14ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:54:28 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?)[0m  [["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 71ms (Views: 1.2ms | ActiveRecord: 2.8ms (23 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 09:57:07 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.3ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 16:57:08.069198"], ["updated_at", "2025-09-16 16:57:08.069198"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 17ms (Views: 0.9ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 09:57:08 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"total_amount" => 148.82616, "tax_amount" => 11.02416, "discount_amount" => 24.318, "status" => "completed", "payment_method" => "debit_card", "notes" => "venta de prueba", "customer_id" => 7}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (4.2ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", -13.3], ["tax_amount", 11.02], ["discount_amount", 24.32], ["status", "pending"], ["payment_method", "debit_card"], ["notes", "venta de prueba"], ["user_id", 1], ["customer_id", 7], ["created_at", "2025-09-16 16:57:08.546601"], ["updated_at", "2025-09-16 16:57:08.546601"]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/sale.rb:175:in 'Sale#customer_name'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/controllers/api/v1/sales_controller.rb:82:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 201 Created in 34ms (Views: 1.1ms | ActiveRecord: 5.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales/10/sale_items" for 127.0.0.1 at 2025-09-16 09:57:08 -0700
Processing by Api::V1::SaleItemsController#create as HTML
  Parameters: {"sale_item" => {"product_id" => 17, "quantity" => 4, "unit_price" => "40.53"}, "sale_id" => "10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:117:in 'Api::V1::SaleItemsController#set_sale'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:6:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ? AND "sale_items"."product_id" = ? LIMIT ?[0m  [["sale_id", 10], ["product_id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:18:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Create (3.8ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 4], ["unit_price", 40.53], ["line_total", 162.12], ["sale_id", 10], ["product_id", 17], ["created_at", "2025-09-16 16:57:09.271251"], ["updated_at", "2025-09-16 16:57:09.271251"]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sale_items_controller.rb:51:in 'Api::V1::SaleItemsController#create'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:52:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/models/sale.rb:175:in 'Sale#customer_name'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sale_items_controller.rb:53:in 'Api::V1::SaleItemsController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 53ms (Views: 0.8ms | ActiveRecord: 5.5ms (12 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 09:57:09 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.36ms)
Completed 200 OK in 104ms (Views: 1.0ms | ActiveRecord: 3.9ms (25 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/sales/10/complete" for 127.0.0.1 at 2025-09-16 09:57:52 -0700
Processing by Api::V1::SalesController#complete as HTML
  Parameters: {"id" => "10"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:205:in 'Api::V1::SalesController#set_sale'
  [1m[36mSaleItem Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sale_items" WHERE "sale_items"."sale_id" = ? LIMIT ?[0m  [["sale_id", 10], ["LIMIT", 1]]
  ↳ app/models/sale.rb:103:in 'Sale#can_be_completed?'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/sale.rb:115:in 'block in Sale#complete!'
  [1m[36mSaleItem Load (3.8ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:115:in 'block in Sale#complete!'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/models/sale.rb:116:in 'block (2 levels) in Sale#complete!'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 21], ["updated_at", "2025-09-16 16:57:52.981317"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/models/sale.rb:113:in 'Sale#complete!'
Completed 422 Unprocessable Content in 39ms (ActiveRecord: 5.0ms (7 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::RecordInvalid (Validation failed: Total amount must be greater than or equal to 0):
  
app/models/sale.rb:119:in 'block in Sale#complete!'
app/models/sale.rb:113:in 'Sale#complete!'
app/controllers/api/v1/sales_controller.rb:127:in 'Api::V1::SalesController#complete'
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:00:20 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.39ms)
Completed 200 OK in 94ms (Views: 1.1ms | ActiveRecord: 4.1ms (25 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:01:01 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.59ms)
Completed 200 OK in 243ms (Views: 1.8ms | ActiveRecord: 12.4ms (25 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:01:05 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 200 OK in 81ms (Views: 1.4ms | ActiveRecord: 3.1ms (25 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:01:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 32ms (Views: 1.1ms | ActiveRecord: 2.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:01:14 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:01:15 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 34ms (Views: 1.0ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:06:17 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:06:17 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 33ms (Views: 1.7ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 16ms (Views: 0.7ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:06:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:06:21 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:70:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 200 OK in 100ms (Views: 1.7ms | ActiveRecord: 4.0ms (25 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:06:41 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (5.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:06:41.893105"], ["updated_at", "2025-09-16 17:06:41.893105"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 24ms (Views: 1.2ms | ActiveRecord: 10.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:06:41 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Prueba de venta ", "customer_id" => 8, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 5, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[31mUnpermitted parameter: :sale_items_attributes. Context: { controller: Api::V1::SalesController, action: create, request: #<ActionDispatch::Request:0x0000028ce78e3980>, params: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Prueba de venta ", "customer_id" => 8, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 5, "unit_price" => "40.53"}]}, "controller" => "api/v1/sales", "action" => "create"} }[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.44ms)
Completed 422 Unprocessable Content in 13ms (Views: 3.4ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:09:41 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 200 OK in 251ms (Views: 1.6ms | ActiveRecord: 10.2ms (25 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:09:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 37ms (Views: 1.7ms | ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:10:07 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:10:07.636611"], ["updated_at", "2025-09-16 17:10:07.636611"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 201 Created in 19ms (Views: 1.0ms | ActiveRecord: 7.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:10:07 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Prueba tarjeta de debito ", "customer_id" => 9, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 3, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (9.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.74ms)
Completed 422 Unprocessable Content in 28ms (Views: 1.7ms | ActiveRecord: 9.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:11:07 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.82ms)
Completed 200 OK in 104ms (Views: 1.7ms | ActiveRecord: 3.9ms (25 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:11:21 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.7ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:11:21.695066"], ["updated_at", "2025-09-16 17:11:21.695066"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 16ms (Views: 1.0ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:11:21 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 10, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.43ms)
Completed 422 Unprocessable Content in 17ms (Views: 1.1ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:11:26 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."line_total") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:71:in 'Sale#subtotal'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.47ms)
Completed 200 OK in 92ms (Views: 1.2ms | ActiveRecord: 3.6ms (25 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:11:32 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:11:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 84ms (Views: 1.6ms | ActiveRecord: 4.3ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:183:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:187:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:190:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 108ms (Views: 1.1ms | ActiveRecord: 6.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:11:39 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 18ms (Views: 1.5ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:11:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.75ms)
Completed 200 OK in 86ms (Views: 1.6ms | ActiveRecord: 3.5ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:12:02 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.43ms)
Completed 200 OK in 198ms (Views: 1.6ms | ActiveRecord: 10.0ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:12:05 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 37ms (Views: 1.5ms | ActiveRecord: 2.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:12:13 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.6ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:12:13.416102"], ["updated_at", "2025-09-16 17:12:13.416102"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 22ms (Views: 1.0ms | ActiveRecord: 9.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:12:13 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "customer_id" => 11, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (5.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.44ms)
Completed 422 Unprocessable Content in 20ms (Views: 1.2ms | ActiveRecord: 6.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:12:19 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:12:20.173774"], ["updated_at", "2025-09-16 17:12:20.173774"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 18ms (Views: 0.8ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:12:20 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 12, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 422 Unprocessable Content in 17ms (Views: 1.4ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:13:41 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 619ms (Views: 24.0ms | ActiveRecord: 8.8ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:13:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 77ms (Views: 1.1ms | ActiveRecord: 1.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:13:50 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.8ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:13:51.254676"], ["updated_at", "2025-09-16 17:13:51.254676"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (6.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 21ms (Views: 0.8ms | ActiveRecord: 10.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:13:51 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 13, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (5493.68ms)
Completed 422 Unprocessable Content in 5513ms (Views: 5494.5ms | ActiveRecord: 4.3ms (2 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:14:52 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:14:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 32ms (Views: 0.7ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:15:55 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:15:55 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.31ms)
Completed 200 OK in 139ms (Views: 2.0ms | ActiveRecord: 8.4ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 88ms (Views: 1.2ms | ActiveRecord: 3.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:15:58 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:15:59 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 85ms (Views: 1.4ms | ActiveRecord: 3.5ms (16 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:16:07 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.9ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:16:07.834182"], ["updated_at", "2025-09-16 17:16:07.834182"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 23ms (Views: 0.9ms | ActiveRecord: 8.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:16:07 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 14, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (7.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.37ms)
Completed 422 Unprocessable Content in 27ms (Views: 1.2ms | ActiveRecord: 8.1ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:16:35 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:16:38 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:16:38 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 45ms (Views: 1.3ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:17:22 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 70ms (Views: 1.2ms | ActiveRecord: 2.5ms (16 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:18:01 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (5.3ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:18:01.758608"], ["updated_at", "2025-09-16 17:18:01.758608"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 20ms (Views: 1.2ms | ActiveRecord: 5.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:18:01 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 15, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 422 Unprocessable Content in 19ms (Views: 1.1ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:20:38 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.78ms)
Completed 200 OK in 231ms (Views: 2.3ms | ActiveRecord: 10.0ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:20:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 38ms (Views: 1.2ms | ActiveRecord: 2.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:20:47 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:20:47.860380"], ["updated_at", "2025-09-16 17:20:47.860380"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 20ms (Views: 0.8ms | ActiveRecord: 9.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:20:47 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 16, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (6.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.64ms)
Completed 422 Unprocessable Content in 25ms (Views: 1.3ms | ActiveRecord: 6.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:21:10 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:21:11.048835"], ["updated_at", "2025-09-16 17:21:11.048835"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 16ms (Views: 1.0ms | ActiveRecord: 4.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:21:11 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 17, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (6.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 422 Unprocessable Content in 21ms (Views: 1.2ms | ActiveRecord: 6.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:22:53 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.52ms)
Completed 200 OK in 267ms (Views: 4.5ms | ActiveRecord: 10.0ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:22:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 34ms (Views: 0.7ms | ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:23:00 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.45ms)
Completed 200 OK in 77ms (Views: 1.6ms | ActiveRecord: 3.2ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:23:05 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:23:14 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (5.5ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:23:14.509545"], ["updated_at", "2025-09-16 17:23:14.509545"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 21ms (Views: 1.0ms | ActiveRecord: 9.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:23:14 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 18, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (5.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (820.99ms)
Completed 422 Unprocessable Content in 842ms (Views: 822.0ms | ActiveRecord: 5.6ms (2 queries, 0 cached) | GC: 1.1ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:23:21 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.7ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:23:21.458630"], ["updated_at", "2025-09-16 17:23:21.458630"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 201 Created in 16ms (Views: 1.4ms | ActiveRecord: 4.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:23:21 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 19, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 422 Unprocessable Content in 18ms (Views: 0.9ms | ActiveRecord: 5.3ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:23:38 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:23:39.237884"], ["updated_at", "2025-09-16 17:23:39.237884"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 201 Created in 14ms (Views: 0.9ms | ActiveRecord: 3.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:23:39 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 20, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (5.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 422 Unprocessable Content in 21ms (Views: 1.3ms | ActiveRecord: 5.5ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:23:45 -0700
Processing by Api::V1::SalesController#index as HTML
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.52ms)
Completed 200 OK in 58ms (Views: 1.2ms | ActiveRecord: 2.0ms (15 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:25:01 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.84ms)
Completed 200 OK in 307ms (Views: 5.9ms | ActiveRecord: 10.0ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:25:05 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 36ms (Views: 0.8ms | ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:25:13 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.7ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:25:13.412111"], ["updated_at", "2025-09-16 17:25:13.412111"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (5.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 201 Created in 21ms (Views: 0.7ms | ActiveRecord: 9.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:25:13 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 21, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


  
TypeError (nil can't be coerced into Integer):
  
app/models/sale.rb:70:in 'Integer#+'
app/models/sale.rb:70:in 'Array#sum'
app/models/sale.rb:70:in 'Sale#subtotal'
app/models/sale.rb:193:in 'Sale#calculate_totals'
app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:25:31 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.0ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:25:32.140892"], ["updated_at", "2025-09-16 17:25:32.140892"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 201 Created in 15ms (Views: 1.0ms | ActiveRecord: 4.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:25:32 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "notes" => "Prueba de venta ", "customer_id" => 22, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


  
TypeError (nil can't be coerced into Integer):
  
app/models/sale.rb:70:in 'Integer#+'
app/models/sale.rb:70:in 'Array#sum'
app/models/sale.rb:70:in 'Sale#subtotal'
app/models/sale.rb:193:in 'Sale#calculate_totals'
app/controllers/api/v1/sales_controller.rb:81:in 'Api::V1::SalesController#create'
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:25:53 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 64ms (Views: 0.9ms | ActiveRecord: 2.2ms (16 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:25:58 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:26:09 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:26:09 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 80ms (Views: 1.7ms | ActiveRecord: 4.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 61ms (Views: 0.9ms | ActiveRecord: 3.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:27:01 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:27:01 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 67ms (Views: 1.2ms | ActiveRecord: 4.5ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 102ms (Views: 1.1ms | ActiveRecord: 4.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:27:03 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:27:04 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 99ms (Views: 1.1ms | ActiveRecord: 4.4ms (16 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:27:11 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.9ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:27:11.829461"], ["updated_at", "2025-09-16 17:27:11.829461"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 20ms (Views: 0.9ms | ActiveRecord: 8.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:27:11 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (803.51ms)
Completed 422 Unprocessable Content in 821ms (Views: 804.5ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.3ms)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:33:02 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.48ms)
Completed 200 OK in 75ms (Views: 1.4ms | ActiveRecord: 7.0ms (16 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSale Create (5.7ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 43.77], ["tax_amount", 3.24], ["discount_amount", 0.0], ["status", "completed"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 23], ["created_at", "2025-09-16 17:35:49.061964"], ["updated_at", "2025-09-16 17:35:49.061964"]]
  [1m[36mSaleItem Create (0.2ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 1], ["unit_price", 40.53], ["line_total", 40.53], ["sale_id", 11], ["product_id", 17], ["created_at", "2025-09-16 17:35:49.073529"], ["updated_at", "2025-09-16 17:35:49.073529"]]
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[36mcommit transaction[0m
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:36:54 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 160ms (Views: 1.8ms | ActiveRecord: 7.9ms (17 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:37:04 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => 40.53}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:78:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.41ms)
Completed 422 Unprocessable Content in 20ms (Views: 1.3ms | ActiveRecord: 4.7ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:37:06 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 32ms (Views: 0.9ms | ActiveRecord: 2.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 10:37:06 -0700
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (2.2ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (0.9ms)
Completed 200 OK in 115ms (Views: 0.3ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:37:19 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:37:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 108ms (Views: 1.5ms | ActiveRecord: 6.0ms (10 queries, 0 cached) | GC: 0.0ms)


  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 155ms (Views: 0.9ms | ActiveRecord: 2.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:37:30 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:37:31 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:76:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 232ms (Views: 1.1ms | ActiveRecord: 3.1ms (17 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:37:36 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => 40.53}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:78:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (4.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.41ms)
Completed 422 Unprocessable Content in 19ms (Views: 1.1ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:38:15 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => 40.53}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:78:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 422 Unprocessable Content in 96ms (Views: 1.4ms | ActiveRecord: 9.6ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:41:49 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 1, "unit_price" => 40.53}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:78:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 43.77], ["tax_amount", 3.24], ["discount_amount", 0.0], ["status", "completed"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 23], ["created_at", "2025-09-16 17:41:50.434312"], ["updated_at", "2025-09-16 17:41:50.434312"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.6ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 1], ["unit_price", 40.53], ["line_total", 40.53], ["sale_id", 12], ["product_id", 17], ["created_at", "2025-09-16 17:41:50.438815"], ["updated_at", "2025-09-16 17:41:50.438815"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/sale.rb:175:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 201 Created in 181ms (Views: 1.0ms | ActiveRecord: 67.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:42:29 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.83ms)
Completed 200 OK in 84ms (Views: 1.9ms | ActiveRecord: 3.7ms (18 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 10:42:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 30ms (Views: 1.2ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:42:43 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (4.6ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:42:43.961876"], ["updated_at", "2025-09-16 17:42:43.961876"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 17ms (Views: 1.0ms | ActiveRecord: 5.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:42:43 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "customer_id" => 24, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 3, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (5.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.5ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 118.19], ["tax_amount", 8.75], ["discount_amount", 12.16], ["status", "completed"], ["payment_method", "debit_card"], ["notes", nil], ["user_id", 1], ["customer_id", 24], ["created_at", "2025-09-16 17:42:44.276701"], ["updated_at", "2025-09-16 17:42:44.276701"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.6ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 3], ["unit_price", 40.53], ["line_total", 121.59], ["sale_id", 13], ["product_id", 17], ["created_at", "2025-09-16 17:42:44.282571"], ["updated_at", "2025-09-16 17:42:44.282571"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 24], ["LIMIT", 1]]
  ↳ app/models/sale.rb:175:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.27ms)
Completed 201 Created in 40ms (Views: 1.5ms | ActiveRecord: 7.5ms (6 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:42:44 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.76ms)
Completed 200 OK in 84ms (Views: 1.6ms | ActiveRecord: 3.1ms (19 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:42:48 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 36ms (Views: 0.9ms | ActiveRecord: 1.7ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:42:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:43:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:43:38 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.54ms)
Completed 200 OK in 117ms (Views: 1.6ms | ActiveRecord: 3.1ms (19 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:44:49 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.6ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:74:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.98ms)
Completed 200 OK in 100ms (Views: 2.1ms | ActiveRecord: 3.6ms (19 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:44:51 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:44:51 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 40ms (Views: 1.0ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:44:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:46:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (1.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 45ms (Views: 6.4ms | ActiveRecord: 2.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:46:30 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 42ms (Views: 1.4ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 10:46:48 -0700
Processing by Api::V1::ProductsController#show as */*
  Parameters: {"id" => "17"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 17ms (Views: 1.4ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:48:14 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 24], ["id", 23], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.67ms)
Completed 200 OK in 374ms (Views: 2.5ms | ActiveRecord: 11.5ms (19 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 10:51:09 -0700
Processing by Api::V1::ProductsController#show as */*
  Parameters: {"id" => "17"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 119ms (Views: 1.5ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:51:57 -0700
Processing by Api::V1::SalesController#create as */*
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 23, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => 40.53}]}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:78:in 'Api::V1::SalesController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (6.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 83.17], ["tax_amount", 6.16], ["discount_amount", 4.05], ["status", "completed"], ["payment_method", "cash"], ["notes", nil], ["user_id", 1], ["customer_id", 23], ["created_at", "2025-09-16 17:51:58.126817"], ["updated_at", "2025-09-16 17:51:58.126817"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.3ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 2], ["unit_price", 40.53], ["line_total", 81.06], ["sale_id", 14], ["product_id", 17], ["created_at", "2025-09-16 17:51:58.133283"], ["updated_at", "2025-09-16 17:51:58.133283"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (1.7ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 23], ["updated_at", "2025-09-16 17:51:58.145594"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 23], ["LIMIT", 1]]
  ↳ app/models/sale.rb:176:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 201 Created in 116ms (Views: 1.3ms | ActiveRecord: 16.5ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 10:52:41 -0700
Processing by Api::V1::ProductsController#show as */*
  Parameters: {"id" => "17"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:52:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 20ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:52:53 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:53:47 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.88ms)
Completed 200 OK in 123ms (Views: 2.2ms | ActiveRecord: 4.8ms (20 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 10:53:59 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "General", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (5.0ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "General"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 17:54:00.500995"], ["updated_at", "2025-09-16 17:54:00.500995"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 17ms (Views: 1.0ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 10:54:00 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Prueba de venta ", "customer_id" => 25, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 5, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (6.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.7ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 196.98], ["tax_amount", 14.59], ["discount_amount", 20.27], ["status", "completed"], ["payment_method", "debit_card"], ["notes", "Prueba de venta "], ["user_id", 1], ["customer_id", 25], ["created_at", "2025-09-16 17:54:00.864042"], ["updated_at", "2025-09-16 17:54:00.864042"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.4ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 5], ["unit_price", 40.53], ["line_total", 202.65], ["sale_id", 15], ["product_id", 17], ["created_at", "2025-09-16 17:54:00.869326"], ["updated_at", "2025-09-16 17:54:00.869326"]]
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 18], ["updated_at", "2025-09-16 17:54:00.916302"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:80:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 25], ["LIMIT", 1]]
  ↳ app/models/sale.rb:176:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 201 Created in 89ms (Views: 1.4ms | ActiveRecord: 8.9ms (8 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:54:01 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.81ms)
Completed 200 OK in 133ms (Views: 2.1ms | ActiveRecord: 4.3ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:54:06 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 1.2ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:54:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.99ms)
Completed 200 OK in 127ms (Views: 3.8ms | ActiveRecord: 3.9ms (21 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:54:37 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:54:37 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.9ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 46ms (Views: 1.3ms | ActiveRecord: 2.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:54:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 10:54:51 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (1.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.8ms)
Completed 200 OK in 157ms (Views: 2.1ms | ActiveRecord: 5.9ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=debit_card" for 127.0.0.1 at 2025-09-16 10:54:55 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "debit_card"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "debit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 24], ["id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 13], ["sale_id", 10]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 53ms (Views: 1.3ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=cash" for 127.0.0.1 at 2025-09-16 10:55:03 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "cash"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.6ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "cash"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["id", 23], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 14], ["sale_id", 12], ["sale_id", 11], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.67ms)
Completed 200 OK in 93ms (Views: 1.8ms | ActiveRecord: 3.8ms (18 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 10:55:20 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 10:55:21 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 10:55:21 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.4ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.5ms)
Completed 200 OK in 40ms (Views: 1.6ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:02:10 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 18ms (Views: 1.0ms | ActiveRecord: 3.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:02:12 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 105ms (Views: 1.3ms | ActiveRecord: 3.5ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:06:30 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 11:06:37 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "active" => "true"}, "id" => "17"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:121:in 'Api::V1::ProductsController#set_product'
Updating product 17 with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "20", "low_stock_threshold" => "5", "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 20], ["updated_at", "2025-09-16 18:06:38.582712"], ["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:95:in 'Api::V1::ProductsController#update'
Product updated successfully: 17
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 37ms (Views: 0.9ms | ActiveRecord: 8.3ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:06:38 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:06:43 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:06:44 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.5ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 39ms (Views: 0.9ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:12:42 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (2.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 3.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:12:43 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.94ms)
Completed 200 OK in 96ms (Views: 2.5ms | ActiveRecord: 3.9ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:14:07 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:14:07 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 28ms (Views: 0.7ms | ActiveRecord: 1.4ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 11ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:16:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:16:24 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.56ms)
Completed 200 OK in 90ms (Views: 1.5ms | ActiveRecord: 3.8ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:18:35 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:18:35 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 37ms (Views: 1.1ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:19:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:19:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.15ms)
Completed 200 OK in 136ms (Views: 2.3ms | ActiveRecord: 4.3ms (21 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:19:43 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.53ms)
Completed 200 OK in 98ms (Views: 1.5ms | ActiveRecord: 3.3ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:19:48 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (2.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.78ms)
Completed 200 OK in 117ms (Views: 1.7ms | ActiveRecord: 6.4ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:19:52 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.87ms)
Completed 200 OK in 90ms (Views: 1.8ms | ActiveRecord: 3.0ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:21:52 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:21:53 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 46ms (Views: 1.7ms | ActiveRecord: 2.3ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:22:21 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.34ms)
Completed 200 OK in 273ms (Views: 4.8ms | ActiveRecord: 4.0ms (21 queries, 0 cached) | GC: 0.8ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:22:41 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.8ms)
Completed 200 OK in 140ms (Views: 4.0ms | ActiveRecord: 4.8ms (21 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:22:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.5ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (7.71ms)
Completed 200 OK in 180ms (Views: 9.0ms | ActiveRecord: 4.0ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:22:51 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (2.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.86ms)
Completed 200 OK in 179ms (Views: 1.9ms | ActiveRecord: 7.2ms (21 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:22:54 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:22:54 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 42ms (Views: 1.0ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 1.0ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:23:39 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:23:39 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 46ms (Views: 1.3ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:23:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 18ms (Views: 0.8ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:23:41 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.1ms)
Completed 200 OK in 94ms (Views: 2.0ms | ActiveRecord: 3.5ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:24:28 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:24:29 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:24:30 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 37ms (Views: 1.1ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 20ms (Views: 1.4ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:24:33 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/api/v1/sales_controller.rb:37:in 'Api::V1::SalesController#index'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:40:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.03ms)
Completed 200 OK in 108ms (Views: 2.0ms | ActiveRecord: 4.1ms (21 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:26:51 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:26:51 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 20ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:181:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:182:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:185:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:186:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:188:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:189:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 38ms (Views: 1.2ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:26:54 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/api/v1/products_controller.rb:41:in 'Api::V1::ProductsController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:44:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:29:42 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.58ms)
Completed 200 OK in 413ms (Views: 2.0ms | ActiveRecord: 10.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1&per_page=5&include_total=true" for 127.0.0.1 at 2025-09-16 11:30:03 -0700
Processing by Api::V1::ProductsController#index as */*
  Parameters: {"page" => "1", "per_page" => "5", "include_total" => "true"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 5], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 60ms (Views: 1.1ms | ActiveRecord: 2.3ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&per_page=3&include_total=true" for 127.0.0.1 at 2025-09-16 11:30:15 -0700
Processing by Api::V1::SalesController#index as */*
  Parameters: {"page" => "1", "per_page" => "3", "include_total" => "true"}
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 3], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 48ms (Views: 1.0ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=2&per_page=2&status=completed&sort_by=total_amount&sort_direction=desc" for 127.0.0.1 at 2025-09-16 11:30:27 -0700
Processing by Api::V1::SalesController#index as */*
  Parameters: {"page" => "2", "per_page" => "2", "status" => "completed", "sort_by" => "total_amount", "sort_direction" => "desc"}
  [1m[36mSale Load (1.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."status" = ? ORDER BY "sales"."total_amount" DESC LIMIT ? OFFSET ?[0m  [["status", "completed"], ["LIMIT", 2], ["OFFSET", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 6], ["id", 23]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 8], ["sale_id", 14]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 38ms (Views: 1.4ms | ActiveRecord: 2.5ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:30:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:30:50 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:30:50 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.7ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (1.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.32ms)
Completed 200 OK in 45ms (Views: 1.4ms | ActiveRecord: 3.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:31:56 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:31:56 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 36ms (Views: 0.8ms | ActiveRecord: 1.7ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:32:11 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:32:11 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.98ms)
Completed 200 OK in 36ms (Views: 1.8ms | ActiveRecord: 1.9ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 14ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&per_page=2&status=completed&sort_by=total_amount&sort_direction=desc&include_total=true" for 127.0.0.1 at 2025-09-16 11:34:02 -0700
Processing by Api::V1::SalesController#index as */*
  Parameters: {"page" => "1", "per_page" => "2", "status" => "completed", "sort_by" => "total_amount", "sort_direction" => "desc", "include_total" => "true"}
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."status" = ?[0m  [["status", "completed"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."status" = ? ORDER BY "sales"."total_amount" DESC LIMIT ? OFFSET ?[0m  [["status", "completed"], ["LIMIT", 2], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 25], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 15], ["sale_id", 13]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.39ms)
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?search=vela&sort_by=price&sort_direction=desc&page=1&per_page=5" for 127.0.0.1 at 2025-09-16 11:34:30 -0700
Processing by Api::V1::ProductsController#index as */*
  Parameters: {"search" => "vela", "sort_by" => "price", "sort_direction" => "desc", "page" => "1", "per_page" => "5"}
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (name ILIKE ? OR description ILIKE ? OR sku ILIKE ?)[0m  [[nil, "%vela%"], [nil, "%vela%"], [nil, "%vela%"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: near "ILIKE": syntax error):

Causes:
SQLite3::SQLException (near "ILIKE": syntax error)
  
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:34:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 77ms (Views: 1.9ms | ActiveRecord: 5.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:34:59 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.55ms)
Completed 200 OK in 116ms (Views: 1.2ms | ActiveRecord: 5.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?search=vela&sort_by=price&sort_direction=desc&page=1&per_page=5" for 127.0.0.1 at 2025-09-16 11:35:19 -0700
Processing by Api::V1::ProductsController#index as */*
  Parameters: {"search" => "vela", "sort_by" => "price", "sort_direction" => "desc", "page" => "1", "per_page" => "5"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products" WHERE (LOWER(name) LIKE LOWER(?) OR LOWER(description) LIKE LOWER(?) OR LOWER(sku) LIKE LOWER(?))[0m  [[nil, "%vela%"], [nil, "%vela%"], [nil, "%vela%"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (LOWER(name) LIKE LOWER(?) OR LOWER(description) LIKE LOWER(?) OR LOWER(sku) LIKE LOWER(?)) ORDER BY "products"."price" DESC LIMIT ? OFFSET ?[0m  [[nil, "%vela%"], [nil, "%vela%"], [nil, "%vela%"], ["LIMIT", 5], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 57ms (Views: 1.7ms | ActiveRecord: 3.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:36:02 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.69ms)
Completed 200 OK in 126ms (Views: 1.6ms | ActiveRecord: 5.2ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:36:06 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:36:08 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:36:08 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (1.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 48ms (Views: 0.9ms | ActiveRecord: 2.7ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.0ms)
Completed 200 OK in 16ms (Views: 1.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:37:50 -0700
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:37:50 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.81ms)
Completed 200 OK in 1581ms (Views: 1.9ms | ActiveRecord: 9.8ms (21 queries, 0 cached) | GC: 0.0ms)


[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 1602ms (Views: 111.6ms | ActiveRecord: 3.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:38:24 -0700
Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 11:38:24 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (3.1ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:38:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 11:38:33 -0700
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (9796.8ms)
Completed 200 OK in 9968ms (Views: 0.2ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.3ms)


Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (1.0ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (0.2ms)
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:38:38 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:38:38 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.33ms)
Completed 200 OK in 33ms (Views: 1.2ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:38:40 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:38:40 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 31ms (Views: 1.1ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:38:42 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:38:44 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 200 OK in 82ms (Views: 1.6ms | ActiveRecord: 3.3ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:38:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 14ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 11:38:53 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "26", "low_stock_threshold" => "5", "active" => "true"}, "id" => "17"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:94:in 'Api::V1::ProductsController#set_product'
Updating product 17 with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "test", "stock_quantity" => "26", "low_stock_threshold" => "5", "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 26], ["updated_at", "2025-09-16 18:38:53.542986"], ["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
Product updated successfully: 17
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 32ms (Views: 1.0ms | ActiveRecord: 8.7ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:38:53 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 15ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:38:56 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.64ms)
Completed 200 OK in 84ms (Views: 1.7ms | ActiveRecord: 3.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:40:10 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 1.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:40:10 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:40:14 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:40:16 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.55ms)
Completed 200 OK in 82ms (Views: 1.1ms | ActiveRecord: 2.8ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:41:04 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:41:20 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.61ms)
Completed 200 OK in 74ms (Views: 1.4ms | ActiveRecord: 2.8ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:41:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 17ms (Views: 1.4ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:41:25 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:41:28 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:41:28 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 40ms (Views: 1.2ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:41:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:41:30 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.95ms)
Completed 200 OK in 93ms (Views: 1.8ms | ActiveRecord: 3.2ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:42:00 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:42:00 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 35ms (Views: 0.9ms | ActiveRecord: 1.4ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:42:03 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:42:07 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.07ms)
Completed 200 OK in 96ms (Views: 2.1ms | ActiveRecord: 3.0ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:46:00 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:46:00 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.34ms)
Completed 200 OK in 39ms (Views: 1.2ms | ActiveRecord: 2.3ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:46:02 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 19ms (Views: 0.9ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:46:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 18ms (Views: 1.2ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:47:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 13ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:47:43 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.57ms)
Completed 200 OK in 104ms (Views: 1.3ms | ActiveRecord: 2.9ms (21 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:49:13 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.65ms)
Completed 200 OK in 89ms (Views: 1.5ms | ActiveRecord: 3.5ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products" for 127.0.0.1 at 2025-09-16 11:49:14 -0700
Processing by Api::V1::ProductsController#index as HTML
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 0.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:50:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:50:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.59ms)
Completed 200 OK in 88ms (Views: 1.3ms | ActiveRecord: 3.1ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=credit_card" for 127.0.0.1 at 2025-09-16 11:52:44 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "credit_card"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "credit_card"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "credit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=debit_card" for 127.0.0.1 at 2025-09-16 11:52:46 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "debit_card"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "debit_card"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "debit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 24], ["id", 7]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 13], ["sale_id", 10]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 38ms (Views: 1.1ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:52:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:52:57 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:52:57 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 38ms (Views: 0.8ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:52:59 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:53:00 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.52ms)
Completed 200 OK in 98ms (Views: 1.2ms | ActiveRecord: 3.0ms (21 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:53:09 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:53:09 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 31ms (Views: 0.8ms | ActiveRecord: 1.1ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:53:10 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 11:53:18 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:5:in 'Api::AuthController#login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 256ms (Views: 1.0ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:53:19 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 26ms (Views: 0.7ms | ActiveRecord: 1.4ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:53:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.26ms)
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:53:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.58ms)
Completed 200 OK in 116ms (Views: 3.6ms | ActiveRecord: 3.3ms (21 queries, 0 cached) | GC: 0.2ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 11:55:27 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "Araujo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (6.4ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "Araujo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 18:55:27.977525"], ["updated_at", "2025-09-16 18:55:27.977525"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 201 Created in 23ms (Views: 0.7ms | ActiveRecord: 6.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 11:55:28 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Test notes", "customer_id" => 26, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 7, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (6.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.3ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 275.77], ["tax_amount", 20.43], ["discount_amount", 28.37], ["status", "completed"], ["payment_method", "debit_card"], ["notes", "Test notes"], ["user_id", 1], ["customer_id", 26], ["created_at", "2025-09-16 18:55:28.292005"], ["updated_at", "2025-09-16 18:55:28.292005"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.3ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 7], ["unit_price", 40.53], ["line_total", 283.71], ["sale_id", 16], ["product_id", 17], ["created_at", "2025-09-16 18:55:28.297030"], ["updated_at", "2025-09-16 18:55:28.297030"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 19], ["updated_at", "2025-09-16 18:55:28.309228"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 16]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 26], ["LIMIT", 1]]
  ↳ app/models/sale.rb:176:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 201 Created in 55ms (Views: 1.0ms | ActiveRecord: 8.7ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:55:28 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 26], ["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 16], ["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 16]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.27ms)
Completed 200 OK in 111ms (Views: 2.0ms | ActiveRecord: 3.4ms (22 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:55:59 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:56:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 26], ["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 16], ["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 16]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.54ms)
Completed 200 OK in 88ms (Views: 1.2ms | ActiveRecord: 2.7ms (22 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 11:56:28 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?)[0m  [["id", 26], ["id", 25], ["id", 23], ["id", 24]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 30ms (Views: 1.1ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 11:56:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 0.4ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 11:56:36 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 11:58:20 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["id", 26], ["id", 25], ["id", 23], ["id", 24], ["id", 7], ["id", 6], ["id", 5], ["id", 4], ["id", 3], ["id", 2], ["id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["sale_id", 16], ["sale_id", 15], ["sale_id", 14], ["sale_id", 13], ["sale_id", 12], ["sale_id", 11], ["sale_id", 10], ["sale_id", 8], ["sale_id", 7], ["sale_id", 6], ["sale_id", 5], ["sale_id", 4], ["sale_id", 3], ["sale_id", 2], ["sale_id", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 16]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.42ms)
Completed 200 OK in 87ms (Views: 2.3ms | ActiveRecord: 3.0ms (22 queries, 0 cached) | GC: 0.0ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to EnhanceUserSecurity (20250916190248)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (7.2ms)[0m  [1m[35mALTER TABLE "users" ADD "active" boolean DEFAULT 1 NOT NULL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "failed_attempts" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "locked_at" datetime(6)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "unlock_token" varchar[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "two_factor_backup_codes" text[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "password_changed_at" datetime(6)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "must_change_password" boolean DEFAULT 0 NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "session_token" varchar[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmation_token" varchar[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "confirmed_at" datetime(6)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" varchar[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" datetime(6)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_users_on_active" ON "users" ("active")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_users_on_unlock_token" ON "users" ("unlock_token")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_users_on_session_token" ON "users" ("session_token")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_users_on_confirmation_token" ON "users" ("confirmation_token")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_users_on_failed_attempts" ON "users" ("failed_attempts")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250916190248') RETURNING "version"[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 1]]
  [1m[36mSale Destroy (0.6ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 1]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 2]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 2]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 3]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 3]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 4]]
  [1m[36mSale Destroy (0.3ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 4]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 5]]
  [1m[36mSaleItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 1]]
  [1m[36mSale Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 5]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 6]]
  [1m[36mSaleItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 2]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 6]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 7]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 3]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 7]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 8]]
  [1m[36mSaleItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 4]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 8]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 10]]
  [1m[36mSaleItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 6]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 10]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 11]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 7]]
  [1m[36mSale Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 11]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 12]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 8]]
  [1m[36mSale Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 12]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 13]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 9]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 13]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 14]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 10]]
  [1m[36mSale Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 14]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 15]]
  [1m[36mSaleItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 11]]
  [1m[36mSale Destroy (0.1ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 15]]
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 16]]
  [1m[36mSaleItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "sale_items" WHERE "sale_items"."id" = ?[0m  [["id", 12]]
  [1m[36mSale Destroy (0.3ms)[0m  [1m[31mDELETE FROM "sales" WHERE "sales"."id" = ?[0m  [["id", 16]]
  [1m[36mUser Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (6.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "first_name", "last_name", "role", "password_digest", "two_factor_secret", "two_factor_enabled", "phone", "last_sign_in_at", "current_sign_in_at", "sign_in_count", "created_at", "updated_at", "active", "failed_attempts", "locked_at", "unlock_token", "two_factor_backup_codes", "password_changed_at", "must_change_password", "session_token", "confirmation_token", "confirmed_at", "reset_password_token", "reset_password_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["email", "[FILTERED]"], ["first_name", "Admin"], ["last_name", "User"], ["role", "admin"], ["password_digest", "[FILTERED]"], ["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["phone", nil], ["last_sign_in_at", nil], ["current_sign_in_at", nil], ["sign_in_count", 0], ["created_at", "2025-09-16 19:48:43.801004"], ["updated_at", "2025-09-16 19:48:43.801004"], ["active", 1], ["failed_attempts", 0], ["locked_at", nil], ["unlock_token", "[FILTERED]"], ["two_factor_backup_codes", nil], ["password_changed_at", "[FILTERED]"], ["must_change_password", "[FILTERED]"], ["session_token", "[FILTERED]"], ["confirmation_token", "[FILTERED]"], ["confirmed_at", "2025-09-16 19:48:43.422432"], ["reset_password_token", "[FILTERED]"], ["reset_password_sent_at", "[FILTERED]"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 12:49:34 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (6.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (4.9ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["current_sign_in_at", "2025-09-16 19:49:36.509916"], ["sign_in_count", 1], ["updated_at", "2025-09-16 19:49:36.516525"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 19:49:36.543206"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.51ms)
Completed 200 OK in 521ms (Views: 4.0ms | ActiveRecord: 22.5ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 12:50:10 -0700
  
ActionController::RoutingError (uninitialized constant Api::V1::TwoFactorsController):

Causes:
ActionDispatch::MissingController (uninitialized constant Api::V1::TwoFactorsController)
NameError (uninitialized constant Api::V1::TwoFactorsController)
  
Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 12:52:01 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 78ms (Views: 3.5ms | ActiveRecord: 3.6ms (2 queries, 1 cached) | GC: 0.0ms)


Started POST "/api/v1/two_factor/setup" for 127.0.0.1 at 2025-09-16 12:52:27 -0700
Processing by Api::V1::TwoFactorController#setup as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "two_factor_secret" = ?, "two_factor_enabled" = ?, "updated_at" = ?, "two_factor_backup_codes" = ? WHERE "users"."id" = ?[0m  [["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 1], ["updated_at", "2025-09-16 19:52:27.668819"], ["two_factor_backup_codes", "[\"0FE2A03F\",\"CF5C42B2\",\"F726FE58\",\"DC0E3583\",\"AA1A8C00\",\"9E402E3A\",\"30755960\",\"BE4A7D66\",\"B163160E\",\"B49B7689\"]"], ["id", 2]]
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 31ms (Views: 1.1ms | ActiveRecord: 8.3ms (4 queries, 1 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 12:53:31 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 19:53:32.211883"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 401 Unauthorized in 370ms (Views: 2.0ms | ActiveRecord: 6.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 12:54:22 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (5.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 19:54:23.279060"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 351ms (Views: 1.2ms | ActiveRecord: 6.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 12:55:04 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 328ms (Views: 0.6ms | ActiveRecord: 5.2ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 12:58:09 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "000000", "auth" => {"user_id" => 2, "code" => "000000"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:71:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 19:58:10.327422"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 401 Unauthorized in 26ms (Views: 0.9ms | ActiveRecord: 5.1ms (3 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ test_2fa_flow.rb:11:in '<main>'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ test_2fa_flow.rb:13:in '<main>'
  [1m[36mUser Exists? (5.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ test_2fa_flow.rb:13:in '<main>'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "two_factor_secret" = ?, "two_factor_enabled" = ?, "updated_at" = ?, "two_factor_backup_codes" = ? WHERE "users"."id" = ?[0m  [["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 0], ["updated_at", "2025-09-16 20:00:06.628010"], ["two_factor_backup_codes", nil], ["id", 2]]
  ↳ test_2fa_flow.rb:13:in '<main>'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ test_2fa_flow.rb:13:in '<main>'
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 13:00:18 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "278640", "auth" => {"user_id" => 2, "code" => "278640"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:71:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (5.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:00:19.049080"], ["failed_attempts", 2], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 401 Unauthorized in 27ms (Views: 1.1ms | ActiveRecord: 6.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:01:04 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:01:05.369220"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 19:49:36.509916"], ["current_sign_in_at", "2025-09-16 20:01:05.375794"], ["sign_in_count", 2], ["updated_at", "2025-09-16 20:01:05.384348"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:01:05.398618"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 384ms (Views: 0.6ms | ActiveRecord: 14.1ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:01:05 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:01:05 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 48ms (Views: 0.9ms | ActiveRecord: 2.4ms (7 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.4ms)
Completed 200 OK in 344ms (Views: 1.2ms | ActiveRecord: 3.3ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 13:01:12 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:01:13 -0700
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (2.8ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (2.0ms)
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:01:14 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:01:24 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:01:24 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 27ms (Views: 1.0ms | ActiveRecord: 1.3ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:01:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:01:30 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 13:01:52 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Jorge", "last_name" => "Araujo", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (3.8ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Jorge"], ["last_name", "Araujo"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 20:01:53.510104"], ["updated_at", "2025-09-16 20:01:53.510104"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 201 Created in 25ms (Views: 0.9ms | ActiveRecord: 4.9ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 13:01:53 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "cash", "customer_id" => 27, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 2, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (7.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.4ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 83.17], ["tax_amount", 6.16], ["discount_amount", 4.05], ["status", "completed"], ["payment_method", "cash"], ["notes", nil], ["user_id", 2], ["customer_id", 27], ["created_at", "2025-09-16 20:01:54.324955"], ["updated_at", "2025-09-16 20:01:54.324955"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (0.3ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 2], ["unit_price", 40.53], ["line_total", 81.06], ["sale_id", 17], ["product_id", 17], ["created_at", "2025-09-16 20:01:54.331315"], ["updated_at", "2025-09-16 20:01:54.331315"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 17], ["updated_at", "2025-09-16 20:01:54.344500"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 27], ["LIMIT", 1]]
  ↳ app/models/sale.rb:176:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 201 Created in 95ms (Views: 1.2ms | ActiveRecord: 10.6ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:01:54 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.3ms)
Completed 200 OK in 40ms (Views: 1.3ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 13:02:11 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:02:11 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:02:11 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:02:11.549153"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 4.9ms (3 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (1.9ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 41ms (Views: 0.9ms | ActiveRecord: 3.2ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 17ms (Views: 0.9ms | ActiveRecord: 1.2ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:02:28 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (5.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:02:29.740117"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 401 Unauthorized in 357ms (Views: 0.7ms | ActiveRecord: 6.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:02:38 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:02:39.492687"], ["failed_attempts", 2], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 401 Unauthorized in 372ms (Views: 1.0ms | ActiveRecord: 6.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:02:53 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:02:54.356602"], ["failed_attempts", 3], ["id", 2]]
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:49:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 401 Unauthorized in 368ms (Views: 0.7ms | ActiveRecord: 5.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:03:02 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:03:03.468940"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:01:05.375794"], ["current_sign_in_at", "2025-09-16 20:03:03.475066"], ["sign_in_count", 3], ["updated_at", "2025-09-16 20:03:03.484156"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:03:03.499319"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 391ms (Views: 0.6ms | ActiveRecord: 14.4ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:03:03 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:03:03 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 42ms (Views: 1.4ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 22ms (Views: 1.2ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:03:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 18ms (Views: 1.6ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:03:30 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 26ms (Views: 0.9ms | ActiveRecord: 1.0ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:03:44 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:03:44 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 45ms (Views: 1.2ms | ActiveRecord: 2.1ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 18ms (Views: 1.3ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 13:03:47 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:03:48.147241"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 23ms (Views: 1.0ms | ActiveRecord: 5.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:09:30 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (4.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (4.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:03:03.475066"], ["current_sign_in_at", "2025-09-16 20:09:31.155765"], ["sign_in_count", 4], ["updated_at", "2025-09-16 20:09:31.160666"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:09:31.183844"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 314ms (Views: 0.9ms | ActiveRecord: 20.4ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:09:31 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:09:31 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.5ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 42ms (Views: 0.9ms | ActiveRecord: 2.6ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 18ms (Views: 1.2ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:09:37 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:10:49 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 2.2ms (8 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:11:11 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:11:11 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (1.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 32ms (Views: 0.8ms | ActiveRecord: 2.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 2.6ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:16:11 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:16:11 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 60ms (Views: 5.0ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 23ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:16:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 28ms (Views: 7.4ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:16:19 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 36ms (Views: 0.9ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:16:26 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:16:27 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 38ms (Views: 0.9ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (3.91ms)
Completed 200 OK in 24ms (Views: 4.7ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:16:28 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 22ms (Views: 1.4ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:17:23 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 20ms (Views: 1.3ms | ActiveRecord: 0.9ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:17:32 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:17:32 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 40ms (Views: 0.9ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 18ms (Views: 1.0ms | ActiveRecord: 1.1ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:17:34 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 39ms (Views: 1.1ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:17:40 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 53ms (Views: 1.1ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:18:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 17ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:18:15 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:18:15 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 40ms (Views: 0.9ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 18ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:19:36 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:19:36 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 39ms (Views: 0.9ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 16ms (Views: 0.6ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:20:56 -0700
Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:20:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.69ms)
Completed 200 OK in 37ms (Views: 15.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 41ms (Views: 1.1ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 13:21:05 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:21:05.876234"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 30ms (Views: 1.4ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:21:18 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (10.5ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:09:31.155765"], ["current_sign_in_at", "2025-09-16 20:21:19.442667"], ["sign_in_count", 5], ["updated_at", "2025-09-16 20:21:19.448359"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:21:19.476569"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 406ms (Views: 0.9ms | ActiveRecord: 21.6ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:21:19 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:21:19 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 35ms (Views: 1.2ms | ActiveRecord: 1.6ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:22:57 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:22:57 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 36ms (Views: 1.1ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 21ms (Views: 1.6ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:23:05 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 24ms (Views: 1.5ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:23:06 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:23:06 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 43ms (Views: 1.2ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.2ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:23:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:23:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 47ms (Views: 1.0ms | ActiveRecord: 1.3ms (8 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:23:38 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:23:38 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.5ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 42ms (Views: 1.2ms | ActiveRecord: 2.3ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:24:16 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:24:16 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 62ms (Views: 3.5ms | ActiveRecord: 1.9ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 0.8ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 13:24:36 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 19ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 13:24:50 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 36ms (Views: 1.4ms | ActiveRecord: 1.4ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:25:18 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:25:18 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 34ms (Views: 1.2ms | ActiveRecord: 1.3ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 13:25:35 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:25:35.916218"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 20ms (Views: 0.7ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:26:21 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (3.8ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:21:19.442667"], ["current_sign_in_at", "2025-09-16 20:26:22.644660"], ["sign_in_count", 6], ["updated_at", "2025-09-16 20:26:22.649583"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:144:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:26:22.670354"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:208:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 389ms (Views: 0.7ms | ActiveRecord: 14.2ms (6 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:26:22 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:26:23 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.4ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 42ms (Views: 1.2ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 13:27:46 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 13:27:46 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 36ms (Views: 1.0ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 13:27:49 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 0.2ms (2 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 13:28:09 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.2ms (2 queries, 1 cached) | GC: 0.0ms)


Started POST "/api/v1/two_factor/setup" for 127.0.0.1 at 2025-09-16 13:28:14 -0700
Processing by Api::V1::TwoFactorController#setup as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "two_factor_secret" = ?, "two_factor_enabled" = ?, "updated_at" = ?, "two_factor_backup_codes" = ? WHERE "users"."id" = ?[0m  [["two_factor_secret", "[FILTERED]"], ["two_factor_enabled", 1], ["updated_at", "2025-09-16 20:28:14.844416"], ["two_factor_backup_codes", "[\"9C3B3E7B\",\"1E27998E\",\"B32260B5\",\"21D5A1ED\",\"EC778D19\",\"D694843C\",\"F07E6C60\",\"2553D340\",\"18CE8DA4\",\"A135D6DE\"]"], ["id", 2]]
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:84:in 'User#setup_two_factor!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 25ms (Views: 0.7ms | ActiveRecord: 5.2ms (4 queries, 1 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 13:28:39 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:28:39.979290"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:213:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 23ms (Views: 0.8ms | ActiveRecord: 4.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:28:46 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.21ms)
Completed 200 OK in 350ms (Views: 1.1ms | ActiveRecord: 5.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:29:25 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (25.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:53:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 328ms (Views: 0.8ms | ActiveRecord: 25.4ms (2 queries, 0 cached) | GC: 0.3ms)


  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddSmsFieldsToUsers (20250916203331)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (6.1ms)[0m  [1m[35mALTER TABLE "users" ADD "phone_number" varchar[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "sms_verification_enabled" boolean DEFAULT 0[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "sms_verification_code" varchar[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "sms_code_expires_at" datetime(6)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "phone_verified_at" datetime(6)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_phone_number" ON "users" ("phone_number")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250916203331') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:44:33 -0700
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 319ms (Views: 2.1ms | ActiveRecord: 7.6ms (2 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."phone_number" = ? AND "users"."id" != ? LIMIT ?[0m  [["phone_number", "+573001234567"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "phone_number" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:44:57.724255"], ["phone_number", "+573001234567"], ["sms_verification_code", "576038"], ["sms_code_expires_at", "2025-09-16 20:54:57.718958"], ["id", 2]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[36mcommit transaction[0m
SMS enviado a +573001234567: 576038
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ?, "phone_verified_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:45:27.902515"], ["sms_verification_code", nil], ["sms_code_expires_at", nil], ["phone_verified_at", "2025-09-16 20:45:27.896144"], ["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:47:41 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 264ms (Views: 0.7ms | ActiveRecord: 6.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:49:08 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 267ms (Views: 0.7ms | ActiveRecord: 4.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 13:49:19 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "576038", "method" => "totp", "auth" => {"user_id" => 2, "code" => "576038", "method" => "totp"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:49:19.738293"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 401 Unauthorized in 19ms (Views: 0.8ms | ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:50:54.236376"], ["sms_verification_code", "626642"], ["sms_code_expires_at", "2025-09-16 21:00:54.229658"], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
SMS enviado a +573001234567: 626642
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "phone_verified_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:51:58.829188"], ["phone_verified_at", "2025-09-16 20:51:58.819322"], ["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_enabled" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:52:24.172246"], ["sms_verification_enabled", 1], ["id", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:52:40 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:52:41.400335"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 263ms (Views: 0.7ms | ActiveRecord: 3.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 13:52:58 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:52:58.781193"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 352062
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 169ms (Views: 0.9ms | ActiveRecord: 3.3ms (3 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 13:54:15 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "626642", "method" => "sms", "auth" => {"user_id" => 2, "code" => "626642", "method" => "sms"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:54:15.800317"], ["id", 2]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (7.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:26:22.644660"], ["current_sign_in_at", "2025-09-16 20:54:15.806972"], ["sign_in_count", 7], ["updated_at", "2025-09-16 20:54:15.818801"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:54:15.832556"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 58ms (Views: 0.8ms | ActiveRecord: 17.4ms (7 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 13:55:12 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 281ms (Views: 0.9ms | ActiveRecord: 7.8ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 13:55:31 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "626642", "method" => "totp", "auth" => {"user_id" => 2, "code" => "626642", "method" => "totp"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (3.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 20:55:32.140776"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 401 Unauthorized in 22ms (Views: 1.2ms | ActiveRecord: 3.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 14:01:34 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:35.119687"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 371ms (Views: 0.9ms | ActiveRecord: 10.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:01:40 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:40.467501"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 058055
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 4.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:01:46 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (5.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:46.916602"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 675001
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 24ms (Views: 1.1ms | ActiveRecord: 6.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:01:51 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (9.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:51.703111"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 362379
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 28ms (Views: 1.0ms | ActiveRecord: 10.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:01:54 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:54.953737"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 164582
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 23ms (Views: 1.0ms | ActiveRecord: 4.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:01:58 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:01:59.362069"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 379953
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 27ms (Views: 0.7ms | ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:02:32 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (5.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:02:32.481519"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 617530
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 32ms (Views: 0.8ms | ActiveRecord: 6.3ms (3 queries, 0 cached) | GC: 0.2ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:03:28 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:03:28.328102"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 625108
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 19ms (Views: 1.0ms | ActiveRecord: 4.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:03:37 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "625108", "method" => "sms", "auth" => {"user_id" => 2, "code" => "625108", "method" => "sms"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:03:37.877781"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 401 Unauthorized in 27ms (Views: 1.1ms | ActiveRecord: 4.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:03:44 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "625108", "method" => "totp", "auth" => {"user_id" => 2, "code" => "625108", "method" => "totp"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:03:44.575295"], ["failed_attempts", 2], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 401 Unauthorized in 30ms (Views: 7.4ms | ActiveRecord: 4.9ms (3 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 14:06:24 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (9.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:06:24.963095"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 366ms (Views: 3.2ms | ActiveRecord: 10.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:06:27 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (6.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:06:28.303753"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 536459
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 31ms (Views: 1.9ms | ActiveRecord: 7.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:06:43 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "536459", "method" => "sms", "auth" => {"user_id" => 2, "code" => "536459", "method" => "sms"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:06:43.718860"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 401 Unauthorized in 24ms (Views: 1.1ms | ActiveRecord: 3.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:06:52 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "536459", "method" => "totp", "auth" => {"user_id" => 2, "code" => "536459", "method" => "totp"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (3.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:06:53.137035"], ["failed_attempts", 2], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 401 Unauthorized in 22ms (Views: 1.3ms | ActiveRecord: 4.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:07:30 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "626642", "method" => "totp", "auth" => {"user_id" => 2, "code" => "626642", "method" => "totp"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (5.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:07:30.670431"], ["failed_attempts", 3], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 401 Unauthorized in 32ms (Views: 1.8ms | ActiveRecord: 6.5ms (3 queries, 0 cached) | GC: 0.0ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:07:47.168892"], ["sms_verification_code", "080061"], ["sms_code_expires_at", "2025-09-16 21:17:47.153836"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 080061
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:08:22 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "080061", "method" => "sms", "auth" => {"user_id" => 2, "code" => "080061", "method" => "sms"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Exists? (4.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:08:23.153794"], ["id", 2]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 20:54:15.806972"], ["current_sign_in_at", "2025-09-16 21:08:23.160559"], ["sign_in_count", 8], ["updated_at", "2025-09-16 21:08:23.175097"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:08:23.191705"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 58ms (Views: 0.8ms | ActiveRecord: 14.9ms (7 queries, 0 cached) | GC: 0.2ms)


  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:08:52.305531"], ["sms_verification_code", "498666"], ["sms_code_expires_at", "2025-09-16 21:18:52.291600"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 498666
Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 14:10:59 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.1ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:00.411266"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 345ms (Views: 2.5ms | ActiveRecord: 14.9ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:11:03 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "498666", "method" => "totp", "auth" => {"user_id" => 2, "code" => "498666", "method" => "totp"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:04.200729"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 401 Unauthorized in 21ms (Views: 1.0ms | ActiveRecord: 5.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:11:08 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:08.463094"], ["sms_verification_code", "945401"], ["sms_code_expires_at", "2025-09-16 21:21:08.454160"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 945401
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 26ms (Views: 1.1ms | ActiveRecord: 4.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/debug/sms_code" for 127.0.0.1 at 2025-09-16 14:11:08 -0700
Processing by Api::DebugController#sms_code as */*
  Parameters: {"user_id" => 2, "debug" => {"user_id" => 2}}
Completed 404 Not Found in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The index action could not be found for the :authenticate_request
callback on Api::DebugController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:11:17 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (5.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:17.744461"], ["sms_verification_code", "805611"], ["sms_code_expires_at", "2025-09-16 21:21:17.734134"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 805611
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.71ms)
Completed 200 OK in 27ms (Views: 2.4ms | ActiveRecord: 6.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/debug/sms_code" for 127.0.0.1 at 2025-09-16 14:11:18 -0700
Processing by Api::DebugController#sms_code as */*
  Parameters: {"user_id" => 2, "debug" => {"user_id" => 2}}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The index action could not be found for the :authenticate_request
callback on Api::DebugController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:11:33 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "805611", "method" => "sms", "auth" => {"user_id" => 2, "code" => "805611", "method" => "sms"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ?, "phone_verified_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:33.456401"], ["sms_verification_code", nil], ["sms_code_expires_at", nil], ["phone_verified_at", "2025-09-16 21:11:33.446922"], ["id", 2]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (4.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 21:08:23.160559"], ["current_sign_in_at", "2025-09-16 21:11:33.463879"], ["sign_in_count", 9], ["updated_at", "2025-09-16 21:11:33.474771"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (5.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:11:33.540117"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 105ms (Views: 0.9ms | ActiveRecord: 15.1ms (7 queries, 0 cached) | GC: 0.3ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:11:33 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:11:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 178ms (Views: 1.9ms | ActiveRecord: 3.2ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.3ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 93ms (Views: 0.8ms | ActiveRecord: 3.7ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:11:41 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:11:41 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.35ms)
Completed 200 OK in 22ms (Views: 1.7ms | ActiveRecord: 1.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.4ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.7ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 45ms (Views: 1.3ms | ActiveRecord: 2.7ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 14:11:48 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 0.2ms (2 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 14:12:06 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 0.2ms (2 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:12:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (1.5ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.29ms)
Completed 200 OK in 228ms (Views: 1.6ms | ActiveRecord: 3.6ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80" for 127.0.0.1 at 2025-09-16 14:12:11 -0700
Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:12:12 -0700
Processing by Api::V1::ImagesController#show as HTML
  Parameters: {"signed_id" => "eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80"}
Serving image with signed_id: eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/images_controller.rb:9:in 'Api::V1::ImagesController#show'
Found blob: Gemini_Generated_Image_7p0o787p0o787p0o.png, content_type: image/png
[36m  Disk Storage (2.8ms) [0m[34mDownloaded file from key: cmfhlr266zt4wlmo3ais7ar21kmz[0m
Sent data Gemini_Generated_Image_7p0o787p0o787p0o.png (2.4ms)
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 23ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:12:13 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 35ms (Views: 0.8ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:12:13 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.41ms)
Completed 200 OK in 18ms (Views: 1.4ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 14:12:22 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:12:23.148236"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 5.0ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 14:12:33 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:12:34.056568"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 5.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:12:37 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:12:38.106872"], ["sms_verification_code", "260027"], ["sms_code_expires_at", "2025-09-16 21:22:38.098348"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 260027
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 21ms (Views: 1.6ms | ActiveRecord: 3.8ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/debug/sms_code" for 127.0.0.1 at 2025-09-16 14:12:38 -0700
Processing by Api::DebugController#sms_code as */*
  Parameters: {"user_id" => 2, "debug" => {"user_id" => 2}}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The index action could not be found for the :authenticate_request
callback on Api::DebugController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:12:49 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "805011", "method" => "sms", "auth" => {"user_id" => 2, "code" => "805011", "method" => "sms"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:12:49.629130"], ["failed_attempts", 1], ["id", 2]]
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:52:in 'User#increment_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 401 Unauthorized in 18ms (Views: 0.7ms | ActiveRecord: 4.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:13:01 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "260027", "method" => "sms", "auth" => {"user_id" => 2, "code" => "260027", "method" => "sms"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Exists? (5.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ?, "phone_verified_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:13:01.888066"], ["sms_verification_code", nil], ["sms_code_expires_at", nil], ["phone_verified_at", "2025-09-16 21:13:01.878423"], ["id", 2]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 21:11:33.463879"], ["current_sign_in_at", "2025-09-16 21:13:01.895826"], ["sign_in_count", 10], ["updated_at", "2025-09-16 21:13:01.905311"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (4.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:13:01.920312"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 53ms (Views: 1.1ms | ActiveRecord: 15.1ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:13:01 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 36ms (Views: 0.9ms | ActiveRecord: 1.5ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:13:02 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:13:11 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.43ms)
Completed 200 OK in 18ms (Views: 1.6ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:13:13 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 30ms (Views: 0.8ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 14:13:20 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.2ms (2 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:13:48 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.5ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:13:48 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:13:50 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.39ms)
Completed 200 OK in 21ms (Views: 1.8ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:13:52 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.1ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 34ms (Views: 1.0ms | ActiveRecord: 1.2ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:14:00 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (18.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.4ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 96ms (Views: 2.1ms | ActiveRecord: 20.4ms (8 queries, 0 cached) | GC: 0.2ms)


Started POST "/api/v1/customers" for 127.0.0.1 at 2025-09-16 14:14:35 -0700
Processing by Api::V1::CustomersController#create as HTML
  Parameters: {"customer" => {"first_name" => "Alfonso", "last_name" => "Trejo Robles", "email" => "[FILTERED]", "phone" => "000-000-0000", "address" => ""}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mCustomer Create (8.6ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "email", "phone", "address", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["first_name", "Alfonso"], ["last_name", "Trejo Robles"], ["email", "[FILTERED]"], ["phone", "0000000000"], ["address", ""], ["created_at", "2025-09-16 21:14:35.938699"], ["updated_at", "2025-09-16 21:14:35.938699"]]
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/customers_controller.rb:58:in 'Api::V1::CustomersController#create'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 201 Created in 34ms (Views: 1.1ms | ActiveRecord: 9.0ms (2 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/sales" for 127.0.0.1 at 2025-09-16 14:14:36 -0700
Processing by Api::V1::SalesController#create as HTML
  Parameters: {"sale" => {"status" => "completed", "payment_method" => "debit_card", "notes" => "Prueba para usuario admin ", "customer_id" => 28, "sale_items_attributes" => [{"product_id" => 17, "quantity" => 3, "unit_price" => "40.53"}]}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Load (8.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSale Create (0.4ms)[0m  [1m[32mINSERT INTO "sales" ("total_amount", "tax_amount", "discount_amount", "status", "payment_method", "notes", "user_id", "customer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["total_amount", 118.19], ["tax_amount", 8.75], ["discount_amount", 12.16], ["status", "completed"], ["payment_method", "debit_card"], ["notes", "Prueba para usuario admin "], ["user_id", 2], ["customer_id", 28], ["created_at", "2025-09-16 21:14:36.623201"], ["updated_at", "2025-09-16 21:14:36.623201"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Create (2.1ms)[0m  [1m[32mINSERT INTO "sale_items" ("quantity", "unit_price", "line_total", "sale_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["quantity", 3], ["unit_price", 40.53], ["line_total", 121.59], ["sale_id", 18], ["product_id", 17], ["created_at", "2025-09-16 21:14:36.629532"], ["updated_at", "2025-09-16 21:14:36.629532"]]
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mProduct Update (0.1ms)[0m  [1m[33mUPDATE "products" SET "stock_quantity" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["stock_quantity", 14], ["updated_at", "2025-09-16 21:14:36.644710"], ["id", 17]]
  ↳ app/models/product.rb:82:in 'Product#decrease_stock!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/sales_controller.rb:56:in 'Api::V1::SalesController#create'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/models/sale.rb:176:in 'Sale#customer_name'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 201 Created in 88ms (Views: 1.2ms | ActiveRecord: 12.6ms (8 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:14:36 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 37ms (Views: 1.1ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:15:18 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:15:19 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 51ms (Views: 1.3ms | ActiveRecord: 2.4ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 25ms (Views: 1.4ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:15:24 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 200 OK in 28ms (Views: 3.5ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started PATCH "/api/v1/products/17" for 127.0.0.1 at 2025-09-16 14:15:41 -0700
Processing by Api::V1::ProductsController#update as */*
  Parameters: {"product" => {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "Hogar", "stock_quantity" => "14", "low_stock_threshold" => "5", "active" => "true"}, "id" => "17"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:94:in 'Api::V1::ProductsController#set_product'
Updating product 17 with params: #<ActionController::Parameters {"name" => "Prueba producto vela ", "description" => "vela prueba", "price" => "40.53", "sku" => "TEST0010", "category" => "Hogar", "stock_quantity" => "14", "low_stock_threshold" => "5", "active" => "true"} permitted: true>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Exists? (7.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE LOWER("products"."sku") = LOWER(?) AND "products"."id" != ? LIMIT ?[0m  [["sku", "TEST0010"], ["id", 17], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mProduct Update (0.2ms)[0m  [1m[33mUPDATE "products" SET "category" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["category", "Hogar"], ["updated_at", "2025-09-16 21:15:41.733354"], ["id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/v1/products_controller.rb:68:in 'Api::V1::ProductsController#update'
Product updated successfully: 17
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = ? AND "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? LIMIT ?[0m  [["record_id", 17], ["record_type", "Product"], ["name", "image"], ["LIMIT", 1]]
  ↳ app/models/product.rb:95:in 'Product#image_url'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 45ms (Views: 0.8ms | ActiveRecord: 8.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:15:42 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.97ms)
Completed 200 OK in 26ms (Views: 3.5ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:15:56 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 33ms (Views: 1.4ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:15:59 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 54ms (Views: 1.5ms | ActiveRecord: 2.3ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:16:01 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 47ms (Views: 0.9ms | ActiveRecord: 2.2ms (10 queries, 0 cached) | GC: 0.2ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:16:01 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 200 OK in 18ms (Views: 0.8ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:17:08 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:17:09 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.5ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 39ms (Views: 1.3ms | ActiveRecord: 1.8ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/two_factor" for 127.0.0.1 at 2025-09-16 14:17:13 -0700
Processing by Api::V1::TwoFactorController#show as */*
  Parameters: {"two_factor" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.1ms (2 queries, 1 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:17:27 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.25ms)
Completed 200 OK in 42ms (Views: 1.1ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/logout" for 127.0.0.1 at 2025-09-16 14:17:39 -0700
Processing by Api::AuthController#logout as */*
  Parameters: {"auth" => {}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:17:39.343240"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:216:in 'User#invalidate_session!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 200 OK in 19ms (Views: 0.7ms | ActiveRecord: 4.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/login" for 127.0.0.1 at 2025-09-16 14:17:53 -0700
Processing by Api::AuthController#login as */*
  Parameters: {"email" => "[FILTERED]", "password" => "[FILTERED]", "auth" => {"email" => "[FILTERED]", "password" => "[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:6:in 'Api::AuthController#login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "failed_attempts" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:17:54.575287"], ["failed_attempts", 0], ["id", 2]]
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:56:in 'User#reset_failed_attempts!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 200 OK in 288ms (Views: 1.3ms | ActiveRecord: 4.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/auth/request_sms_code" for 127.0.0.1 at 2025-09-16 14:18:04 -0700
Processing by Api::AuthController#request_sms_code as */*
  Parameters: {"user_id" => 2, "auth" => {"user_id" => 2}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:106:in 'Api::AuthController#request_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:18:04.598851"], ["sms_verification_code", "424508"], ["sms_code_expires_at", "2025-09-16 21:28:04.591956"], ["id", 2]]
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:224:in 'User#generate_sms_verification_code!'
SMS enviado a +573001234567: 424508
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 3.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/debug/sms_code" for 127.0.0.1 at 2025-09-16 14:18:04 -0700
Processing by Api::DebugController#sms_code as */*
  Parameters: {"user_id" => 2, "debug" => {"user_id" => 2}}
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The index action could not be found for the :authenticate_request
callback on Api::DebugController, but it is listed in the controller's
:except option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:62:in 'AbstractController::Callbacks::ActionFilter#match?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:391:in 'block in ActiveSupport::Callbacks::CallTemplate::ObjectCall#inverted_lambda'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'Array#all?'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:178:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'Array#each'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:559:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/abstract_controller/callbacks.rb:260:in 'AbstractController::Callbacks#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/rescue.rb:27:in 'ActionController::Rescue#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:77:in 'block in ActionController::Instrumentation#process_action'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (7.2.2.2) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (7.2.2.2) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (7.2.2.2) lib/action_controller/metal/instrumentation.rb:76:in 'ActionController::Instrumentation#process_action'
actionpack (7.2.2.2) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (7.2.2.2) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (7.2.2.2) lib/abstract_controller/base.rb:163:in 'AbstractController::Base#process'
actionpack (7.2.2.2) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (7.2.2.2) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:67:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:53:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:133:in 'block in ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'Array#each'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:126:in 'ActionDispatch::Journey::Router#find_routes'
actionpack (7.2.2.2) lib/action_dispatch/journey/router.rb:34:in 'ActionDispatch::Journey::Router#serve'
actionpack (7.2.2.2) lib/action_dispatch/routing/route_set.rb:896:in 'ActionDispatch::Routing::RouteSet#call'
warden (1.2.9) lib/warden/manager.rb:36:in 'block in Warden::Manager#call'
warden (1.2.9) lib/warden/manager.rb:34:in 'Kernel#catch'
warden (1.2.9) lib/warden/manager.rb:34:in 'Warden::Manager#call'
rack (3.1.16) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.1.16) lib/rack/conditional_get.rb:43:in 'Rack::ConditionalGet#call'
rack (3.1.16) lib/rack/head.rb:15:in 'Rack::Head#call'
activerecord (7.2.2.2) lib/active_record/migration.rb:674:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (7.2.2.2) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (7.2.2.2) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (7.2.2.2) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (7.2.2.2) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/remote_ip.rb:96:in 'ActionDispatch::RemoteIp#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/request_id.rb:33:in 'ActionDispatch::RequestId#call'
rack (3.1.16) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
activesupport (7.2.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in 'ActiveSupport::Cache::Strategy::LocalCache::Middleware#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (7.2.2.2) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/executor.rb:16:in 'ActionDispatch::Executor#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.1.16) lib/rack/sendfile.rb:114:in 'Rack::Sendfile#call'
actionpack (7.2.2.2) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
rack-cors (3.0.0) lib/rack/cors.rb:102:in 'Rack::Cors#call'
railties (7.2.2.2) lib/rails/engine.rb:535:in 'Rails::Engine#call'
puma (7.0.3) lib/puma/configuration.rb:299:in 'Puma::Configuration::ConfigMiddleware#call'
puma (7.0.3) lib/puma/request.rb:101:in 'block in Puma::Request#handle_request'
puma (7.0.3) lib/puma/thread_pool.rb:346:in 'Puma::ThreadPool#with_force_shutdown'
puma (7.0.3) lib/puma/request.rb:100:in 'Puma::Request#handle_request'
puma (7.0.3) lib/puma/server.rb:497:in 'Puma::Server#process_client'
puma (7.0.3) lib/puma/server.rb:266:in 'block in Puma::Server#run'
puma (7.0.3) lib/puma/thread_pool.rb:173:in 'block in Puma::ThreadPool#spawn_thread'
Started POST "/api/auth/verify_two_factor" for 127.0.0.1 at 2025-09-16 14:18:15 -0700
Processing by Api::AuthController#verify_two_factor as */*
  Parameters: {"user_id" => 2, "code" => "424508", "method" => "sms", "auth" => {"user_id" => 2, "code" => "424508", "method" => "sms"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:79:in 'Api::AuthController#verify_two_factor'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Exists? (4.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "sms_verification_code" = ?, "sms_code_expires_at" = ?, "phone_verified_at" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:18:15.514933"], ["sms_verification_code", nil], ["sms_code_expires_at", nil], ["phone_verified_at", "2025-09-16 21:18:15.504884"], ["id", 2]]
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:237:in 'User#verify_sms_code'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Exists? (4.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "last_sign_in_at" = ?, "current_sign_in_at" = ?, "sign_in_count" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["last_sign_in_at", "2025-09-16 21:13:01.895826"], ["current_sign_in_at", "2025-09-16 21:18:15.521434"], ["sign_in_count", 11], ["updated_at", "2025-09-16 21:18:15.531913"], ["id", 2]]
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/api/auth_controller.rb:190:in 'Api::AuthController#complete_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Exists? (6.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER(?) AND "users"."id" != ? LIMIT ?[0m  [["email", "[FILTERED]"], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE "users" SET "updated_at" = ?, "session_token" = ? WHERE "users"."id" = ?[0m  [["updated_at", "2025-09-16 21:18:15.552046"], ["session_token", "[FILTERED]"], ["id", 2]]
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/user.rb:211:in 'User#regenerate_session_token!'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 200 OK in 61ms (Views: 1.0ms | ActiveRecord: 17.3ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:18:15 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.3ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 2.1ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:18:15 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:18:19 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 14ms (Views: 0.8ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:18:21 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 34ms (Views: 1.0ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:18:31 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:18:31 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 48ms (Views: 1.2ms | ActiveRecord: 2.0ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:18:32 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 20ms (Views: 1.4ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:18:40 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:18:40 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 40ms (Views: 0.8ms | ActiveRecord: 1.8ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:19:45 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 20ms (Views: 1.2ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:19:46 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.7ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.51ms)
Completed 200 OK in 56ms (Views: 1.6ms | ActiveRecord: 1.9ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=credit_card" for 127.0.0.1 at 2025-09-16 14:19:54 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "credit_card"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "credit_card"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "credit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=debit_card" for 127.0.0.1 at 2025-09-16 14:19:56 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "debit_card"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "debit_card"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "debit_card"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 28]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 41ms (Views: 1.1ms | ActiveRecord: 1.8ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=digital_wallet" for 127.0.0.1 at 2025-09-16 14:20:00 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "digital_wallet"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "digital_wallet"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "digital_wallet"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 11ms (Views: 1.1ms | ActiveRecord: 0.5ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1&payment_method=cash" for 127.0.0.1 at 2025-09-16 14:20:02 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1", "payment_method" => "cash"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."payment_method" = ?[0m  [["payment_method", "cash"]]
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" WHERE "sales"."payment_method" = ? ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["payment_method", "cash"], ["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ?[0m  [["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.4ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 40ms (Views: 1.1ms | ActiveRecord: 1.7ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:21:30 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:21:30 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.17ms)
Completed 200 OK in 81ms (Views: 1.5ms | ActiveRecord: 2.4ms (10 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:21:33 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 200 OK in 19ms (Views: 1.4ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:21:35 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.6ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 41ms (Views: 1.0ms | ActiveRecord: 2.1ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:21:38 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.36ms)
Completed 200 OK in 47ms (Views: 1.7ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:21:38 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:21:39 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:21:39 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 23ms (Views: 1.5ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:157:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:158:in 'Api::V1::SalesController#stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.6ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:162:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 47ms (Views: 1.2ms | ActiveRecord: 2.5ms (10 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:22:29 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 15ms (Views: 0.9ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:22:38 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 34ms (Views: 0.9ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:23:24 -0700
Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:23:24 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 77ms (Views: 1.2ms | ActiveRecord: 6.3ms (4 queries, 0 cached) | GC: 0.0ms)


Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:325:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:326:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:160:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Sum (0.0ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 95ms (Views: 1.0ms | ActiveRecord: 5.1ms (20 queries, 2 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:23:39 -0700
Processing by Api::V1::SalesController#stats as */*
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:325:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:326:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:160:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Sum (0.0ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 51ms (Views: 1.0ms | ActiveRecord: 2.6ms (19 queries, 2 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:24:52 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 17ms (Views: 1.2ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:24:54 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.3ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.3ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.3ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 225ms (Views: 1.3ms | ActiveRecord: 2.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:26:44 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.1ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Completed 200 OK in 35ms (Views: 0.8ms | ActiveRecord: 1.7ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:26:46 -0700
Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:26:46 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:325:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:326:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.2ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:160:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Sum (0.0ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.2ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 60ms (Views: 0.8ms | ActiveRecord: 3.1ms (20 queries, 2 cached) | GC: 0.0ms)


Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 15ms (Views: 0.7ms | ActiveRecord: 0.6ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/products?page=1" for 127.0.0.1 at 2025-09-16 14:27:07 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 14ms (Views: 1.0ms | ActiveRecord: 0.7ms (4 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales?page=1" for 127.0.0.1 at 2025-09-16 14:27:10 -0700
Processing by Api::V1::SalesController#index as HTML
  Parameters: {"page" => "1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mSale Load (0.2ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ? OFFSET ?[0m  [["LIMIT", 20], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Load (0.2ms)[0m  [1m[34mSELECT "sale_items".* FROM "sale_items" WHERE "sale_items"."sale_id" IN (?, ?)[0m  [["sale_id", 18], ["sale_id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 17]]
  ↳ app/controllers/api/v1/sales_controller.rb:20:in 'Api::V1::SalesController#index'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 18]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
  [1m[36mSaleItem Sum (0.2ms)[0m  [1m[34mSELECT SUM("sale_items"."quantity") FROM "sale_items" WHERE "sale_items"."sale_id" = ?[0m  [["sale_id", 17]]
  ↳ app/models/sale.rb:75:in 'Sale#items_count'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 200 OK in 31ms (Views: 0.9ms | ActiveRecord: 1.5ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/api/v1/sales/stats" for 127.0.0.1 at 2025-09-16 14:27:18 -0700
Processing by Api::V1::SalesController#stats as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/api/base_controller.rb:18:in 'Api::BaseController#authenticate_request_optional'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:325:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:326:in 'Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "cash"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "credit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "debit_card"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:330:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? AND "sales"."payment_method" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["payment_method", "digital_wallet"]]
  ↳ app/controllers/api/v1/sales_controller.rb:331:in 'block in Api::V1::SalesController#calculate_payment_method_stats'
  [1m[36mSale Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:160:in 'Api::V1::SalesController#stats'
  [1m[36mSale Sum (0.1ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-16 00:00:00"], ["created_at", "2025-09-16 23:59:59.999999"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:161:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:164:in 'Api::V1::SalesController#stats'
  [1m[36mCACHE Sale Sum (0.0ms)[0m  [1m[34mSELECT SUM("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:165:in 'Api::V1::SalesController#stats'
  [1m[36mSale Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ? LIMIT ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"], ["LIMIT", 1]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Average (0.1ms)[0m  [1m[34mSELECT AVG("sales"."total_amount") FROM "sales" WHERE "sales"."created_at" BETWEEN ? AND ? AND "sales"."status" = ?[0m  [["created_at", "2025-09-01"], ["created_at", "2025-09-30"], ["status", "completed"]]
  ↳ app/controllers/api/v1/sales_controller.rb:167:in 'Api::V1::SalesController#stats'
  [1m[36mSale Load (0.1ms)[0m  [1m[34mSELECT "sales".* FROM "sales" ORDER BY "sales"."created_at" DESC LIMIT ?[0m  [["LIMIT", 5]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = ?[0m  [["id", 2]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" IN (?, ?)[0m  [["id", 28], ["id", 27]]
  ↳ app/controllers/api/v1/sales_controller.rb:169:in 'Api::V1::SalesController#stats'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 200 OK in 50ms (Views: 0.7ms | ActiveRecord: 3.0ms (20 queries, 2 cached) | GC: 0.0ms)


Started GET "/api/v1/products?per_page=100" for 127.0.0.1 at 2025-09-16 14:27:18 -0700
Processing by Api::V1::ProductsController#index as HTML
  Parameters: {"per_page" => "100"}
  [1m[36mProduct Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  ↳ app/controllers/concerns/paginatable.rb:18:in 'Paginatable#paginate_collection'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."name" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 100], ["OFFSET", 0]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_type" = ? AND "active_storage_attachments"."name" = ? AND "active_storage_attachments"."record_id" = ?[0m  [["record_type", "Product"], ["name", "image"], ["record_id", 17]]
  ↳ app/controllers/api/v1/products_controller.rb:21:in 'Api::V1::ProductsController#index'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = ? LIMIT ?[0m  [["id", 20], ["LIMIT", 1]]
  ↳ app/models/product.rb:99:in 'Product#image_url'
Generated image URL for product 17: http://localhost:3000/api/v1/images/eyJfcmFpbHMiOnsiZGF0YSI6MjAsInB1ciI6ImJsb2JfaWQifX0=--125ec5fad3d436de43f355a6946dcc1fd698ed80
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 200 OK in 14ms (Views: 2.2ms | ActiveRecord: 0.5ms (4 queries, 0 cached) | GC: 0.0ms)


